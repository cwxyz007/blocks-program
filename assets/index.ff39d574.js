var t=Object.assign;function e(t,e){const n=Object.create(null),s=t.split(",");for(let i=0;i<s.length;i++)n[s[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(n){const s=new URL(t,location),i=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((n,o)=>{const r=new URL(t,s);if(self[e].moduleMap[r])return n(self[e].moduleMap[r]);const l=new Blob([`import * as m from '${r}';`,`${e}.moduleMap['${r}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){o(new Error(`Failed to import: ${t}`)),i(c)},onload(){n(self[e].moduleMap[r]),i(c)}});document.head.appendChild(c)})),self[e].moduleMap={}}}("./");const n=e("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl"),s=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function i(t){if(y(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],o=i(k(s)?l(s):s);if(o)for(const t in o)e[t]=o[t]}return e}if(B(t))return t}const o=/;(?![^(]*\))/g,r=/:(.+)/;function l(t){const e={};return t.split(o).forEach((t=>{if(t){const n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function c(t){let e="";if(k(t))e=t;else if(y(t))for(let n=0;n<t.length;n++)e+=c(t[n])+" ";else if(B(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const a={},h=[],d=()=>{},u=()=>!1,p=/^on[^a-z]/,f=t=>p.test(t),g=t=>t.startsWith("onUpdate:"),v=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},_=Object.prototype.hasOwnProperty,b=(t,e)=>_.call(t,e),y=Array.isArray,x=t=>"[object Map]"===F(t),w=t=>"function"==typeof t,k=t=>"string"==typeof t,C=t=>"symbol"==typeof t,B=t=>null!==t&&"object"==typeof t,$=t=>B(t)&&w(t.then)&&w(t.catch),S=Object.prototype.toString,F=t=>S.call(t),T=t=>k(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,P=e(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),R=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},O=/-(\w)/g,A=R((t=>t.replace(O,((t,e)=>e?e.toUpperCase():"")))),M=/\B([A-Z])/g,E=R((t=>t.replace(M,"-$1").toLowerCase())),z=R((t=>t.charAt(0).toUpperCase()+t.slice(1))),I=R((t=>t?`on${z(t)}`:"")),j=(t,e)=>t!==e&&(t==t||e==e),L=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},N=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},D=t=>{const e=parseFloat(t);return isNaN(e)?t:e},U=new WeakMap,W=[];let V;const H=Symbol(""),G=Symbol("");function q(t,e=a){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return e.scheduler?void 0:t();if(!W.includes(n)){J(n);try{return Z.push(Y),Y=!0,W.push(n),V=n,t()}finally{W.pop(),tt(),V=W[W.length-1]}}};return n.id=X++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function K(t){t.active&&(J(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let X=0;function J(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Y=!0;const Z=[];function Q(){Z.push(Y),Y=!1}function tt(){const t=Z.pop();Y=void 0===t||t}function et(t,e,n){if(!Y||void 0===V)return;let s=U.get(t);s||U.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=new Set),i.has(V)||(i.add(V),V.deps.push(i))}function nt(t,e,n,s,i,o){const r=U.get(t);if(!r)return;const l=new Set,c=t=>{t&&t.forEach((t=>{(t!==V||t.allowRecurse)&&l.add(t)}))};if("clear"===e)r.forEach(c);else if("length"===n&&y(t))r.forEach(((t,e)=>{("length"===e||e>=s)&&c(t)}));else switch(void 0!==n&&c(r.get(n)),e){case"add":y(t)?T(n)&&c(r.get("length")):(c(r.get(H)),x(t)&&c(r.get(G)));break;case"delete":y(t)||(c(r.get(H)),x(t)&&c(r.get(G)));break;case"set":x(t)&&c(r.get(H))}l.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const st=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(C)),it=at(),ot=at(!1,!0),rt=at(!0),lt=at(!0,!0),ct={};function at(t=!1,e=!1){return function(n,s,i){if("__v_isReactive"===s)return!t;if("__v_isReadonly"===s)return t;if("__v_raw"===s&&i===(t?zt:Et).get(n))return n;const o=y(n);if(!t&&o&&b(ct,s))return Reflect.get(ct,s,i);const r=Reflect.get(n,s,i);if(C(s)?st.has(s):"__proto__"===s||"__v_isRef"===s)return r;if(t||et(n,0,s),e)return r;if(Ht(r)){return!o||!T(s)?r.value:r}return B(r)?t?Lt(r):jt(r):r}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];ct[t]=function(...t){const n=Vt(this);for(let e=0,i=this.length;e<i;e++)et(n,0,e+"");const s=e.apply(n,t);return-1===s||!1===s?e.apply(n,t.map(Vt)):s}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];ct[t]=function(...t){Q();const n=e.apply(this,t);return tt(),n}}));function ht(t=!1){return function(e,n,s,i){const o=e[n];if(!t&&(s=Vt(s),!y(e)&&Ht(o)&&!Ht(s)))return o.value=s,!0;const r=y(e)&&T(n)?Number(n)<e.length:b(e,n),l=Reflect.set(e,n,s,i);return e===Vt(i)&&(r?j(s,o)&&nt(e,"set",n,s):nt(e,"add",n,s)),l}}const dt={get:it,set:ht(),deleteProperty:function(t,e){const n=b(t,e),s=(t[e],Reflect.deleteProperty(t,e));return s&&n&&nt(t,"delete",e,void 0),s},has:function(t,e){const n=Reflect.has(t,e);return C(e)&&st.has(e)||et(t,0,e),n},ownKeys:function(t){return et(t,0,y(t)?"length":H),Reflect.ownKeys(t)}},ut={get:rt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},pt=v({},dt,{get:ot,set:ht(!0)}),ft=(v({},ut,{get:lt}),t=>B(t)?jt(t):t),gt=t=>B(t)?Lt(t):t,vt=t=>t,mt=t=>Reflect.getPrototypeOf(t);function _t(t,e,n=!1,s=!1){const i=Vt(t=t.__v_raw),o=Vt(e);e!==o&&!n&&et(i,0,e),!n&&et(i,0,o);const{has:r}=mt(i),l=n?gt:s?vt:ft;return r.call(i,e)?l(t.get(e)):r.call(i,o)?l(t.get(o)):void 0}function bt(t,e=!1){const n=this.__v_raw,s=Vt(n),i=Vt(t);return t!==i&&!e&&et(s,0,t),!e&&et(s,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function yt(t,e=!1){return t=t.__v_raw,!e&&et(Vt(t),0,H),Reflect.get(t,"size",t)}function xt(t){t=Vt(t);const e=Vt(this),n=mt(e).has.call(e,t);return e.add(t),n||nt(e,"add",t,t),this}function wt(t,e){e=Vt(e);const n=Vt(this),{has:s,get:i}=mt(n);let o=s.call(n,t);o||(t=Vt(t),o=s.call(n,t));const r=i.call(n,t);return n.set(t,e),o?j(e,r)&&nt(n,"set",t,e):nt(n,"add",t,e),this}function kt(t){const e=Vt(this),{has:n,get:s}=mt(e);let i=n.call(e,t);i||(t=Vt(t),i=n.call(e,t));s&&s.call(e,t);const o=e.delete(t);return i&&nt(e,"delete",t,void 0),o}function Ct(){const t=Vt(this),e=0!==t.size,n=t.clear();return e&&nt(t,"clear",void 0,void 0),n}function Bt(t,e){return function(n,s){const i=this,o=i.__v_raw,r=Vt(o),l=t?gt:e?vt:ft;return!t&&et(r,0,H),o.forEach(((t,e)=>n.call(s,l(t),l(e),i)))}}function $t(t,e,n){return function(...s){const i=this.__v_raw,o=Vt(i),r=x(o),l="entries"===t||t===Symbol.iterator&&r,c="keys"===t&&r,a=i[t](...s),h=e?gt:n?vt:ft;return!e&&et(o,0,c?G:H),{next(){const{value:t,done:e}=a.next();return e?{value:t,done:e}:{value:l?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function St(t){return function(...e){return"delete"!==t&&this}}const Ft={get(t){return _t(this,t)},get size(){return yt(this)},has:bt,add:xt,set:wt,delete:kt,clear:Ct,forEach:Bt(!1,!1)},Tt={get(t){return _t(this,t,!1,!0)},get size(){return yt(this)},has:bt,add:xt,set:wt,delete:kt,clear:Ct,forEach:Bt(!1,!0)},Pt={get(t){return _t(this,t,!0)},get size(){return yt(this,!0)},has(t){return bt.call(this,t,!0)},add:St("add"),set:St("set"),delete:St("delete"),clear:St("clear"),forEach:Bt(!0,!1)};function Rt(t,e){const n=e?Tt:t?Pt:Ft;return(e,s,i)=>"__v_isReactive"===s?!t:"__v_isReadonly"===s?t:"__v_raw"===s?e:Reflect.get(b(n,s)&&s in e?n:e,s,i)}["keys","values","entries",Symbol.iterator].forEach((t=>{Ft[t]=$t(t,!1,!1),Pt[t]=$t(t,!0,!1),Tt[t]=$t(t,!1,!0)}));const Ot={get:Rt(!1,!1)},At={get:Rt(!1,!0)},Mt={get:Rt(!0,!1)},Et=new WeakMap,zt=new WeakMap;function It(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>F(t).slice(8,-1))(t))}function jt(t){return t&&t.__v_isReadonly?t:Nt(t,!1,dt,Ot)}function Lt(t){return Nt(t,!0,ut,Mt)}function Nt(t,e,n,s){if(!B(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const i=e?zt:Et,o=i.get(t);if(o)return o;const r=It(t);if(0===r)return t;const l=new Proxy(t,2===r?s:n);return i.set(t,l),l}function Dt(t){return Ut(t)?Dt(t.__v_raw):!(!t||!t.__v_isReactive)}function Ut(t){return!(!t||!t.__v_isReadonly)}function Wt(t){return Dt(t)||Ut(t)}function Vt(t){return t&&Vt(t.__v_raw)||t}function Ht(t){return Boolean(t&&!0===t.__v_isRef)}const Gt={get:(t,e,n)=>{return Ht(s=Reflect.get(t,e,n))?s.value:s;var s},set:(t,e,n,s)=>{const i=t[e];return Ht(i)&&!Ht(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function qt(t){return Dt(t)?t:new Proxy(t,Gt)}class Kt{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}class Xt{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=q(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,nt(Vt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),et(Vt(this),0,"value"),this._value}set value(t){this._setter(t)}}function Jt(t,e,n,s){let i;try{i=s?t(...s):t()}catch(o){Zt(o,e,n)}return i}function Yt(t,e,n,s){if(w(t)){const i=Jt(t,e,n,s);return i&&$(i)&&i.catch((t=>{Zt(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(Yt(t[o],e,n,s));return i}function Zt(t,e,n,s=!0){e&&e.vnode;if(e){let s=e.parent;const i=e.proxy,o=n;for(;s;){const e=s.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;s=s.parent}const r=e.appContext.config.errorHandler;if(r)return void Jt(r,null,10,[t,i,o])}!function(t,e,n,s=!0){console.error(t)}(t,0,0,s)}let Qt=!1,te=!1;const ee=[];let ne=0;const se=[];let ie=null,oe=0;const re=[];let le=null,ce=0;const ae=Promise.resolve();let he=null,de=null;function ue(t){const e=he||ae;return t?e.then(this?t.bind(this):t):e}function pe(t){ee.length&&ee.includes(t,Qt&&t.allowRecurse?ne+1:ne)||t===de||(ee.push(t),fe())}function fe(){Qt||te||(te=!0,he=ae.then(be))}function ge(t,e,n,s){y(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?s+1:s)||n.push(t),fe()}function ve(t,e=null){if(se.length){for(de=e,ie=[...new Set(se)],se.length=0,oe=0;oe<ie.length;oe++)ie[oe]();ie=null,oe=0,de=null,ve(t,e)}}function me(t){if(re.length){const t=[...new Set(re)];if(re.length=0,le)return void le.push(...t);for(le=t,le.sort(((t,e)=>_e(t)-_e(e))),ce=0;ce<le.length;ce++)le[ce]();le=null,ce=0}}const _e=t=>null==t.id?1/0:t.id;function be(t){te=!1,Qt=!0,ve(t),ee.sort(((t,e)=>_e(t)-_e(e)));try{for(ne=0;ne<ee.length;ne++){const t=ee[ne];t&&Jt(t,null,14)}}finally{ne=0,ee.length=0,me(),Qt=!1,he=null,(ee.length||re.length)&&be(t)}}function ye(t,e,...n){const s=t.vnode.props||a;let i=n;const o=e.startsWith("update:"),r=o&&e.slice(7);if(r&&r in s){const t=`${"modelValue"===r?"model":r}Modifiers`,{number:e,trim:o}=s[t]||a;o?i=n.map((t=>t.trim())):e&&(i=n.map(D))}let l=I(A(e)),c=s[l];!c&&o&&(l=I(E(e)),c=s[l]),c&&Yt(c,t,6,i);const h=s[l+"Once"];if(h){if(t.emitted){if(t.emitted[l])return}else(t.emitted={})[l]=!0;Yt(h,t,6,i)}}function xe(t,e,n=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const s=t.emits;let i={},o=!1;if(!w(t)){const s=t=>{o=!0,v(i,xe(t,e,!0))};!n&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}return s||o?(y(s)?s.forEach((t=>i[t]=null)):v(i,s),t.__emits=i):t.__emits=null}function we(t,e){return!(!t||!f(e))&&(e=e.slice(2).replace(/Once$/,""),b(t,e[0].toLowerCase()+e.slice(1))||b(t,E(e))||b(t,e))}let ke=null;function Ce(t){ke=t}function Be(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:o,propsOptions:[r],slots:l,attrs:c,emit:a,render:h,renderCache:d,data:u,setupState:p,ctx:f}=t;let v;ke=t;try{let t;if(4&n.shapeFlag){const e=i||s;v=Ln(h.call(e,e,d,o,p,u,f)),t=c}else{const n=e;0,v=Ln(n.length>1?n(o,{attrs:c,slots:l,emit:a}):n(o,null)),t=e.props?c:Se(c)}let m=v;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&(1&n||6&n)&&(r&&e.some(g)&&(t=Fe(t,r)),m=In(m,t))}n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),v=m}catch(m){Zt(m,t,1),v=zn(Sn)}return ke=null,v}function $e(t){let e;for(let n=0;n<t.length;n++){const s=t[n];if(!Rn(s))return;if(s.type!==Sn||"v-if"===s.children){if(e)return;e=s}}return e}const Se=t=>{let e;for(const n in t)("class"===n||"style"===n||f(n))&&((e||(e={}))[n]=t[n]);return e},Fe=(t,e)=>{const n={};for(const s in t)g(s)&&s.slice(9)in e||(n[s]=t[s]);return n};function Te(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const o=s[i];if(e[o]!==t[o]&&!we(n,o))return!0}return!1}function Pe(t){if(w(t)&&(t=t()),y(t)){t=$e(t)}return Ln(t)}let Re=0;const Oe=t=>Re+=t;function Ae(t,e=ke){if(!e)return t;const n=(...n)=>{Re||function(t=!1){Tn.push(Pn=t?null:[])}(!0);const s=ke;Ce(e);const i=t(...n);return Ce(s),Re||(Tn.pop(),Pn=Tn[Tn.length-1]||null),i};return n._c=!0,n}function Me(t,e,n,s=!1){const i={},o={};N(o,An,1),Ee(t,e,i,o),n?t.props=s?i:Nt(i,!1,pt,At):t.type.props?t.props=i:t.props=o,t.attrs=o}function Ee(t,e,n,s){const[i,o]=t.propsOptions;if(e)for(const r in e){const o=e[r];if(P(r))continue;let l;i&&b(i,l=A(r))?n[l]=o:we(t.emitsOptions,r)||(s[r]=o)}if(o){const e=Vt(n);for(let s=0;s<o.length;s++){const r=o[s];n[r]=ze(i,e,r,e[r],t)}}}function ze(t,e,n,s,i){const o=t[n];if(null!=o){const t=b(o,"default");if(t&&void 0===s){const t=o.default;o.type!==Function&&w(t)?(os(i),s=t(e),os(null)):s=t}o[0]&&(b(e,n)||t?!o[1]||""!==s&&s!==E(n)||(s=!0):s=!1)}return s}function Ie(t,e,n=!1){if(!e.deopt&&t.__props)return t.__props;const s=t.props,i={},o=[];let r=!1;if(!w(t)){const s=t=>{r=!0;const[n,s]=Ie(t,e,!0);v(i,n),s&&o.push(...s)};!n&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}if(!s&&!r)return t.__props=h;if(y(s))for(let l=0;l<s.length;l++){const t=A(s[l]);je(t)&&(i[t]=a)}else if(s)for(const l in s){const t=A(l);if(je(t)){const e=s[l],n=i[t]=y(e)||w(e)?{type:e}:e;if(n){const e=De(Boolean,n.type),s=De(String,n.type);n[0]=e>-1,n[1]=s<0||e<s,(e>-1||b(n,"default"))&&o.push(t)}}}return t.__props=[i,o]}function je(t){return"$"!==t[0]}function Le(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Ne(t,e){return Le(t)===Le(e)}function De(t,e){if(y(e)){for(let n=0,s=e.length;n<s;n++)if(Ne(e[n],t))return n}else if(w(e))return Ne(e,t)?0:-1;return-1}function Ue(t,e,n=is,s=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{if(n.isUnmounted)return;Q(),os(n);const i=Yt(e,n,t,s);return os(null),tt(),i});return s?i.unshift(o):i.push(o),o}}const We=t=>(e,n=is)=>!rs&&Ue(t,e,n),Ve=We("bm"),He=We("m"),Ge=We("bu"),qe=We("u"),Ke=We("bum"),Xe=We("um"),Je=We("rtg"),Ye=We("rtc"),Ze={};function Qe(t,e,n){return tn(t,e,n)}function tn(t,e,{immediate:n,deep:s,flush:i,onTrack:o,onTrigger:r}=a,l=is){let c,h,u=!1;if(Ht(t)?(c=()=>t.value,u=!!t._shallow):Dt(t)?(c=()=>t,s=!0):c=y(t)?()=>t.map((t=>Ht(t)?t.value:Dt(t)?nn(t):w(t)?Jt(t,l,2):void 0)):w(t)?e?()=>Jt(t,l,2):()=>{if(!l||!l.isUnmounted)return h&&h(),Jt(t,l,3,[p])}:d,e&&s){const t=c;c=()=>nn(t())}const p=t=>{h=_.options.onStop=()=>{Jt(t,l,4)}};let f=y(t)?[]:Ze;const g=()=>{if(_.active)if(e){const t=_();(s||u||j(t,f))&&(h&&h(),Yt(e,l,3,[t,f===Ze?void 0:f,p]),f=t)}else _()};let v;g.allowRecurse=!!e,v="sync"===i?g:"post"===i?()=>_n(g,l&&l.suspense):()=>{!l||l.isMounted?function(t){ge(t,ie,se,oe)}(g):g()};const _=q(c,{lazy:!0,onTrack:o,onTrigger:r,scheduler:v});return as(_,l),e?n?g():f=_():"post"===i?_n(_,l&&l.suspense):_(),()=>{K(_),l&&m(l.effects,_)}}function en(t,e,n){const s=this.proxy;return tn(k(t)?()=>s[t]:t.bind(s),e.bind(s),n,this)}function nn(t,e=new Set){if(!B(t)||e.has(t))return t;if(e.add(t),Ht(t))nn(t.value,e);else if(y(t))for(let n=0;n<t.length;n++)nn(t[n],e);else if("[object Set]"===F(t)||x(t))t.forEach((t=>{nn(t,e)}));else for(const n in t)nn(t[n],e);return t}const sn=t=>t.type.__isKeepAlive;function on(t,e,n=is){const s=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(Ue(e,s,n),n){let t=n.parent;for(;t&&t.parent;)sn(t.parent.vnode)&&rn(s,e,n,t),t=t.parent}}function rn(t,e,n,s){const i=Ue(e,t,s,!0);Xe((()=>{m(s[e],i)}),n)}const ln=t=>"_"===t[0]||"$stable"===t,cn=t=>y(t)?t.map(Ln):[Ln(t)],an=(t,e,n)=>Ae((t=>cn(e(t))),n),hn=(t,e)=>{const n=t._ctx;for(const s in t){if(ln(s))continue;const i=t[s];if(w(i))e[s]=an(0,i,n);else if(null!=i){const t=cn(i);e[s]=()=>t}}},dn=(t,e)=>{const n=cn(e);t.slots.default=()=>n};function un(t,e,n,s){const i=t.dirs,o=e&&e.dirs;for(let r=0;r<i.length;r++){const l=i[r];o&&(l.oldValue=o[r].value);const c=l.dir[s];c&&Yt(c,n,8,[t.el,l,t,e])}}function pn(){return{app:null,config:{isNativeTag:u,performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:u,errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let fn=0;function gn(t,e){return function(n,s=null){null==s||B(s)||(s=null);const i=pn(),o=new Set;let r=!1;const l=i.app={_uid:fn++,_component:n,_props:s,_container:null,_context:i,version:ds,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&w(t.install)?(o.add(t),t.install(l,...e)):w(t)&&(o.add(t),t(l,...e))),l),mixin:t=>(i.mixins.includes(t)||(i.mixins.push(t),(t.props||t.emits)&&(i.deopt=!0)),l),component:(t,e)=>e?(i.components[t]=e,l):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,l):i.directives[t],mount(o,c){if(!r){const a=zn(n,s);return a.appContext=i,c&&e?e(a,o):t(a,o),r=!0,l._container=o,o.__vue_app__=l,a.component.proxy}},unmount(){r&&t(null,l._container)},provide:(t,e)=>(i.provides[t]=e,l)};return l}}function vn(t){return w(t)?{setup:t,name:t.name}:t}const mn={scheduler:pe,allowRecurse:!0},_n=function(t,e){e&&e.pendingBranch?y(t)?e.effects.push(...t):e.effects.push(t):ge(t,le,re,ce)},bn=(t,e,n,s)=>{if(y(t))return void t.forEach(((t,i)=>bn(t,e&&(y(e)?e[i]:e),n,s)));let i;i=!s||s.type.__asyncLoader?null:4&s.shapeFlag?s.component.exposed||s.component.proxy:s.el;const{i:o,r:r}=t,l=e&&e.r,c=o.refs===a?o.refs={}:o.refs,h=o.setupState;if(null!=l&&l!==r&&(k(l)?(c[l]=null,b(h,l)&&(h[l]=null)):Ht(l)&&(l.value=null)),k(r)){const t=()=>{c[r]=i,b(h,r)&&(h[r]=i)};i?(t.id=-1,_n(t,n)):t()}else if(Ht(r)){const t=()=>{r.value=i};i?(t.id=-1,_n(t,n)):t()}else w(r)&&Jt(r,o,12,[i,c])};function yn(t){return function(t,e){const{insert:n,remove:s,patchProp:i,forcePatchProp:o,createElement:r,createText:l,createComment:c,setText:u,setElementText:p,parentNode:f,nextSibling:g,setScopeId:m=d,cloneNode:_,insertStaticContent:y}=t,x=(t,e,n,s=null,i=null,o=null,r=!1,l=!1)=>{t&&!On(t,e)&&(s=rt(t),Z(t,i,o,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:c,ref:a,shapeFlag:h}=e;switch(c){case $n:w(t,e,n,s);break;case Sn:k(t,e,n,s);break;case Fn:null==t&&C(e,n,s,r);break;case Bn:j(t,e,n,s,i,o,r,l);break;default:1&h?F(t,e,n,s,i,o,r,l):6&h?D(t,e,n,s,i,o,r,l):(64&h||128&h)&&c.process(t,e,n,s,i,o,r,l,ct)}null!=a&&i&&bn(a,t&&t.ref,o,e)},w=(t,e,s,i)=>{if(null==t)n(e.el=l(e.children),s,i);else{const n=e.el=t.el;e.children!==t.children&&u(n,e.children)}},k=(t,e,s,i)=>{null==t?n(e.el=c(e.children||""),s,i):e.el=t.el},C=(t,e,n,s)=>{[t.el,t.anchor]=y(t.children,e,n,s)},B=({el:t,anchor:e},s,i)=>{let o;for(;t&&t!==e;)o=g(t),n(t,s,i),t=o;n(e,s,i)},S=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=g(t),s(t),t=n;s(e)},F=(t,e,n,s,i,o,r,l)=>{r=r||"svg"===e.type,null==t?T(e,n,s,i,o,r,l):M(t,e,i,o,r,l)},T=(t,e,s,o,l,c,a)=>{let h,d;const{type:u,props:f,shapeFlag:g,transition:v,scopeId:m,patchFlag:b,dirs:y}=t;if(t.el&&void 0!==_&&-1===b)h=t.el=_(t.el);else{if(h=t.el=r(t.type,c,f&&f.is),8&g?p(h,t.children):16&g&&O(t.children,h,null,o,l,c&&"foreignObject"!==u,a||!!t.dynamicChildren),y&&un(t,null,o,"created"),f){for(const e in f)P(e)||i(h,e,null,f[e],c,t.children,o,l,ot);(d=f.onVnodeBeforeMount)&&xn(d,o,t)}R(h,m,t,o)}y&&un(t,null,o,"beforeMount");const x=(!l||l&&!l.pendingBranch)&&v&&!v.persisted;x&&v.beforeEnter(h),n(h,e,s),((d=f&&f.onVnodeMounted)||x||y)&&_n((()=>{d&&xn(d,o,t),x&&v.enter(h),y&&un(t,null,o,"mounted")}),l)},R=(t,e,n,s)=>{if(e&&m(t,e),s){const i=s.type.__scopeId;i&&i!==e&&m(t,i+"-s"),n===s.subTree&&R(t,s.vnode.scopeId,s.vnode,s.parent)}},O=(t,e,n,s,i,o,r,l=0)=>{for(let c=l;c<t.length;c++){const l=t[c]=r?Nn(t[c]):Ln(t[c]);x(null,l,e,n,s,i,o,r)}},M=(t,e,n,s,r,l)=>{const c=e.el=t.el;let{patchFlag:h,dynamicChildren:d,dirs:u}=e;h|=16&t.patchFlag;const f=t.props||a,g=e.props||a;let v;if((v=g.onVnodeBeforeUpdate)&&xn(v,n,e,t),u&&un(e,t,n,"beforeUpdate"),h>0){if(16&h)I(c,e,f,g,n,s,r);else if(2&h&&f.class!==g.class&&i(c,"class",null,g.class,r),4&h&&i(c,"style",f.style,g.style,r),8&h){const l=e.dynamicProps;for(let e=0;e<l.length;e++){const a=l[e],h=f[a],d=g[a];(d!==h||o&&o(c,a))&&i(c,a,h,d,r,t.children,n,s,ot)}}1&h&&t.children!==e.children&&p(c,e.children)}else l||null!=d||I(c,e,f,g,n,s,r);const m=r&&"foreignObject"!==e.type;d?z(t.dynamicChildren,d,c,n,s,m):l||G(t,e,c,null,n,s,m),((v=g.onVnodeUpdated)||u)&&_n((()=>{v&&xn(v,n,e,t),u&&un(e,t,n,"updated")}),s)},z=(t,e,n,s,i,o)=>{for(let r=0;r<e.length;r++){const l=t[r],c=e[r],a=l.type===Bn||!On(l,c)||6&l.shapeFlag||64&l.shapeFlag?f(l.el):n;x(l,c,a,null,s,i,o,!0)}},I=(t,e,n,s,r,l,c)=>{if(n!==s){for(const a in s){if(P(a))continue;const h=s[a],d=n[a];(h!==d||o&&o(t,a))&&i(t,a,d,h,c,e.children,r,l,ot)}if(n!==a)for(const o in n)P(o)||o in s||i(t,o,n[o],null,c,e.children,r,l,ot)}},j=(t,e,s,i,o,r,c,a)=>{const h=e.el=t?t.el:l(""),d=e.anchor=t?t.anchor:l("");let{patchFlag:u,dynamicChildren:p}=e;u>0&&(a=!0),null==t?(n(h,s,i),n(d,s,i),O(e.children,s,d,o,r,c,a)):u>0&&64&u&&p&&t.dynamicChildren?(z(t.dynamicChildren,p,s,o,r,c),(null!=e.key||o&&e===o.subTree)&&wn(t,e,!0)):G(t,e,s,d,o,r,c,a)},D=(t,e,n,s,i,o,r,l)=>{null==t?512&e.shapeFlag?i.ctx.activate(e,n,s,r,l):U(e,n,s,i,o,r,l):W(t,e,l)},U=(t,e,n,s,i,o,r)=>{const l=t.component=function(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||ns,o={uid:ss++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ie(s,i),emitsOptions:xe(s,i),emit:null,emitted:null,ctx:a,data:a,props:a,attrs:a,slots:a,refs:a,setupState:a,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=ye.bind(null,o),o}(t,s,i);if(sn(t)&&(l.ctx.renderer=ct),function(t,e=!1){rs=e;const{props:n,children:s,shapeFlag:i}=t.vnode,o=4&i;Me(t,n,o,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=e,N(e,"_",n)):hn(e,t.slots={})}else t.slots={},e&&dn(t,e);N(t.slots,An,1)})(t,s);const r=o?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ts);const{setup:s}=n;if(s){const n=t.setupContext=s.length>1?function(t){const e=e=>{t.exposed=qt(e)};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;is=t,Q();const i=Jt(s,t,0,[t.props,n]);if(tt(),is=null,$(i)){if(e)return i.then((e=>{ls(t,e)}));t.asyncDep=i}else ls(t,i)}else cs(t)}(t,e):void 0;rs=!1}(l),l.asyncDep){if(i&&i.registerDep(l,V),!t.el){const t=l.subTree=zn(Sn);k(null,t,e,n)}}else V(l,t,e,n,i,o,r)},W=(t,e,n)=>{const s=e.component=t.component;if(function(t,e,n){const{props:s,children:i,component:o}=t,{props:r,children:l,patchFlag:c}=e,a=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!i&&!l||l&&l.$stable)||s!==r&&(s?!r||Te(s,r,a):!!r);if(1024&c)return!0;if(16&c)return s?Te(s,r,a):!!r;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(r[n]!==s[n]&&!we(a,n))return!0}}return!1}(t,e,n)){if(s.asyncDep&&!s.asyncResolved)return void H(s,e,n);s.next=e,function(t){const e=ee.indexOf(t);e>-1&&ee.splice(e,1)}(s.update),s.update()}else e.component=t.component,e.el=t.el,s.vnode=e},V=(t,e,n,s,i,o,r)=>{t.update=q((function(){if(t.isMounted){let e,{next:n,bu:s,u:l,parent:c,vnode:a}=t,h=n;n?(n.el=a.el,H(t,n,r)):n=a,s&&L(s),(e=n.props&&n.props.onVnodeBeforeUpdate)&&xn(e,c,n,a);const d=Be(t),u=t.subTree;t.subTree=d,x(u,d,f(u.el),rt(u),t,i,o),n.el=d.el,null===h&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,d.el),l&&_n(l,i),(e=n.props&&n.props.onVnodeUpdated)&&_n((()=>{xn(e,c,n,a)}),i)}else{let r;const{el:l,props:c}=e,{bm:a,m:h,parent:d}=t;a&&L(a),(r=c&&c.onVnodeBeforeMount)&&xn(r,d,e);const u=t.subTree=Be(t);if(l&&ht?ht(e.el,u,t,i):(x(null,u,n,s,t,i,o),e.el=u.el),h&&_n(h,i),r=c&&c.onVnodeMounted){const t=e;_n((()=>{xn(r,d,t)}),i)}const{a:p}=t;p&&256&e.shapeFlag&&_n(p,i),t.isMounted=!0,e=n=s=null}}),mn)},H=(t,e,n)=>{e.component=t;const s=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,s){const{props:i,attrs:o,vnode:{patchFlag:r}}=t,l=Vt(i),[c]=t.propsOptions;if(!(s||r>0)||16&r){let s;Ee(t,e,i,o);for(const o in l)e&&(b(e,o)||(s=E(o))!==o&&b(e,s))||(c?!n||void 0===n[o]&&void 0===n[s]||(i[o]=ze(c,e||a,o,void 0,t)):delete i[o]);if(o!==l)for(const t in o)e&&b(e,t)||delete o[t]}else if(8&r){const n=t.vnode.dynamicProps;for(let s=0;s<n.length;s++){const r=n[s],a=e[r];if(c)if(b(o,r))o[r]=a;else{const e=A(r);i[e]=ze(c,l,e,a,t)}else o[r]=a}}nt(t,"set","$attrs")}(t,e.props,s,n),((t,e)=>{const{vnode:n,slots:s}=t;let i=!0,o=a;if(32&n.shapeFlag){const t=e._;t?1===t?i=!1:v(s,e):(i=!e.$stable,hn(e,s)),o=e}else e&&(dn(t,e),o={default:1});if(i)for(const r in s)ln(r)||r in o||delete s[r]})(t,e.children),ve(void 0,t.update)},G=(t,e,n,s,i,o,r,l=!1)=>{const c=t&&t.children,a=t?t.shapeFlag:0,h=e.children,{patchFlag:d,shapeFlag:u}=e;if(d>0){if(128&d)return void J(c,h,n,s,i,o,r,l);if(256&d)return void X(c,h,n,s,i,o,r,l)}8&u?(16&a&&ot(c,i,o),h!==c&&p(n,h)):16&a?16&u?J(c,h,n,s,i,o,r,l):ot(c,i,o,!0):(8&a&&p(n,""),16&u&&O(h,n,s,i,o,r,l))},X=(t,e,n,s,i,o,r,l)=>{e=e||h;const c=(t=t||h).length,a=e.length,d=Math.min(c,a);let u;for(u=0;u<d;u++){const s=e[u]=l?Nn(e[u]):Ln(e[u]);x(t[u],s,n,null,i,o,r,l)}c>a?ot(t,i,o,!0,!1,d):O(e,n,s,i,o,r,l,d)},J=(t,e,n,s,i,o,r,l)=>{let c=0;const a=e.length;let d=t.length-1,u=a-1;for(;c<=d&&c<=u;){const s=t[c],a=e[c]=l?Nn(e[c]):Ln(e[c]);if(!On(s,a))break;x(s,a,n,null,i,o,r,l),c++}for(;c<=d&&c<=u;){const s=t[d],c=e[u]=l?Nn(e[u]):Ln(e[u]);if(!On(s,c))break;x(s,c,n,null,i,o,r,l),d--,u--}if(c>d){if(c<=u){const t=u+1,h=t<a?e[t].el:s;for(;c<=u;)x(null,e[c]=l?Nn(e[c]):Ln(e[c]),n,h,i,o,r),c++}}else if(c>u)for(;c<=d;)Z(t[c],i,o,!0),c++;else{const p=c,f=c,g=new Map;for(c=f;c<=u;c++){const t=e[c]=l?Nn(e[c]):Ln(e[c]);null!=t.key&&g.set(t.key,c)}let v,m=0;const _=u-f+1;let b=!1,y=0;const w=new Array(_);for(c=0;c<_;c++)w[c]=0;for(c=p;c<=d;c++){const s=t[c];if(m>=_){Z(s,i,o,!0);continue}let a;if(null!=s.key)a=g.get(s.key);else for(v=f;v<=u;v++)if(0===w[v-f]&&On(s,e[v])){a=v;break}void 0===a?Z(s,i,o,!0):(w[a-f]=c+1,a>=y?y=a:b=!0,x(s,e[a],n,null,i,o,r,l),m++)}const k=b?function(t){const e=t.slice(),n=[0];let s,i,o,r,l;const c=t.length;for(s=0;s<c;s++){const c=t[s];if(0!==c){if(i=n[n.length-1],t[i]<c){e[s]=i,n.push(s);continue}for(o=0,r=n.length-1;o<r;)l=(o+r)/2|0,t[n[l]]<c?o=l+1:r=l;c<t[n[o]]&&(o>0&&(e[s]=n[o-1]),n[o]=s)}}o=n.length,r=n[o-1];for(;o-- >0;)n[o]=r,r=e[r];return n}(w):h;for(v=k.length-1,c=_-1;c>=0;c--){const t=f+c,l=e[t],h=t+1<a?e[t+1].el:s;0===w[c]?x(null,l,n,h,i,o,r):b&&(v<0||c!==k[v]?Y(l,n,h,2):v--)}}},Y=(t,e,s,i,o=null)=>{const{el:r,type:l,transition:c,children:a,shapeFlag:h}=t;if(6&h)return void Y(t.component.subTree,e,s,i);if(128&h)return void t.suspense.move(e,s,i);if(64&h)return void l.move(t,e,s,ct);if(l===Bn){n(r,e,s);for(let t=0;t<a.length;t++)Y(a[t],e,s,i);return void n(t.anchor,e,s)}if(l===Fn)return void B(t,e,s);if(2!==i&&1&h&&c)if(0===i)c.beforeEnter(r),n(r,e,s),_n((()=>c.enter(r)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=c,l=()=>n(r,e,s),a=()=>{t(r,(()=>{l(),o&&o()}))};i?i(r,l,a):a()}else n(r,e,s)},Z=(t,e,n,s=!1,i=!1)=>{const{type:o,props:r,ref:l,children:c,dynamicChildren:a,shapeFlag:h,patchFlag:d,dirs:u}=t;if(null!=l&&bn(l,null,n,null),256&h)return void e.ctx.deactivate(t);const p=1&h&&u;let f;if((f=r&&r.onVnodeBeforeUnmount)&&xn(f,e,t),6&h)it(t.component,n,s);else{if(128&h)return void t.suspense.unmount(n,s);p&&un(t,null,e,"beforeUnmount"),a&&(o!==Bn||d>0&&64&d)?ot(a,e,n,!1,!0):(o===Bn&&(128&d||256&d)||!i&&16&h)&&ot(c,e,n),64&h&&(s||!kn(t.props))&&t.type.remove(t,ct),s&&et(t)}((f=r&&r.onVnodeUnmounted)||p)&&_n((()=>{f&&xn(f,e,t),p&&un(t,null,e,"unmounted")}),n)},et=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===Bn)return void st(n,i);if(e===Fn)return void S(t);const r=()=>{s(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:s}=o,i=()=>e(n,r);s?s(t.el,r,i):i()}else r()},st=(t,e)=>{let n;for(;t!==e;)n=g(t),s(t),t=n;s(e)},it=(t,e,n)=>{const{bum:s,effects:i,update:o,subTree:r,um:l}=t;if(s&&L(s),i)for(let c=0;c<i.length;c++)K(i[c]);o&&(K(o),Z(r,t,e,n)),l&&_n(l,e),_n((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},ot=(t,e,n,s=!1,i=!1,o=0)=>{for(let r=o;r<t.length;r++)Z(t[r],e,n,s,i)},rt=t=>6&t.shapeFlag?rt(t.component.subTree):128&t.shapeFlag?t.suspense.next():g(t.anchor||t.el),lt=(t,e)=>{null==t?e._vnode&&Z(e._vnode,null,null,!0):x(e._vnode||null,t,e),me(),e._vnode=t},ct={p:x,um:Z,m:Y,r:et,mt:U,mc:O,pc:G,pbc:z,n:rt,o:t};let at,ht;e&&([at,ht]=e(ct));return{render:lt,hydrate:at,createApp:gn(lt,at)}}(t)}function xn(t,e,n,s=null){Yt(t,e,7,[n,s])}function wn(t,e,n=!1){const s=t.children,i=e.children;if(y(s)&&y(i))for(let o=0;o<s.length;o++){const t=s[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=Nn(i[o]),e.el=t.el),n||wn(t,e))}}const kn=t=>t&&(t.disabled||""===t.disabled),Cn=Symbol(),Bn=Symbol(void 0),$n=Symbol(void 0),Sn=Symbol(void 0),Fn=Symbol(void 0),Tn=[];let Pn=null;function Rn(t){return!!t&&!0===t.__v_isVNode}function On(t,e){return t.type===e.type&&t.key===e.key}const An="__vInternal",Mn=({key:t})=>null!=t?t:null,En=({ref:t})=>null!=t?k(t)||Ht(t)||w(t)?{i:ke,r:t}:t:null,zn=function(t,e=null,n=null,s=0,o=null,r=!1){t&&t!==Cn||(t=Sn);if(Rn(t)){const s=In(t,e,!0);return n&&Dn(s,n),s}l=t,w(l)&&"__vccOpts"in l&&(t=t.__vccOpts);var l;if(e){(Wt(e)||An in e)&&(e=v({},e));let{class:t,style:n}=e;t&&!k(t)&&(e.class=c(t)),B(n)&&(Wt(n)&&!y(n)&&(n=v({},n)),e.style=i(n))}const a=k(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:B(t)?4:w(t)?2:0,h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Mn(e),ref:e&&En(e),scopeId:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};if(Dn(h,n),128&a){const{content:t,fallback:e}=function(t){const{shapeFlag:e,children:n}=t;let s,i;return 32&e?(s=Pe(n.default),i=Pe(n.fallback)):(s=Pe(n),i=Ln(null)),{content:s,fallback:i}}(h);h.ssContent=t,h.ssFallback=e}!r&&Pn&&(s>0||6&a)&&32!==s&&Pn.push(h);return h};function In(t,e,n=!1){const{props:s,ref:o,patchFlag:r}=t,l=e?function(...t){const e=v({},t[0]);for(let n=1;n<t.length;n++){const s=t[n];for(const t in s)if("class"===t)e.class!==s.class&&(e.class=c([e.class,s.class]));else if("style"===t)e.style=i([e.style,s.style]);else if(f(t)){const n=e[t],i=s[t];n!==i&&(e[t]=n?[].concat(n,s[t]):i)}else""!==t&&(e[t]=s[t])}return e}(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Mn(l),ref:e&&e.ref?n&&o?y(o)?o.concat(En(e)):[o,En(e)]:En(e):o,scopeId:t.scopeId,children:t.children,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Bn?-1===r?16:16|r:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&In(t.ssContent),ssFallback:t.ssFallback&&In(t.ssFallback),el:t.el,anchor:t.anchor}}function jn(t=" ",e=0){return zn($n,null,t,e)}function Ln(t){return null==t||"boolean"==typeof t?zn(Sn):y(t)?zn(Bn,null,t):"object"==typeof t?null===t.el?t:In(t):zn($n,null,String(t))}function Nn(t){return null===t.el?t:In(t)}function Dn(t,e){let n=0;const{shapeFlag:s}=t;if(null==e)e=null;else if(y(e))n=16;else if("object"==typeof e){if(1&s||64&s){const n=e.default;return void(n&&(n._c&&Oe(1),Dn(t,n()),n._c&&Oe(-1)))}{n=32;const s=e._;s||An in e?3===s&&ke&&(1024&ke.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=ke}}else w(e)?(e={default:e,_ctx:ke},n=32):(e=String(e),64&s?(n=16,e=[jn(e)]):n=8);t.children=e,t.shapeFlag|=n}function Un(t,e,n=!1){const s=is||ke;if(s){const i=null==s.parent?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&w(e)?e():e}}let Wn=!1;function Vn(t,e,n=[],s=[],i=[],o=!1){const{mixins:r,extends:l,data:c,computed:h,methods:u,watch:p,provide:f,inject:g,components:m,directives:_,beforeMount:b,mounted:x,beforeUpdate:k,updated:C,activated:$,deactivated:S,beforeDestroy:F,beforeUnmount:T,destroyed:P,unmounted:R,render:O,renderTracked:A,renderTriggered:M,errorCaptured:E,expose:z}=e,I=t.proxy,j=t.ctx,L=t.appContext.mixins;if(o&&O&&t.render===d&&(t.render=O),o||(Wn=!0,Hn("beforeCreate","bc",e,t,L),Wn=!1,Kn(t,L,n,s,i)),l&&Vn(t,l,n,s,i,!0),r&&Kn(t,r,n,s,i),g)if(y(g))for(let a=0;a<g.length;a++){const t=g[a];j[t]=Un(t)}else for(const a in g){const t=g[a];B(t)?j[a]=Un(t.from||a,t.default,!0):j[a]=Un(t)}if(u)for(const a in u){const t=u[a];w(t)&&(j[a]=t.bind(I))}if(o?c&&n.push(c):(n.length&&n.forEach((e=>Xn(t,e,I))),c&&Xn(t,c,I)),h)for(const a in h){const t=h[a],e=hs({get:w(t)?t.bind(I,I):w(t.get)?t.get.bind(I,I):d,set:!w(t)&&w(t.set)?t.set.bind(I):d});Object.defineProperty(j,a,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}var N;if(p&&s.push(p),!o&&s.length&&s.forEach((t=>{for(const e in t)Jn(t[e],j,I,e)})),f&&i.push(f),!o&&i.length&&i.forEach((t=>{const e=w(t)?t.call(I):t;Reflect.ownKeys(e).forEach((t=>{!function(t,e){if(is){let n=is.provides;const s=is.parent&&is.parent.provides;s===n&&(n=is.provides=Object.create(s)),n[t]=e}}(t,e[t])}))})),o&&(m&&v(t.components||(t.components=v({},t.type.components)),m),_&&v(t.directives||(t.directives=v({},t.type.directives)),_)),o||Hn("created","c",e,t,L),b&&Ve(b.bind(I)),x&&He(x.bind(I)),k&&Ge(k.bind(I)),C&&qe(C.bind(I)),$&&on($.bind(I),"a",N),S&&function(t,e){on(t,"da",e)}(S.bind(I)),E&&((t,e=is)=>{Ue("ec",t,e)})(E.bind(I)),A&&Ye(A.bind(I)),M&&Je(M.bind(I)),T&&Ke(T.bind(I)),R&&Xe(R.bind(I)),y(z)&&!o)if(z.length){const e=t.exposed||(t.exposed=qt({}));z.forEach((t=>{e[t]=function(t,e){return Ht(t[e])?t[e]:new Kt(t,e)}(I,t)}))}else t.exposed||(t.exposed=a)}function Hn(t,e,n,s,i){qn(t,e,i,s);const{extends:o,mixins:r}=n;o&&Gn(t,e,o,s),r&&qn(t,e,r,s);const l=n[t];l&&Yt(l.bind(s.proxy),s,e)}function Gn(t,e,n,s){n.extends&&Gn(t,e,n.extends,s);const i=n[t];i&&Yt(i.bind(s.proxy),s,e)}function qn(t,e,n,s){for(let i=0;i<n.length;i++){const o=n[i].mixins;o&&qn(t,e,o,s);const r=n[i][t];r&&Yt(r.bind(s.proxy),s,e)}}function Kn(t,e,n,s,i){for(let o=0;o<e.length;o++)Vn(t,e[o],n,s,i,!0)}function Xn(t,e,n){const s=e.call(n,n);B(s)&&(t.data===a?t.data=jt(s):v(t.data,s))}function Jn(t,e,n,s){const i=s.includes(".")?function(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}(n,s):()=>n[s];if(k(t)){const n=e[t];w(n)&&Qe(i,n)}else if(w(t))Qe(i,t.bind(n));else if(B(t))if(y(t))t.forEach((t=>Jn(t,e,n,s)));else{const s=w(t.handler)?t.handler.bind(n):e[t.handler];w(s)&&Qe(i,s,t)}}function Yn(t,e,n){const s=n.appContext.config.optionMergeStrategies,{mixins:i,extends:o}=e;o&&Yn(t,o,n),i&&i.forEach((e=>Yn(t,e,n)));for(const r in e)s&&b(s,r)?t[r]=s[r](t[r],e[r],n.proxy,r):t[r]=e[r]}const Zn=t=>t&&(t.proxy?t.proxy:Zn(t.parent)),Qn=v(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zn(t.parent),$root:t=>t.root&&t.root.proxy,$emit:t=>t.emit,$options:t=>function(t){const e=t.type,{__merged:n,mixins:s,extends:i}=e;if(n)return n;const o=t.appContext.mixins;if(!o.length&&!s&&!i)return e;const r={};return o.forEach((e=>Yn(r,e,t))),Yn(r,e,t),e.__merged=r}(t),$forceUpdate:t=>()=>pe(t.update),$nextTick:t=>ue.bind(t.proxy),$watch:t=>en.bind(t)}),ts={get({_:t},e){const{ctx:n,setupState:s,data:i,props:o,accessCache:r,type:l,appContext:c}=t;if("__v_skip"===e)return!0;let h;if("$"!==e[0]){const l=r[e];if(void 0!==l)switch(l){case 0:return s[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(s!==a&&b(s,e))return r[e]=0,s[e];if(i!==a&&b(i,e))return r[e]=1,i[e];if((h=t.propsOptions[0])&&b(h,e))return r[e]=2,o[e];if(n!==a&&b(n,e))return r[e]=3,n[e];Wn||(r[e]=4)}}const d=Qn[e];let u,p;return d?("$attrs"===e&&et(t,0,e),d(t)):(u=l.__cssModules)&&(u=u[e])?u:n!==a&&b(n,e)?(r[e]=3,n[e]):(p=c.config.globalProperties,b(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:s,setupState:i,ctx:o}=t;if(i!==a&&b(i,e))i[e]=n;else if(s!==a&&b(s,e))s[e]=n;else if(e in t.props)return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:o}},r){let l;return void 0!==n[r]||t!==a&&b(t,r)||e!==a&&b(e,r)||(l=o[0])&&b(l,r)||b(s,r)||b(Qn,r)||b(i.config.globalProperties,r)}},es=v({},ts,{get(t,e){if(e!==Symbol.unscopables)return ts.get(t,e,t)},has:(t,e)=>"_"!==e[0]&&!n(e)}),ns=pn();let ss=0;let is=null;const os=t=>{is=t};let rs=!1;function ls(t,e,n){w(e)?t.render=e:B(e)&&(t.setupState=qt(e)),cs(t)}function cs(t,e){const n=t.type;t.render||(t.render=n.render||d,t.render._rc&&(t.withProxy=new Proxy(t.ctx,es))),is=t,Q(),Vn(t,n),tt(),is=null}function as(t,e=is){e&&(e.effects||(e.effects=[])).push(t)}function hs(t){const e=function(t){let e,n;return w(t)?(e=t,n=d):(e=t.get,n=t.set),new Xt(e,n,w(t)||!t.set)}(t);return as(e.effect),e}const ds="3.0.5",us="http://www.w3.org/2000/svg",ps="undefined"!=typeof document?document:null;let fs,gs;const vs={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n)=>e?ps.createElementNS(us,t):ps.createElement(t,n?{is:n}:void 0),createText:t=>ps.createTextNode(t),createComment:t=>ps.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ps.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode:t=>t.cloneNode(!0),insertStaticContent(t,e,n,s){const i=s?gs||(gs=ps.createElementNS(us,"svg")):fs||(fs=ps.createElement("div"));i.innerHTML=t;const o=i.firstChild;let r=o,l=r;for(;r;)l=r,vs.insert(r,e,n),r=i.firstChild;return[o,l]}};const ms=/\s*!important$/;function _s(t,e,n){if(y(n))n.forEach((n=>_s(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const s=function(t,e){const n=ys[e];if(n)return n;let s=A(e);if("filter"!==s&&s in t)return ys[e]=s;s=z(s);for(let i=0;i<bs.length;i++){const n=bs[i]+s;if(n in t)return ys[e]=n}return e}(t,e);ms.test(n)?t.setProperty(E(s),n.replace(ms,""),"important"):t[s]=n}}const bs=["Webkit","Moz","ms"],ys={};const xs="http://www.w3.org/1999/xlink";let ws=Date.now;"undefined"!=typeof document&&ws()>document.createEvent("Event").timeStamp&&(ws=()=>performance.now());let ks=0;const Cs=Promise.resolve(),Bs=()=>{ks=0};function $s(t,e,n,s,i=null){const o=t._vei||(t._vei={}),r=o[e];if(s&&r)r.value=s;else{const[n,l]=function(t){let e;if(Ss.test(t)){let n;for(e={};n=t.match(Ss);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t.slice(2).toLowerCase(),e]}(e);if(s){!function(t,e,n,s){t.addEventListener(e,n,s)}(t,n,o[e]=function(t,e){const n=t=>{(t.timeStamp||ws())>=n.attached-1&&Yt(function(t,e){if(y(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>ks||(Cs.then(Bs),ks=ws()))(),n}(s,i),l)}else r&&(!function(t,e,n,s){t.removeEventListener(e,n,s)}(t,n,r,l),o[e]=void 0)}}const Ss=/(?:Once|Passive|Capture)$/;const Fs=/^on[a-z]/;const Ts=v({patchProp:(t,e,n,i,o=!1,r,l,c,a)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,i,o);break;case"style":!function(t,e,n){const s=t.style;if(n)if(k(n))e!==n&&(s.cssText=n);else{for(const t in n)_s(s,t,n[t]);if(e&&!k(e))for(const t in e)null==n[t]&&_s(s,t,"")}else t.removeAttribute("style")}(t,n,i);break;default:f(e)?g(e)||$s(t,e,0,i,l):function(t,e,n,s){if(s)return"innerHTML"===e||!!(e in t&&Fs.test(e)&&w(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e&&"string"==typeof n)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if(Fs.test(e)&&k(n))return!1;return e in t}(t,e,i,o)?function(t,e,n,s,i,o,r){if("innerHTML"===e||"textContent"===e)return s&&r(s,i,o),void(t[e]=null==n?"":n);if("value"!==e||"PROGRESS"===t.tagName){if(""===n||null==n){const s=typeof t[e];if(""===n&&"boolean"===s)return void(t[e]=!0);if(null==n&&"string"===s)return t[e]="",void t.removeAttribute(e);if("number"===s)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch(l){}}else{t._value=n;const e=null==n?"":n;t.value!==e&&(t.value=e)}}(t,e,i,r,l,c,a):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),function(t,e,n,i){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(xs,e.slice(6,e.length)):t.setAttributeNS(xs,e,n);else{const i=s(e);null==n||i&&!1===n?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}(t,e,i,o))}},forcePatchProp:(t,e)=>"value"===e},vs);let Ps;var Rs,Os;class As{constructor(){this._events={}}events(t){return this._events[t]||(this._events[t]=new Set),this._events[t]}on(t,e){this.events(t).add(e)}off(t,e){this.events(t).delete(e)}emit(t,...e){const n=this.events(t);for(const s of n)s(...e)}clear(t){if(void 0!==t){const e=this.events(t);e&&e.clear()}else this._events={}}}function Ms(){let t="";for(let e=0;e<32;e+=1)switch(e){case 8:case 20:case 12:t+="-",t+=(16*Math.random()|0).toString(16);break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t}function Es(t){return"string"==typeof t?t:t.id}class zs extends Array{remove(t){const e=this.findIndex(t);return e>=0?this.splice(e,1)[0]:null}removeItem(t){const e=this.indexOf(t);return e>=0?this.splice(e,1)[0]:null}pushDistinct(t){const e=this.indexOf(t)>=0;return!e&&this.push(t),e}}function Is(t,...e){console.warn(`[${t}]`,...e),console.trace()}class js{constructor(){this.ctors=new Map}get(t){return this.ctors.get(t)||null}set(t,e){this.ctors.get(t)&&Is(js.name,`Type ${t} has exist.`),e&&this.ctors.set(t,e)}}class Ls{get value(){return this._value}constructor(t){this._value=t,this._subs=new Set}sub(t){this._subs.has(t)||this._subs.add(t)}unSub(t){this._subs.delete(t)}update(t,e=!1){if(this._value===t)return;const n=this._value;if(this._value=t,!e)for(const s of this._subs)s(t,n)}}class Ns{constructor(e={},n=Ms()){this.nextUpdate=(t,e)=>{null==e||e.previous.update(null),null==t||t.previous.update(this)},this.previousUpdate=(t,e)=>{null==e||e.next.update(null),null==t||t.next.update(this)},this.parentUpdate=(t,e)=>{null==e||e.block.update(null),null==t||t.block.update(this)},this.id=n,this.options=t({name:"",output:[],next:!0,previous:!0},e),this.fields=new zs,this.next=new Ls(null),this.next.sub(this.nextUpdate),this.previous=new Ls(null),this.previous.sub(this.previousUpdate),this.parent=new Ls(null),this.parent.sub(this.parentUpdate)}get workspace(){return this.$w}get isRoot(){return!this.previous.value&&!this.parent.value}get hasOutput(){const t=this.options.output;return!!t&&t.length>0}getField(t){return this.fields.find((e=>e.id===t||e.name===t))||null}setWorkspace(t){this.$w=t}getFieldsByRow(t=0){const e=this.fields.filter((e=>e.rowIdx===t));return e.sort(((t,e)=>t.colIdx-e.colIdx)),e}pushField(t,e){this.getField(t.name)&&Is(Ns.name,`The same name [${t.name}] field on block ${this}`);const n=this.getFieldsByRow(e).length;void 0!==e&&(t.rowIdx=e),t.colIdx=n,t.$b=this,this.fields.pushDistinct(t)}connectToField(t){t?t.checkConnection(this)&&this.parent.update(t):this.parent.update(null)}clone(){const t=new Ns(this.options);for(const e of this.fields)t.pushField(e.clone(),e.rowIdx);return t}destroy(){this.previous.update(null),this.next.update(null),this.parent.update(null)}toString(){return`${this.id}[${this.options.name}]`}}class Ds{get blocks(){return this._blocksMap}constructor(){this._blocksMap=new Map}add(t){const e=t.options.name=t.id;this._blocksMap.set(e,t)}remove(t){const e="string"==typeof t?t:t.options.name,n=this._blocksMap.get(e);return n&&this._blocksMap.delete(e),n||null}get(t){return this._blocksMap.get(t)||null}clear(){this.destroy(),this._blocksMap.clear()}destroy(){for(const[,t]of this._blocksMap)t.destroy()}}class Us{constructor(t=Ms()){this.id=t,this.definedBlocks=new Ds,this.blockDB=new Map,this.blockRoots=new Map}isRootBlock(t){const e=Es(t);return this.blockRoots.get(e)||!1}addRootBlock(t){this.isRootBlock(t)||this.blockRoots.set(t.id,t)}hasBlock(t){const e=Es(t);return this.blockDB.get(e)||!1}addBlock(t){this.hasBlock(t)||(this.blockDB.set(t.id,t),t.setWorkspace(this)),t.isRoot&&this.addRootBlock(t),t.next.value&&this.addBlock(t.next.value)}removeBlock(t){const e=this.hasBlock(t);return e?(e.isRoot&&this.blockRoots.delete(e.id),this.blockDB.delete(e.id),e.setWorkspace(null),e.next.value&&this.removeBlock(e.next.value),e.destroy(),e):null}connectBlock(t,e){t.isRoot&&this.blockRoots.delete(t.id),t.previous.update(e)}}class Ws{constructor(t,e,n="no-type",s={}){this.blockUpdate=(t,e)=>{null==e||e.parent.update(null),null==t||t.parent.update(this)},this.name=t,this.type=n,this.hollow=s.hollow||!1,this.id=s.id||Ms(),this.$b=null,this.acceptInput=s.acceptInput||[],this._value=e,this.colIdx=s.colIdx||0,this.rowIdx=s.rowIdx||0,this.block=new Ls(null),this.block.sub(this.blockUpdate)}get hasInput(){return this.acceptInput.length>0}get isBlock(){return!!this.block.value}getOptions(){return{acceptInput:this.acceptInput,colIdx:this.colIdx,rowIdx:this.rowIdx}}checkConnection(t){return this.hasInput&&function(t,e){for(const n of t)if(e.indexOf(n)>=0)return!0;return!1}(this.acceptInput,t.options.output)}value(t){return void 0===t||(this._value=t),this._value}clone(){return new Ws(this.name,this.value(),this.type,this.getOptions())}}(Os=Rs||(Rs={})).text="TEXT",Os.blockSlot="BLOCK_SLOT",Os.input="INPUT",Os.dropdown="DROPDOWN";class Vs extends Ws{get selected(){let t=this.options.find((t=>t.key===this._value));return t=t||this.options[0]||{key:"",value:""},t}constructor(t,e="",n={}){super(t,e,Rs.dropdown,n),this._parseOptions(n.options||[])}_parseOptions(t){var e,n;this.options=[];let s="",i="";for(const o of t)Array.isArray(o)?(s=o[0]||"",i=null!=(e=o[1])?e:s):(s=o.key,i=null!=(n=o.value)?n:o.key),this.options.push({key:s,value:i})}getOptions(){const e=super.getOptions();return t({options:this.options},e)}clone(){const t=new Vs(this.name,this.value(),this.getOptions());if(this.block.value){this.block.value.clone().connectToField(t)}return t}}class Hs extends Ws{constructor(t,e="",n={}){super(t,e,Rs.input,n),this.inputType=n.inputType||"string",this.value(e)}getOptions(){const e=super.getOptions();return t({inputType:this.inputType},e)}value(t){if(void 0===t)return this._value;let e=t;if("number"===this.inputType){const t=parseFloat(e);e=Number.isNaN(t)?"":t.toString()}return this._value=e,this._value}clone(){const t=new Hs(this.name,this.value(),this.getOptions());if(this.block.value){this.block.value.clone().connectToField(t)}return t}}class Gs extends Ws{constructor(t,e=null,n={}){super(t,e,Rs.blockSlot,n),this.blockChanged=(t,e)=>{this._value=t},null==e||e.connectToField(this),this.block.sub(this.blockChanged)}checkConnection(t){return!t.hasOutput}value(){return this._value}clone(){var t;const e=new Gs(this.name,null,this.getOptions()),n=null==(t=this.value())?void 0:t.clone();return null==n||n.connectToField(e),e}}class qs extends Ws{constructor(t,e="",n={}){super(t,e,Rs.text,n)}clone(){return new qs(this.name,this.value()||"",this.getOptions())}}const Ks=new js;Ks.set(Rs.text,qs),Ks.set(Rs.blockSlot,Gs),Ks.set(Rs.dropdown,Vs),Ks.set(Rs.input,Hs);class Xs{get rendered(){return document.body.contains(this.dom)}get parent(){return this._parent}constructor(t){this.dom=t,this.children=new zs}getAttr(t){const e=this.dom.getAttribute(t);if(!e)return e;const n=+e;return Number.isNaN(n)?e:n}setAttr(t,e){null===e?this.dom.removeAttribute(t):this.dom.setAttribute(t,String(e))}on(t,e,n){this.dom.addEventListener(t,e,n)}off(t,e,n){this.dom.removeEventListener(t,e,n)}attr(t,e){if("string"==typeof t){if(void 0===e)return this.getAttr(t);this.setAttr(t,e)}else Object.entries(t).forEach((([t,e])=>{this.setAttr(t,e)}))}append(...t){for(const e of t)this.dom.appendChild(e.dom),this.children.pushDistinct(e),e._parent=this}remove(...t){for(const e of t){this.children.removeItem(e)&&(this.dom.removeChild(e.dom),e._parent=null)}}addClasses(...t){this.dom.classList.add(...t)}removeClasses(...t){this.dom.classList.remove(...t)}destroy(){this.dom.remove(),this.children.forEach((t=>{this.remove(t),t.destroy()})),this._parent=null}}class Js extends Xs{get bbox(){return this.dom.getBBox()}constructor(t){super(t),this.x=0,this.y=0}visible(t){if(void 0===t)return"hidden"!==this.dom.style.visibility;this.dom.style.visibility=t?"":"hidden"}on(t,e,n){this.dom.addEventListener(t,e,n)}off(t,e,n){this.dom.removeEventListener(t,e,n)}move(t,e){this.x=t,this.y=e}dx(t){this.move(this.x+t,this.y)}dy(t){this.move(this.x,this.y+t)}dmove(t,e){this.move(this.x+t,this.y+e)}}function Ys(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Zs(t,e){if("string"==typeof e)t.setAttribute("style",e);else{Object.entries(e).forEach((([e,n])=>{t.style.setProperty(e,n)}))}}const Qs=new As;window.addEventListener("pointerup",(t=>Qs.emit("pointerup",t))),window.addEventListener("pointermove",(t=>Qs.emit("pointermove",t)));class ti{constructor(t){this.setTransform=t,this.modifies=[{type:"scale",params:[]},{type:"translate",params:[]},{type:"rotate",params:[]}]}applyTransform(){const t=this.modifies.filter((t=>t.params.length>0)).map((t=>`${t.type}(${t.params.join(", ")})`)).join(" ");this.setTransform(t)}changeModify(t,e){this.modifies.find((e=>e.type===t)).params=e,this.applyTransform()}move(t,e){this.changeModify("translate",[t,e])}scale(t,e){e?this.changeModify("scale",[t,e]):this.changeModify("scale",[t])}rotate(t){this.changeModify("rotate",[`${t}deg`])}}class ei extends Ls{get width(){return this.value.width}get height(){return this.value.height}constructor(t=0,e=0){super({width:t,height:e})}}class ni extends As{get isDragging(){return this._isDragging}constructor(...t){super(),this.doms=t,this._isDragging=!1,this._pointerdown=this._pointerdown.bind(this),this._pointerup=this._pointerup.bind(this),this._pointermove=this._pointermove.bind(this);for(const e of this.doms)e.addEventListener("pointerdown",this._pointerdown),e.classList.add("s_dragger");Qs.on("pointermove",this._pointermove),Qs.on("pointerup",this._pointerup)}_pointerdown(t){this._isDragging=!0,this.emit("dragstart",t),document.documentElement.classList.add("s_dragger_dragging");for(const e of this.doms)e.classList.add("s_dragger_dragging")}_pointermove(t){this.isDragging&&this.emit("dragging",t.movementX,t.movementY,t)}_pointerup(t){this._isDragging=!1,this.emit("dragend",t),document.documentElement.classList.remove("s_dragger_dragging");for(const e of this.doms)e.classList.remove("s_dragger_dragging")}destroy(){for(const t of this.doms)t.removeEventListener("pointerdown",this._pointerdown);Qs.off("pointerup",this._pointerup),Qs.off("pointermove",this._pointermove)}}const si=document.createElement("div");class ii{constructor(){this.dom=si,this.actived=!1,this._initRootDom()}_initRootDom(){this.dom.classList.add("s_float_weight"),document.body.append(this.dom)}show(){this.actived=!0,this.dom.classList.remove("s_float_weight_hide"),this.dom.classList.add("s_float_weight_show")}hide(){this.actived=!1,this.dom.classList.remove("s_float_weight_show"),this.dom.classList.add("s_float_weight_hide")}toggle(){this.actived?this.hide():this.show()}move(t,e){this.x=t,this.y=e,Zs(this.dom,{left:`${t}px`,top:`${e}px`})}clear(){this.dom.innerHTML=""}replace(...t){this.clear(),this.dom.append(...t)}append(...t){this.dom.append(...t)}destroy(){this.dom.remove()}}class oi extends Js{constructor(){super(Ys("defs"))}}class ri extends Js{constructor(t=600,e=400){super(Ys("svg")),this.size=new ei(t,e),this.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:t,height:e}),this.defs=new oi,this.append(this.defs)}mount(t){t.appendChild(this.dom)}}class li{constructor(t){this.el=t,this.clear()}pushCoords(t){for(let e=0;e<t.length&&!(e+2>t.length);e+=2)this.path.push(`${t[e]},${t[e+1]}`)}d(t,e,n=1){this.path.push(t);for(let s=0;s<e.length&&!(s+n>e.length);s+=n){const t=e.slice(s,s+n);n%2==0?this.pushCoords(t):this.path.push(...t)}return this}clear(){this.path=[]}done(){const t=this.path.join(" ");this.el.updatePath(t)}H(...t){return this.d("H",t)}h(...t){return this.d("h",t)}V(...t){return this.d("V",t)}v(...t){return this.d("v",t)}M(...t){return this.d("M",t,2)}m(...t){return this.d("m",t,2)}L(...t){return this.d("L",t,2)}l(...t){return this.d("l",t,2)}T(...t){return this.d("T",t,2)}t(...t){return this.d("t",t,2)}S(...t){return this.d("S",t,4)}s(...t){return this.d("s",t,4)}Q(...t){return this.d("Q",t,4)}q(...t){return this.d("q",t,4)}C(...t){return this.d("C",t,6)}c(...t){return this.d("c",t,6)}A(t,e,n,s,i,o,r){return this.path.push("A",t,e,n,s,i,`${o},${r}`),this}a(t,e,n,s,i,o,r){return this.path.push("a",t,e,n,s,i,`${o},${r}`),this}Z(){this.d("Z",[]),this.done()}z(){this.d("z",[]),this.done()}}class ci extends Js{constructor(){super(Ys("path")),this.d=new li(this),this.addClasses("s_path")}updatePath(t){this.attr("d",t)}}class ai extends Js{constructor(){super(Ys("g")),this.trans=new ti((t=>{this.attr("transform",t)}))}move(t,e){super.move(t,e),this.trans.move(t,e)}}class hi extends Js{constructor(t=""){super(Ys("text")),this.text(t),this.addClasses("s_text")}move(t,e){super.move(t,e),e+=this.bbox.height,e-=3,this.attr({x:t,y:e})}text(t){if(void 0===t)return this.dom.textContent||"";this.dom.textContent=t}}class di extends Js{get width(){return this._size.width}get height(){return this._size.height}constructor(t,e,n=0,s){super(Ys("rect")),this._size={width:t,height:e},s=s||n,this.attr({width:t,height:e,rx:n,ry:s})}setSize(t,e){this._size.width=t,this._size.height=e,this.attr({width:t,height:e})}move(t,e){super.move(t,e),this.attr({x:t,y:e})}}class ui extends ai{constructor(t,e=100,n=!1,s=2){super(),this._disabledChanged=t=>{this.attr("disabled",!!t||null)},this.ratio=t,this._view={thickness:s,length:e},this.isVertical=n,this.disabled=new Ls(!1),this.currentPercentage=0,this.events=new As,this._initSVG(),this.addClasses("s_scroll"),this.disabled.sub(this._disabledChanged),this.dragger=new ni(this.scrollBar.dom),this._initDragger()}get scrollLength(){return this.length*(1-this.ratio)}get length(){return this._view.length}get thickness(){return this._view.thickness}_initDragger(){this.dragger.on("dragging",((t,e)=>{const n=(this.isVertical?e:t)/this.scrollLength;this.scrollTo(this.currentPercentage+n),this.events.emit("scroll",this.currentPercentage)}))}_initSVG(){this.isVertical?(this.background=new di(this.thickness,this.length,this.thickness/2),this.scrollBar=new di(this.thickness,this.length*this.ratio,this.thickness/2)):(this.background=new di(this.length,this.thickness,this.thickness/2),this.scrollBar=new di(this.length*this.ratio,this.thickness,this.thickness/2)),this.background.addClasses("s_scroll_background"),this.scrollBar.addClasses("s_scroll_bar"),this.append(this.background),this.append(this.scrollBar),this.scrollTo(this.currentPercentage)}_updateCurrent(){const t=this.scrollLength*this.currentPercentage;this.isVertical?this.scrollBar.move(0,t):this.scrollBar.move(t,0)}resize(){this.isVertical?(this.background.attr({width:this.thickness,height:this.length}),this.scrollBar.attr({width:this.thickness,height:this.length*this.ratio})):(this.background.attr({width:this.length,height:this.thickness}),this.scrollBar.attr({width:this.length*this.ratio,height:this.thickness}))}setRatio(t){this.ratio=t,this.resize()}setViewport(t,e){this._view.length=t,this._view.thickness=null!=e?e:this.thickness,this.resize()}scrollTo(t){this.disabled.value||(this.currentPercentage=t<0?0:t>=1?1:t,this._updateCurrent())}destroy(){super.destroy(),this.dragger.destroy()}}class pi extends ai{constructor(t,e,n,s,i=2){super(),this._positionChanged=function(t,e,n={}){let s=!1,i=0;const o=Object.assign({leading:!0,trailing:!1},n);let r;return function(...n){const l=(new Date).getTime();if(s||(s=!0,i=l,!o.leading)){if(clearTimeout(r),l-i>=e)return i=l,void t.apply(this,n);o.trailing&&(r=window.setTimeout((()=>t.apply(this,n)),e))}else t.apply(this,n)}}(this._positionChanged,1e3/60,{trailing:!0}),this.events=new As,this.thickness=i,this.size=new ei(n,s),this.currentPercentage={x:0,y:0},this._initSVG(e,s,t,n),this.setRatio(t,e),this.setSize(n,s),this.addClasses("s_scrolls")}_initSVG(t,e,n,s){this.vertical=new ui(t,e-this.thickness,!0,this.thickness),this.vertical.addClasses("s_scrolls_vertical"),this.vertical.events.on("scroll",(t=>this._positionChanged("y",t))),this.horizontal=new ui(n,s-this.thickness,!1,this.thickness),this.horizontal.addClasses("s_scrolls_horizontal"),this.horizontal.events.on("scroll",(t=>this._positionChanged("x",t))),this.setVisible()}_positionChanged(t,e){this.currentPercentage[t]=e,this.events.emit("scroll",this.currentPercentage)}scrollTo(t,e){this.horizontal.scrollTo(t),this.vertical.scrollTo(e),this.currentPercentage.x=t,this.currentPercentage.y=e}setVisible(t=!0,e=!0){const n=(t,e=!0)=>{e?t.parent!==this&&this.append(t):this.remove(t),t.disabled.update(!e)};n(this.horizontal,t),n(this.vertical,e)}setDisabled(t=!1,e=!1){this.horizontal.disabled.update(t),this.vertical.disabled.update(e)}setSize(t,e){this.size.update({width:t,height:e}),this.horizontal.setViewport(t-this.thickness),this.horizontal.move(0,e-this.thickness),this.vertical.setViewport(e-this.thickness),this.vertical.move(t-this.thickness,0)}setRatio(t,e){this.horizontal.setRatio(t),this.vertical.setRatio(e)}destroy(){super.destroy()}}class fi extends ai{get bbox(){const t=this.dom.getBBox();if(this.width>t.width+this.width/2){const e=this.width-t.width;t.x-=e/2-t.width/2,t.width=e}if(this.height>t.height+this.height/2){const e=this.height-t.height;t.y-=e/2-t.height/2,t.height=e}return t}get totalWidth(){return this.bbox.width+this.width}get totalHeight(){return this.bbox.height+this.height}get moveRange(){const t=this.bbox,e=t.x-this.width/2,n=t.y-this.height/2;return{width:t.width,height:t.height,left:-(e+t.width),top:-(n+t.height),right:-e,bottom:-n}}get currentPercentage(){const t=this.moveRange;let e=(this.x-t.left)/t.width,n=(this.y-t.top)/t.height;return e<0&&(e=0),e>1&&(e=1),n<0&&(n=0),n>1&&(n=1),{x:+(1-e).toFixed(8),y:+(1-n).toFixed(8)}}constructor(t,e){super(),this.events=new As,this.setSize(t,e)}setSize(t,e){this.width=t,this.height=e;const{x:n,y:s}=this.currentPercentage;this.moveTo(n,s)}moveTo(t,e){const n=this.moveRange,s=n.left+(1-t)*n.width,i=n.top+(1-e)*n.height;this.move(s,i)}move(t,e){const n=this.moveRange;t<n.left&&(t=n.left),t>n.right&&(t=n.right),e<n.top&&(e=n.top),e>n.bottom&&(e=n.bottom),super.move(t,e)}}class gi extends ai{constructor(t,e){super(),this.resize=function(t,e,n={}){let s,i=!1,o=0;const r=Object.assign({leading:!1,trailing:!0,maxWait:e},n);return function(...n){const l=(new Date).getTime();if(i||(o=l,i=!0,!r.leading)){if(clearTimeout(s),l-o>=e)return t.apply(this,n),void(o=l);o=l,r.trailing&&(s=window.setTimeout((()=>t.apply(this,n)),r.maxWait))}else t.apply(this,n)}}(this.resize,100),this.addClasses("s_area"),this.size=new ei(t,e),this.events=new As,this._initSVG(t,e),this._initDragger(),this.resize()}_initSVG(t,e){this.background=new di(t,e),this.background.addClasses("s_area_background"),this.content=new fi(t,e),this.content.addClasses("s_area_content"),this.scrolls=new pi(1,1,t,e,5),this.scrolls.events.on("scroll",this._scrollCurrentChanged.bind(this)),this.append(this.background),this.append(this.content),this.append(this.scrolls)}_scrollCurrentChanged(t){const e=this.content.moveRange,n=this.content.currentPercentage,s=(t.x-n.x)*e.width,i=(t.y-n.y)*e.height;this.content.moveTo(t.x,t.y),this.events.emit("move",s,i)}_initDragger(){this.dragger=new ni(this.background.dom),this.dragger.on("dragging",((t,e)=>{const n=this.content.currentPercentage.x,s=this.content.currentPercentage.y;this.content.dmove(t,e);const{x:i,y:o}=this.content.currentPercentage;this.scrolls.scrollTo(i,o);const r=this.content.moveRange,l=(i-n)*r.width,c=(o-s)*r.height;this.events.emit("move",l,c)}))}displayAtTop(t){this.content.append(t)}scrollTo(t,e){this.content.moveTo(t,e),this.scrolls.scrollTo(t,e)}resize(){const{width:t,height:e}=this.size;this.background.setSize(t,e),this.content.setSize(t,e),this.scrolls.setSize(t,e),this.scrolls.setRatio(t/this.content.totalWidth,e/this.content.totalHeight),this.scrolls.scrollTo(this.content.currentPercentage.x,this.content.currentPercentage.y)}setSize(t,e){this.size.update({width:t,height:e}),this.resize()}appendContent(...t){for(const e of t)e.dmove(-this.content.x,-this.content.y),this.content.append(e);this.resize()}removeContent(...t){this.content.remove(...t),this.resize()}destroy(){super.destroy(),this.dragger.destroy()}}class vi extends Xs{constructor(t,e,n=Ms()){super(Ys("pattern")),this.id=n,this.x=0,this.y=0,this.addClasses("s_pattern"),this.attr({id:n,width:t,height:e,patternUnits:"userSpaceOnUse"}),this.rect=new di(t,e),this.rect.addClasses("s_pattern_grid"),this.append(this.rect),this.trans=new ti((t=>{this.attr("patternTransform",t)}))}scale(t){this.trans.scale(t)}move(t,e){this.x=t,this.y=e,this.attr({x:t,y:e})}dmove(t,e){this.move(this.x+t,this.y+e)}}class mi extends Xs{constructor(t=Ms()){super(Ys("filter")),this.id=t,this.attr("id",this.id),this.dom.innerHTML='\n  <feGaussianBlur in="SourceAlpha" stdDeviation="3"/> \n  <feOffset dx="2" dy="2" result="offsetblur"/> \n  <feComponentTransfer>\n    <feFuncA type="linear" slope="0.5"/> \n  </feComponentTransfer>\n  <feMerge> \n    <feMergeNode/> \n    <feMergeNode in="SourceGraphic"/> \n  </feMerge>\n    '}}class _i extends Js{constructor(t=""){super(Ys("image")),this.attr("href",t),this.addClasses("s_image")}move(t,e){super.move(t,e),this.attr({x:t,y:e})}href(t){return this.attr("href",t||null)}}var bi,yi;(yi=bi||(bi={})).blockPrevious="block-previous",yi.blockNext="block-next",yi.blockOutput="block-output",yi.slotField="field";class xi{get isConnected(){return!!this.targetConnection}constructor(t,e){this.acceptTypes=[],this.isActive=!1,this.targetConnection=null,this.oldTargetConnection=null,this.connectAction=e.connectAction,this.dx=e.dx||0,this.dy=e.dy||0,this.sourceBlock=t,this.type=e.type,this.acceptTypes=e.acceptTypes||[]}setActive(t){this.isActive=t,this.isActive?this.sourceBlock.addClasses("s_conn_active"):this.sourceBlock.removeClasses("s_conn_active")}checkDestConn(t){const e=!!this.acceptTypes.find((e=>e===t.type)),n=t.isConnected;return e&&!n}connectTo(t,e=!1){var n,s;this.targetConnection!==t&&(this.oldTargetConnection=this.targetConnection,this.targetConnection=t,this.connectAction(e,this.targetConnection,this.oldTargetConnection),t?null==(s=this.targetConnection)||s.connectTo(this,!0):null==(n=this.oldTargetConnection)||n.connectTo(null))}}class wi extends ai{constructor(e,n,s={}){super(),this._outputConnAction=(t,e)=>{},this._nextConnAction=(t,e)=>{var n;if(this.$b.next.update((null==e?void 0:e.sourceBlock.$b)||null),t||!e)return;const s=e.sourceBlock.getWorldPosition(),i=this.getWorldPosition();i.x+=this.nextConnection.dx,i.y+=this.nextConnection.dy;const o={x:s.x-i.x,y:s.y-i.y};this.getTopBlock().dmove(o.x,o.y),this.append(e.sourceBlock),e.sourceBlock.move(this.nextConnection.dx,this.nextConnection.dy),null==(n=this.inSlotField())||n.updateShape()},this._previousConnAction=(t,e)=>{var n,s;this.$b.previous.update((null==e?void 0:e.sourceBlock.$b)||null),!t&&e?(e.sourceBlock.append(this),this.move(e.dx,e.dy),null==(s=this.inSlotField())||s.updateShape()):null==(n=this.inSlotFieldBefore())||n.updateShape()},this.events=new As,this.addClasses("s_block"),this._isFirstTimeToRender=!0,this.options=t({x:0,y:0,draggable:!0,type:""},s),this.$r=n,this.$b=e,this.fields=[],this.move(this.options.x,this.options.y),this._initBackground(),this._initFieldSVG(),this._initDragger(),this._initConnections(),this.updateShape()}get nextBlock(){var t,e;return null==(e=null==(t=this.nextConnection)?void 0:t.targetConnection)?void 0:e.sourceBlock}get previousBlock(){var t,e;return null==(e=null==(t=this.previousConnection)?void 0:t.targetConnection)?void 0:e.sourceBlock}_initConnections(){this.$b.options.previous&&(this.previousConnection=this.$r.connectionManager.createConnection(this,{type:bi.blockPrevious,acceptTypes:[bi.blockNext,bi.slotField],connectAction:this._previousConnAction})),this.$b.options.next&&(this.nextConnection=this.$r.connectionManager.createConnection(this,{type:bi.blockNext,acceptTypes:[bi.blockPrevious],connectAction:this._nextConnAction})),this.$b.options.output.length&&(this.outputConnection=this.$r.connectionManager.createConnection(this,{type:bi.blockOutput,acceptTypes:[],connectAction:this._outputConnAction}))}_initBackground(){this.background=new ci,this.background.addClasses("s_block_background"),this.append(this.background)}_initDragger(){if(!this.options.draggable)return;const t=this.fields.flat().filter((t=>t.$f.type===Rs.text)).map((t=>t.svg.dom));this.dragger=new ni(this.background.dom,...t),this.dragger.on("dragging",((t,e)=>{this.dmove(t,e)})),this.dragger.on("dragstart",(()=>{const t=this.$r.effects.dragging.id;Zs(this.dom,{filter:`url(#${t})`}),this.addClasses("s_block_dragging")})),this.dragger.on("dragend",(()=>{Zs(this.dom,{filter:""}),this.removeClasses("s_block_dragging")}))}_initFieldSVG(){for(const t of this.$b.fields){const e=this.$r.fieldFactory.get(t.type);if(e){const n=new e(this,t);this._addField(n,t.rowIdx),this.append(n.svg)}}}_addField(t,e=0){this.fields[e]=this.fields[e]||new zs,this.fields[e].pushDistinct(t)}_updateFieldsInline(t,e){const n=this.$r.rendererOptions.block;let s=0;const i=t.reduce(((t,e)=>t+e.svg.bbox.width),0)+n.fieldGap*(t.length-1),o=Math.max(...t.map((t=>t.svg.bbox.height)));for(let r=0;r<t.length;r++){const i=t[r],l=t[r-1];s=0===r?n.horizontalPadding:n.fieldGap;const c=e+(o-i.svg.bbox.height)/2;l&&(s+=l.svg.x+l.svg.bbox.width),i.svg.move(s,c)}return{width:i,height:o}}_updateSlotField(t,e){var n;const s=this.$r.rendererOptions.block,i=null==(n=t.connection.targetConnection)?void 0:n.sourceBlock;t.svg.move(s.slotWidth,e),t.updateConnPosition(s.slotWidth,e);const o={width:0,height:s.emptyHeight};return i?(o.height=i.getContentHeightWithAllNextBlocks(),o):o}_updateJoinStartShape(){const t=this.$r.rendererOptions.block;this.background.d.h(t.joinStartWidth),this.$b.options.previous?this.background.d.v(-t.joinHeight).h(t.joinWidth).v(t.joinHeight):this.background.d.h(t.joinWidth)}_updateMultiRowFields(t,e,n=!1){const s=this.$r.rendererOptions.block;let i={width:0,height:0};if(n)i=this._updateSlotField(t[0][0],e);else{const n={width:0,height:0};let o=e+s.verticalPadding;for(const e of t){const t=this._updateFieldsInline(e,o);n.width=Math.max(n.width,t.width),n.height+=t.height,o+=t.height}i.width=n.width,i.height=n.height+2*s.verticalPadding}return i}_firstTimeToUpdateShape(){if(this._isFirstTimeToRender){this._isFirstTimeToRender=!0;for(const t of this.fields)for(const e of t)e.initShape()}}getWorldPosition(){let t=this,e={x:t.x,y:t.y};for(;null==t?void 0:t.previousBlock;)t=t.previousBlock||null,t&&(e.x+=t.x,e.y+=t.y);return e}inSlotFieldBefore(){var t,e;let n=null==(t=this.previousConnection)?void 0:t.oldTargetConnection;for(;n;){if(n.type===bi.slotField){const t=n.sourceBlock;return t===this?null:t}n=null==(e=n.sourceBlock.previousConnection)?void 0:e.targetConnection}return null}inSlotField(){var t;let e=this;for(;null==(t=e.previousConnection)?void 0:t.targetConnection;){if(e.previousConnection.targetConnection.type===bi.slotField){const t=e.previousConnection.targetConnection.sourceBlock;return t===this?null:t}e=e.previousConnection.targetConnection.sourceBlock}return null}getContentHeightWithAllNextBlocks(){const t=this.$r.rendererOptions.block.joinHeight;return this.bbox.height-(this.$b.options.previous?t:0)}getFieldRowCount(){return this.fields.length}getFieldsByRow(t=0){const e=this.fields[t]||[];return e.sort(((t,e)=>t.$f.colIdx-e.$f.colIdx)),e}isRootBlock(){var t,e;return!(null==(e=null==(t=this.previousConnection)?void 0:t.targetConnection)?void 0:e.sourceBlock)}getTopBlock(){let t=this;for(;t.previousBlock;)t=t.previousBlock;return t}getTrialBlock(){let t=this;for(;t.nextBlock;)t=t.nextBlock;return t}updateOutputShape(){this.background.d.clear(),this.background.d.M(0,0).done()}updateShape(){var t;if(!this.rendered)return;if(this._firstTimeToUpdateShape(),this.$b.hasOutput)return void this.updateOutputShape();this.background.d.clear(),this.background.d.M(0,0),this._updateJoinStartShape();const e=t=>!!t.length&&t[0].$f.type===Rs.blockSlot,n=(t,n)=>{const s=[t],i=e(t);let o=this.fields[n+1];for(;o;){const t=i&&e(o),r=!i&&!e(o);if(!t&&!r)break;s.push(o),n+=1,o=this.fields[n+1]}return s},s=this.$r.rendererOptions.block,i=s.joinHeight,o=s.joinWidth,r=s.joinStartWidth,l=s.slotWidth,c=s.horizontalPadding,a=s.emptyHeight,h=this.getFieldRowCount(),d=[],u=[];let p=0;for(let f=0;f<h;f++){const t=this.fields[f],s=0===f,a=e(t),h=n(t,f);f+=h.length-1;const g=this._updateMultiRowFields(h,p,a);if(p+=g.height,d.push(g),u.push(a),a){const t=d[d.length-2].width+2*c;this.background.d.h(-(t-l-r-o)).v(-i).h(-o).v(i).h(-r).v(g.height)}else{const t=g.width+2*c-(s?r+o:l),e=g.height;this.background.d.h(t).v(e)}}if(!0===u[u.length-1]){const t=40;this.background.d.h(t).v(a).h(-(t+l-o-r))}else{const t=d[d.length-1].width+2*c;this.background.d.h(-(t-r-o))}this.$b.options.next?this.background.d.v(-i).h(-o).v(i):this.background.d.h(-o),this.background.d.h(-r).z(),this.updateConnectionPosition(),null==(t=this.inSlotField())||t.updateShape()}updateConnectionPosition(){var t;const e=this.$r.rendererOptions.block;if(this.previousConnection&&(this.previousConnection.dx=0,this.previousConnection.dy=0),this.nextConnection){this.nextConnection.dx=0;const n=this.background.bbox.height-(this.$b.options.previous?e.joinHeight:0);n!==this.nextConnection.dy&&(this.nextConnection.dy=n,null==(t=this.nextConnection.targetConnection)||t.sourceBlock._previousConnAction(!1,this.nextConnection,null))}this.outputConnection&&(this.outputConnection.dx=0,this.outputConnection.dy=0)}destroy(){this.events.emit("beforeDestroy"),this.dragger.destroy(),super.destroy()}}class ki extends gi{constructor(t,e,n,s){super(n,s),this.currentSelectedBlock=null,this.$r=e,this.$w=t,this.blocks=new zs,this._initGrid()}_initGrid(){const t=this.$r.effects.grid;Zs(this.background.dom,{fill:`url(#${t.id})`}),this.events.on("move",((e,n)=>{t.dmove(-e,-n)}))}addBlock(t,e=0,n=0){const s=this.$w.definedBlocks.get(t);if(!s)return void Is(ki.name,"Not found block definition: ",t);const i=s.clone(),o=new wi(i,this.$r,{x:e,y:n,type:t});return this.$w.addBlock(i),this.blocks.pushDistinct(o),this.appendContent(o),o.updateShape(),o.dragger.on("dragstart",(()=>{var t,e;null==(t=this.currentSelectedBlock)||t.removeClasses("s_block_selected"),this.currentSelectedBlock=o,null==(e=this.currentSelectedBlock)||e.addClasses("s_block_selected"),this.displayAtTop(o),this.events.emit("select-block",o)})),o.dragger.on("dragging",(()=>{this.events.emit("block-move",o)})),o.dragger.on("dragend",(()=>{this.resize()})),o}removeBlock(t){const e="string"==typeof t?this.blocks.remove((e=>e.$b.id===t)):this.blocks.removeItem(t);e&&(this.removeContent(e),e.destroy())}displayAtTop(t){const e=t.getWorldPosition();t.move(e.x,e.y),super.displayAtTop(t)}}class Ci{constructor(t,e,n){this.$f=e,this.svg=n,this.$b=t,this.svg.addClasses("s_field")}initShape(){}release(){this.svg.removeClasses("s_field_focus"),this.$b.$r.currentActiveField=void 0}focus(){this.svg.addClasses("s_field_focus"),this.$b.$r.currentActiveField=this}}class Bi extends Ci{constructor(t,e){super(t,e,new ai),this.focus=()=>{super.focus();const t=this.$b.$r.floatWeight,e=this._buildSelector();t.replace(e),e.onclick=e=>{const n=e.target.getAttribute("key");this.$f.value(n),this.text.text(this.$f.selected.value),t.hide(),super.release(),this.updateShape()},t.toggle()},this.iconConfig={padding:5,size:26},this.svg.addClasses("s_field_dropdown"),this._initBackground(),this._initBackgroundText(),this._initBackgroundDropdownIcon()}_initBackgroundDropdownIcon(){this.icon=new _i(this.$b.$r.assets.get("./icons/caret-down.svg")),this.icon.addClasses("s_field_dropdown_icon");const t=this.iconConfig.size;this.icon.attr({width:t,height:t}),this.svg.append(this.icon),this.icon.on("click",this.focus)}_initBackgroundText(){this.text=new hi(this.$f.selected.value),this.text.addClasses("s_field_dropdown_text"),this.svg.append(this.text),this.text.on("click",this.focus)}_initBackground(){this.background=new ci,this.background.addClasses("s_field_dropdown_background"),this.svg.append(this.background),this.background.on("click",this.focus)}_updateBackgroundShape(){this.background.d.clear();const t=this.text.bbox;t.width+=this.iconConfig.padding+this.iconConfig.size,this.background.d.M(0,0).h(t.width+10).v(t.height+10).h(-(t.width+10)).v(-(t.height+10)).z(),this.text.move(5,5)}_buildSelector(){const t=this.svg.dom.getBoundingClientRect(),e=document.createElement("div");e.classList.add("s_field_dropdown_select");for(const s of this.$f.options){const t=document.createElement("div");t.classList.add("s_field_dropdown_select_option"),t.setAttribute("key",s.key),t.setAttribute("value",s.value),t.innerText=s.value,e.append(t)}const n=this.svg.bbox.height;return Zs(e,{position:"fixed",left:`${t.left}px`,top:`${t.top+n}px`,width:`${t.width}px`}),e}initShape(){this._updateBackgroundShape();const t=this.text.x+this.text.bbox.width;this.icon.move(t+this.iconConfig.padding,0)}updateShape(){this._updateBackgroundShape(),this.$b.updateShape()}}class $i extends Ci{constructor(t,e){super(t,e,new ai),this.focus=()=>{super.focus();const t=this.$b.$r.floatWeight,e=this._buildInput();e.addEventListener("keydown",(e=>{"Enter"===e.key&&t.hide()})),t.replace(e),t.toggle(),e.focus()},this.svg.addClasses("s_field_input"),this._initBackground(),this._initBackgroundText()}_initBackgroundText(){this.text=new hi(this.$f.value()),this.text.addClasses("s_field_input_text"),this.svg.append(this.text),this.text.on("click",this.focus)}_initBackground(){this.background=new ci,this.background.addClasses("s_field_input_background"),this.svg.append(this.background),this.background.on("click",this.focus)}_buildInput(){const t=document.createElement("input"),e=this.svg.dom.getBoundingClientRect();return Zs(t,{position:"fixed",outline:"none",border:"none",left:`${e.left}px`,top:`${e.top}px`,width:`${e.width}px`,height:`${e.height}px`}),t.addEventListener("input",(e=>{const n=t.value;this.text.text(n),this.$f.value(n),this.updateShape();const s=this.svg.dom.getBoundingClientRect();Zs(t,{left:`${s.left}px`,top:`${s.top}px`,width:`${s.width}px`,height:`${s.height}px`})})),t.value=this.$f.value(),t}_updateBackgroundShape(){this.background.d.clear();const t=this.text.bbox;this.background.d.M(0,0).h(t.width+10).v(t.height+10).h(-(t.width+10)).v(-(t.height+10)).z(),this.text.move(5,5)}initShape(){this._updateBackgroundShape()}updateShape(){this._updateBackgroundShape(),this.$b.updateShape()}}class Si extends Ci{constructor(t,e){super(t,e,new ai),this._connAction=(t,e)=>{var n;if(this.$f.block.update((null==(n=null==e?void 0:e.targetConnection)?void 0:n.sourceBlock.$b)||null),this.$b.updateShape(),!e||t)return;const s=e.sourceBlock.getWorldPosition(),i=this.$b.getWorldPosition();i.x+=this.connection.dx,i.y+=this.connection.dy;const o={x:s.x-i.x,y:s.y-i.y};this.$b.getTopBlock().dmove(o.x,o.y),this.$b.append(e.sourceBlock),e.sourceBlock.move(this.connection.dx,this.connection.dy)},this.svg.addClasses("s_field_slot"),this.connection=this.$b.$r.connectionManager.createConnection(this.$b,{dx:0,dy:0,type:bi.slotField,acceptTypes:[bi.blockPrevious],connectAction:this._connAction})}_updateConnectedBlockPosition(){var t;const e=null==(t=this.connection.targetConnection)?void 0:t.sourceBlock;e&&!e.isRootBlock()&&e.move(this.connection.dx,this.connection.dy)}updateConnPosition(t,e){this.svg.move(t,e),this.connection.dx=t,this.connection.dy=e,this._updateConnectedBlockPosition()}}class Fi extends Ci{constructor(t,e){super(t,e,new hi),this.svg.addClasses("s_field_text"),this.svg.text(this.$f.value()||"")}}class Ti{constructor(t,e=10){this.$r=t,this.connections=new Set,this.maxRange=e}createConnection(t,e){let n=new xi(t,e);return this.connections.add(n),t.events.on("beforeDestroy",(()=>{this.connections.delete(n)})),n}getNearestConn(t){if(t.isConnected)return null;let e=null,n=1/0;for(const o of this.connections){if(t.sourceBlock===o.sourceBlock||!t.checkDestConn(o))continue;const r=o.sourceBlock.getWorldPosition(),l=t.sourceBlock.getWorldPosition(),c=(s={x:o.dx+r.x,y:o.dy+r.y},i={x:t.dx+l.x,y:t.dy+l.y},Math.sqrt((s.x-i.x)**2+(s.y-i.y)**2));c<this.maxRange&&c<n&&(n=c,e=o)}var s,i;return e}getNearestConnPair(...t){let e=null;for(const n of t){if(!n)continue;const t=this.getNearestConn(n);t&&(e={from:n,to:t})}return e}}class Pi{constructor(t="."){this.root=t}get(t){return this.root+"/"+t}}class Ri{constructor(t,e=600,n=400,s){this._blockMoving=t=>{var e,n,s,i;null==(e=this.currentActiveField)||e.release(),this.floatWeight.actived&&this.floatWeight.hide(),t.previousConnection&&t.previousConnection.connectTo(null),null==(s=null==(n=this.currentActiveConnPair)?void 0:n.to)||s.setActive(!1);const o=t=>{const e=[];if(e.push(...(t=>{const e=[],n=t.fields.flat().filter((t=>t.$f.type===Rs.blockSlot));for(const s of n)if(s.connection.targetConnection){const t=s.connection.targetConnection.sourceBlock;e.push(...o(t))}else e.push(s.connection);return e})(t)),t.nextConnection)if(t.nextBlock){const n=o(t.nextBlock);e.push(...n)}else e.push(t.nextConnection);return e};this.currentActiveConnPair=this.connectionManager.getNearestConnPair(t.previousConnection,t.outputConnection,t.getTrialBlock().nextConnection,...o(t)),null==(i=this.currentActiveConnPair)||i.to.setActive(!0)},this.effects={},this.fieldFactory=new js,this.currentActiveConnPair=null,this.connectionManager=new Ti(this),this.floatWeight=new ii,this._initRendererOptions(s),this.assets=new Pi(this.rendererOptions.assetsRoot),this._registerAllFields(),this._initWorkspaceSVG(t,e,n)}_initRendererOptions(t){this.rendererOptions=Object.assign({},{block:{joinHeight:4,joinWidth:10,joinStartWidth:10,slotWidth:5,emptyHeight:20,fieldGap:5,horizontalPadding:8,verticalPadding:6},assetsRoot:"."},t)}_initWorkspaceSVG(t,e,n){this.svg=new ri(e,n),this._initEffects(),this.$w=new ki(t,this,e,n),this.svg.append(this.$w),this.$w.events.on("select-block",this._blockMoving),this.$w.events.on("block-move",this._blockMoving),this.$w.dragger.on("dragstart",(()=>{var t;null==(t=this.currentActiveField)||t.release(),this.floatWeight.hide()})),this.$w.dragger.on("dragend",(()=>{var t,e;null==(t=this.currentActiveConnPair)||t.from.connectTo(this.currentActiveConnPair.to),null==(e=this.currentActiveConnPair)||e.to.setActive(!1)}))}_initEffects(){const t=new mi;this.svg.defs.append(t);const e=new vi(40,40);this.svg.defs.append(e),this.registerEffect("dragging",t),this.registerEffect("grid",e)}_registerAllFields(){this.fieldFactory.set(Rs.text,Fi),this.fieldFactory.set(Rs.blockSlot,Si),this.fieldFactory.set(Rs.input,$i),this.fieldFactory.set(Rs.dropdown,Bi)}mount(t){this.dom=t,this.svg.mount(t)}registerEffect(t,e){this.effects[t]=e,this.svg.defs.dom.append(e.dom)}}var Oi=(t,e="BlockProgram")=>vn({name:e,setup(){const e=jt({id:Ms()});return He((()=>{const n=document.getElementById(e.id);t(n)})),()=>zn("div",{id:e.id},null)}}),Ai=Oi((t=>{const e=new ri(600,400);e.mount(t);const n=new gi(600,400);e.append(n);const s=new di(20,20);s.move(10,10),n.appendContent(s);const i=new vi(40,40);e.defs.append(i),n.background.dom.style.fill=`url(#${i.id})`,n.events.on("move",((t,e)=>{i.dmove(-t,-e)}));for(let o=0;o<100;o++){const t=new di(20,20);t.move(4e3*Math.random()-2e3,4e3*Math.random()-2e3),n.appendContent(t)}e.on("dblclick",(t=>{const e=new di(20,20);e.move(t.offsetX,t.offsetY),n.appendContent(e)}))})),Mi=Oi((t=>{const e=new Us,n=new Ns(null,"p-n"),s=new qs("arg","hello");n.pushField(s),e.definedBlocks.add(o({},"p-n")),e.definedBlocks.add(o({previous:!1},"n")),e.definedBlocks.add(o({next:!1},"p")),e.definedBlocks.add(o({next:!1,previous:!1},"none"));const i=new Ri(e,600,400);function o(t={},e){const n=new Ns(t,e),s=new qs("arg","hello"),i=new qs("arg","world"),o=new qs("arg",e);return n.pushField(s),n.pushField(i),n.pushField(o),n}i.mount(t),i.$w.addBlock("n",100,50),i.$w.addBlock("p-n",100,100),i.$w.addBlock("p",100,150),i.$w.addBlock("none",100,200)})),Ei=Oi((t=>{const e=new Us,n=new Ns(null,"p-n"),s=new qs("arg","hello");n.pushField(s),e.definedBlocks.add(o({},"p-n")),e.definedBlocks.add(o({previous:!1},"n")),e.definedBlocks.add(o({next:!1},"p")),e.definedBlocks.add(o({next:!1,previous:!1},"none")),e.definedBlocks.add(r({next:!0,previous:!0},"slot-p-n")),e.definedBlocks.add(r({next:!0,previous:!0},"slot-p-n1")),e.definedBlocks.add(r({next:!0,previous:!0},"slot-p-n2"));const i=new Ri(e,600,400);function o(t={},e){const n=new Ns(t,e),s=new qs("arg","hello"),i=new qs("arg","world"),o=new qs("arg",e);return n.pushField(s),n.pushField(i),n.pushField(o),n}function r(t={},e){const n=new Ns(t,e),s=new Gs("arg1"),i=new qs("arg",e);return n.pushField(i),n.pushField(s,1),n}i.mount(t),i.$w.addBlock("p-n",100,50),i.$w.addBlock("p-n",100,100),i.$w.addBlock("p-n",100,150),i.$w.addBlock("slot-p-n",300,50),i.$w.addBlock("slot-p-n1",300,150),i.$w.addBlock("slot-p-n2",300,250)})),zi=Oi((t=>{const e=new Us,n=new Ri(e,600,400);n.mount(t),e.definedBlocks.add(function(t={},e){const n=new Ns(t,e),s=new qs("text1","hello"),i=new Vs("text2","dropdown",{options:[["1"],["2","21"]]});return n.pushField(s),n.pushField(i),n}({},"dropdown")),n.$w.addBlock("dropdown",100,50)})),Ii=Oi((t=>{const e=new Us,n=new Ri(e,600,400);n.mount(t),e.definedBlocks.add(function(t={},e){const n=new Ns(t,e),s=new qs("text1","hello"),i=new Hs("text2","input");return n.pushField(s),n.pushField(i),n}({},"input")),n.$w.addBlock("input",100,50)})),ji=Oi((t=>{const e=new Us;e.definedBlocks.add(s({},"p-n")),e.definedBlocks.add(s({previous:!1},"n")),e.definedBlocks.add(s({next:!1},"p")),e.definedBlocks.add(s({next:!1,previous:!1},"none")),e.definedBlocks.add(i({next:!0,previous:!0},"slot-p-n")),e.definedBlocks.add(i({next:!0,previous:!0},"slot-p-n1")),e.definedBlocks.add(i({next:!0,previous:!0},"slot-p-n2"));const n=new Ri(e,600,400);function s(t={},e){const n=new Ns(t,e),s=new qs("text1","hello"),i=new qs("text2","world"),o=new qs("arg",e);return n.pushField(s),n.pushField(i),n.pushField(o,1),n}function i(t={},e){const n=new Ns(t,e),s=new Gs("arg1"),i=new qs("arg",e);return n.pushField(i),n.pushField(s,1),n.pushField(i.clone(),2),n.pushField(s.clone(),3),n}n.mount(t),n.$w.addBlock("p-n",100,50),n.$w.addBlock("n",100,150),n.$w.addBlock("p",100,250),n.$w.addBlock("slot-p-n",300,50)})),Li=Oi((t=>{const e=new Us,n=new Ns(null,"testid"),s=new qs("arg","hello");n.pushField(s),e.definedBlocks.add(n);const i=new Ri(e,600,400);i.$w.on("dblclick",(t=>{console.log(t),i.$w.addBlock("testid",t.offsetX,t.offsetY)})),i.mount(t)}));((...t)=>{const e=(Ps||(Ps=yn(Ts))).createApp(...t),{mount:n}=e;return e.mount=t=>{const s=function(t){if(k(t)){return document.querySelector(t)}return t}(t);if(!s)return;const i=e._component;w(i)||i.render||i.template||(i.template=s.innerHTML),s.innerHTML="";const o=n(s);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e})(vn((()=>{const t=jt({type:"area"}),e={area:zn(Ai,null,null),block:zn(Mi,null,null),blockConnection:zn(Ei,null,null),blockDropdown:zn(zi,null,null),blockInput:zn(Ii,null,null),blockMulti:zn(ji,null,null),workspace:zn(Li,null,null)};return()=>zn("div",{class:"playground"},[zn("div",{class:"toolbar"},[zn("button",null,[zn("a",{href:"./api"},[jn(" api document ")])]),zn("span",{class:"title"},[jn(" Examples: ")]),Object.keys(e).map((e=>{return zn("button",{onClick:()=>{return n=e,void(t.type=n);var n}},"function"==typeof(n=e)||"[object Object]"===Object.prototype.toString.call(n)&&!Rn(n)?e:{default:()=>[e]});var n}))]),zn("div",{class:"test"},[e[t.type]])])}))).mount("#app");
