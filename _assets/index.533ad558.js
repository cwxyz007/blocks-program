function t(t,e){const n=Object.create(null),s=t.split(",");for(let t=0;t<s.length;t++)n[s[t]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl"),n=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function s(t){if(b(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=s(k(i)?r(i):i);if(o)for(const t in o)e[t]=o[t]}return e}if(C(t))return t}const i=/;(?![^(]*\))/g,o=/:(.+)/;function r(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function c(t){let e="";if(k(t))e=t;else if(b(t))for(let n=0;n<t.length;n++)e+=c(t[n])+" ";else if(C(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const l={},h=[],a=()=>{},d=()=>!1,u=/^on[^a-z]/,p=t=>u.test(t),f=t=>t.startsWith("onUpdate:"),g=Object.assign,v=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},m=Object.prototype.hasOwnProperty,_=(t,e)=>m.call(t,e),b=Array.isArray,y=t=>"[object Map]"===S(t),x=t=>"function"==typeof t,k=t=>"string"==typeof t,w=t=>"symbol"==typeof t,C=t=>null!==t&&"object"==typeof t,B=t=>C(t)&&x(t.then)&&x(t.catch),$=Object.prototype.toString,S=t=>$.call(t),F=t=>k(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,T=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},R=/-(\w)/g,A=P((t=>t.replace(R,((t,e)=>e?e.toUpperCase():"")))),O=/\B([A-Z])/g,E=P((t=>t.replace(O,"-$1").toLowerCase())),M=P((t=>t.charAt(0).toUpperCase()+t.slice(1))),I=P((t=>t?`on${M(t)}`:"")),z=(t,e)=>t!==e&&(t==t||e==e),j=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},N=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},L=t=>{const e=parseFloat(t);return isNaN(e)?t:e},D=new WeakMap,W=[];let V;const U=Symbol(""),H=Symbol("");function G(t,e=l){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return e.scheduler?void 0:t();if(!W.includes(n)){X(n);try{return Y.push(J),J=!0,W.push(n),V=n,t()}finally{W.pop(),Q(),V=W[W.length-1]}}};return n.id=K++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function q(t){t.active&&(X(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let K=0;function X(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let J=!0;const Y=[];function Z(){Y.push(J),J=!1}function Q(){const t=Y.pop();J=void 0===t||t}function tt(t,e,n){if(!J||void 0===V)return;let s=D.get(t);s||D.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=new Set),i.has(V)||(i.add(V),V.deps.push(i))}function et(t,e,n,s,i,o){const r=D.get(t);if(!r)return;const c=new Set,l=t=>{t&&t.forEach((t=>{(t!==V||t.allowRecurse)&&c.add(t)}))};if("clear"===e)r.forEach(l);else if("length"===n&&b(t))r.forEach(((t,e)=>{("length"===e||e>=s)&&l(t)}));else switch(void 0!==n&&l(r.get(n)),e){case"add":b(t)?F(n)&&l(r.get("length")):(l(r.get(U)),y(t)&&l(r.get(H)));break;case"delete":b(t)||(l(r.get(U)),y(t)&&l(r.get(H)));break;case"set":y(t)&&l(r.get(U))}c.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const nt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(w)),st=lt(),it=lt(!1,!0),ot=lt(!0),rt=lt(!0,!0),ct={};function lt(t=!1,e=!1){return function(n,s,i){if("__v_isReactive"===s)return!t;if("__v_isReadonly"===s)return t;if("__v_raw"===s&&i===(t?Mt:Et).get(n))return n;const o=b(n);if(!t&&o&&_(ct,s))return Reflect.get(ct,s,i);const r=Reflect.get(n,s,i);if(w(s)?nt.has(s):"__proto__"===s||"__v_isRef"===s)return r;if(t||tt(n,0,s),e)return r;if(Ut(r)){return!o||!F(s)?r.value:r}return C(r)?t?jt(r):zt(r):r}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];ct[t]=function(...t){const n=Vt(this);for(let t=0,e=this.length;t<e;t++)tt(n,0,t+"");const s=e.apply(n,t);return-1===s||!1===s?e.apply(n,t.map(Vt)):s}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];ct[t]=function(...t){Z();const n=e.apply(this,t);return Q(),n}}));function ht(t=!1){return function(e,n,s,i){const o=e[n];if(!t&&(s=Vt(s),!b(e)&&Ut(o)&&!Ut(s)))return o.value=s,!0;const r=b(e)&&F(n)?Number(n)<e.length:_(e,n),c=Reflect.set(e,n,s,i);return e===Vt(i)&&(r?z(s,o)&&et(e,"set",n,s):et(e,"add",n,s)),c}}const at={get:st,set:ht(),deleteProperty:function(t,e){const n=_(t,e),s=(t[e],Reflect.deleteProperty(t,e));return s&&n&&et(t,"delete",e,void 0),s},has:function(t,e){const n=Reflect.has(t,e);return w(e)&&nt.has(e)||tt(t,0,e),n},ownKeys:function(t){return tt(t,0,b(t)?"length":U),Reflect.ownKeys(t)}},dt={get:ot,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},ut=g({},at,{get:it,set:ht(!0)}),pt=(g({},dt,{get:rt}),t=>C(t)?zt(t):t),ft=t=>C(t)?jt(t):t,gt=t=>t,vt=t=>Reflect.getPrototypeOf(t);function mt(t,e,n=!1,s=!1){const i=Vt(t=t.__v_raw),o=Vt(e);e!==o&&!n&&tt(i,0,e),!n&&tt(i,0,o);const{has:r}=vt(i),c=n?ft:s?gt:pt;return r.call(i,e)?c(t.get(e)):r.call(i,o)?c(t.get(o)):void 0}function _t(t,e=!1){const n=this.__v_raw,s=Vt(n),i=Vt(t);return t!==i&&!e&&tt(s,0,t),!e&&tt(s,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function bt(t,e=!1){return t=t.__v_raw,!e&&tt(Vt(t),0,U),Reflect.get(t,"size",t)}function yt(t){t=Vt(t);const e=Vt(this),n=vt(e).has.call(e,t);return e.add(t),n||et(e,"add",t,t),this}function xt(t,e){e=Vt(e);const n=Vt(this),{has:s,get:i}=vt(n);let o=s.call(n,t);o||(t=Vt(t),o=s.call(n,t));const r=i.call(n,t);return n.set(t,e),o?z(e,r)&&et(n,"set",t,e):et(n,"add",t,e),this}function kt(t){const e=Vt(this),{has:n,get:s}=vt(e);let i=n.call(e,t);i||(t=Vt(t),i=n.call(e,t));s&&s.call(e,t);const o=e.delete(t);return i&&et(e,"delete",t,void 0),o}function wt(){const t=Vt(this),e=0!==t.size,n=t.clear();return e&&et(t,"clear",void 0,void 0),n}function Ct(t,e){return function(n,s){const i=this,o=i.__v_raw,r=Vt(o),c=t?ft:e?gt:pt;return!t&&tt(r,0,U),o.forEach(((t,e)=>n.call(s,c(t),c(e),i)))}}function Bt(t,e,n){return function(...s){const i=this.__v_raw,o=Vt(i),r=y(o),c="entries"===t||t===Symbol.iterator&&r,l="keys"===t&&r,h=i[t](...s),a=e?ft:n?gt:pt;return!e&&tt(o,0,l?H:U),{next(){const{value:t,done:e}=h.next();return e?{value:t,done:e}:{value:c?[a(t[0]),a(t[1])]:a(t),done:e}},[Symbol.iterator](){return this}}}}function $t(t){return function(...e){return"delete"!==t&&this}}const St={get(t){return mt(this,t)},get size(){return bt(this)},has:_t,add:yt,set:xt,delete:kt,clear:wt,forEach:Ct(!1,!1)},Ft={get(t){return mt(this,t,!1,!0)},get size(){return bt(this)},has:_t,add:yt,set:xt,delete:kt,clear:wt,forEach:Ct(!1,!0)},Tt={get(t){return mt(this,t,!0)},get size(){return bt(this,!0)},has(t){return _t.call(this,t,!0)},add:$t("add"),set:$t("set"),delete:$t("delete"),clear:$t("clear"),forEach:Ct(!0,!1)};function Pt(t,e){const n=e?Ft:t?Tt:St;return(e,s,i)=>"__v_isReactive"===s?!t:"__v_isReadonly"===s?t:"__v_raw"===s?e:Reflect.get(_(n,s)&&s in e?n:e,s,i)}["keys","values","entries",Symbol.iterator].forEach((t=>{St[t]=Bt(t,!1,!1),Tt[t]=Bt(t,!0,!1),Ft[t]=Bt(t,!1,!0)}));const Rt={get:Pt(!1,!1)},At={get:Pt(!1,!0)},Ot={get:Pt(!0,!1)},Et=new WeakMap,Mt=new WeakMap;function It(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>S(t).slice(8,-1))(t))}function zt(t){return t&&t.__v_isReadonly?t:Nt(t,!1,at,Rt)}function jt(t){return Nt(t,!0,dt,Ot)}function Nt(t,e,n,s){if(!C(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const i=e?Mt:Et,o=i.get(t);if(o)return o;const r=It(t);if(0===r)return t;const c=new Proxy(t,2===r?s:n);return i.set(t,c),c}function Lt(t){return Dt(t)?Lt(t.__v_raw):!(!t||!t.__v_isReactive)}function Dt(t){return!(!t||!t.__v_isReadonly)}function Wt(t){return Lt(t)||Dt(t)}function Vt(t){return t&&Vt(t.__v_raw)||t}function Ut(t){return Boolean(t&&!0===t.__v_isRef)}const Ht={get:(t,e,n)=>{return Ut(s=Reflect.get(t,e,n))?s.value:s;var s},set:(t,e,n,s)=>{const i=t[e];return Ut(i)&&!Ut(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function Gt(t){return Lt(t)?t:new Proxy(t,Ht)}class qt{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}class Kt{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=G(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,et(Vt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),tt(Vt(this),0,"value"),this._value}set value(t){this._setter(t)}}function Xt(t,e,n,s){let i;try{i=s?t(...s):t()}catch(t){Yt(t,e,n)}return i}function Jt(t,e,n,s){if(x(t)){const i=Xt(t,e,n,s);return i&&B(i)&&i.catch((t=>{Yt(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(Jt(t[o],e,n,s));return i}function Yt(t,e,n,s=!0){e&&e.vnode;if(e){let s=e.parent;const i=e.proxy,o=n;for(;s;){const e=s.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;s=s.parent}const r=e.appContext.config.errorHandler;if(r)return void Xt(r,null,10,[t,i,o])}!function(t,e,n,s=!0){console.error(t)}(t,0,0,s)}let Zt=!1,Qt=!1;const te=[];let ee=0;const ne=[];let se=null,ie=0;const oe=[];let re=null,ce=0;const le=Promise.resolve();let he=null,ae=null;function de(t){const e=he||le;return t?e.then(this?t.bind(this):t):e}function ue(t){te.length&&te.includes(t,Zt&&t.allowRecurse?ee+1:ee)||t===ae||(te.push(t),pe())}function pe(){Zt||Qt||(Qt=!0,he=le.then(_e))}function fe(t,e,n,s){b(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?s+1:s)||n.push(t),pe()}function ge(t,e=null){if(ne.length){for(ae=e,se=[...new Set(ne)],ne.length=0,ie=0;ie<se.length;ie++)se[ie]();se=null,ie=0,ae=null,ge(t,e)}}function ve(t){if(oe.length){const t=[...new Set(oe)];if(oe.length=0,re)return void re.push(...t);for(re=t,re.sort(((t,e)=>me(t)-me(e))),ce=0;ce<re.length;ce++)re[ce]();re=null,ce=0}}const me=t=>null==t.id?1/0:t.id;function _e(t){Qt=!1,Zt=!0,ge(t),te.sort(((t,e)=>me(t)-me(e)));try{for(ee=0;ee<te.length;ee++){const t=te[ee];t&&Xt(t,null,14)}}finally{ee=0,te.length=0,ve(),Zt=!1,he=null,(te.length||oe.length)&&_e(t)}}function be(t,e,...n){const s=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),r=o&&e.slice(7);if(r&&r in s){const t=`${"modelValue"===r?"model":r}Modifiers`,{number:e,trim:o}=s[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(L))}let c=I(A(e)),h=s[c];!h&&o&&(c=I(E(e)),h=s[c]),h&&Jt(h,t,6,i);const a=s[c+"Once"];if(a){if(t.emitted){if(t.emitted[c])return}else(t.emitted={})[c]=!0;Jt(a,t,6,i)}}function ye(t,e,n=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const s=t.emits;let i={},o=!1;if(!x(t)){const s=t=>{o=!0,g(i,ye(t,e,!0))};!n&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}return s||o?(b(s)?s.forEach((t=>i[t]=null)):g(i,s),t.__emits=i):t.__emits=null}function xe(t,e){return!(!t||!p(e))&&(e=e.slice(2).replace(/Once$/,""),_(t,e[0].toLowerCase()+e.slice(1))||_(t,E(e))||_(t,e))}let ke=null;function we(t){ke=t}function Ce(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:o,propsOptions:[r],slots:c,attrs:l,emit:h,render:a,renderCache:d,data:u,setupState:p,ctx:g}=t;let v;ke=t;try{let t;if(4&n.shapeFlag){const e=i||s;v=Nn(a.call(e,e,d,o,p,u,g)),t=l}else{const n=e;0,v=Nn(n.length>1?n(o,{attrs:l,slots:c,emit:h}):n(o,null)),t=e.props?l:$e(l)}let m=v;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&(1&n||6&n)&&(r&&e.some(f)&&(t=Se(t,r)),m=zn(m,t))}n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),v=m}catch(e){Yt(e,t,1),v=In(Cn)}return ke=null,v}function Be(t){let e;for(let n=0;n<t.length;n++){const s=t[n];if(!Rn(s))return;if(s.type!==Cn||"v-if"===s.children){if(e)return;e=s}}return e}const $e=t=>{let e;for(const n in t)("class"===n||"style"===n||p(n))&&((e||(e={}))[n]=t[n]);return e},Se=(t,e)=>{const n={};for(const s in t)f(s)&&s.slice(9)in e||(n[s]=t[s]);return n};function Fe(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const o=s[i];if(e[o]!==t[o]&&!xe(n,o))return!0}return!1}function Te(t){if(x(t)&&(t=t()),b(t)){t=Be(t)}return Nn(t)}let Pe=0;const Re=t=>Pe+=t;function Ae(t,e,n,s=!1){const i={},o={};N(o,On,1),Oe(t,e,i,o),n?t.props=s?i:Nt(i,!1,ut,At):t.type.props?t.props=i:t.props=o,t.attrs=o}function Oe(t,e,n,s){const[i,o]=t.propsOptions;if(e)for(const o in e){const r=e[o];if(T(o))continue;let c;i&&_(i,c=A(o))?n[c]=r:xe(t.emitsOptions,o)||(s[o]=r)}if(o){const e=Vt(n);for(let s=0;s<o.length;s++){const r=o[s];n[r]=Ee(i,e,r,e[r],t)}}}function Ee(t,e,n,s,i){const o=t[n];if(null!=o){const t=_(o,"default");if(t&&void 0===s){const t=o.default;o.type!==Function&&x(t)?(os(i),s=t(e),os(null)):s=t}o[0]&&(_(e,n)||t?!o[1]||""!==s&&s!==E(n)||(s=!0):s=!1)}return s}function Me(t,e,n=!1){if(!e.deopt&&t.__props)return t.__props;const s=t.props,i={},o=[];let r=!1;if(!x(t)){const s=t=>{r=!0;const[n,s]=Me(t,e,!0);g(i,n),s&&o.push(...s)};!n&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}if(!s&&!r)return t.__props=h;if(b(s))for(let t=0;t<s.length;t++){const e=A(s[t]);Ie(e)&&(i[e]=l)}else if(s)for(const t in s){const e=A(t);if(Ie(e)){const n=s[t],r=i[e]=b(n)||x(n)?{type:n}:n;if(r){const t=Ne(Boolean,r.type),n=Ne(String,r.type);r[0]=t>-1,r[1]=n<0||t<n,(t>-1||_(r,"default"))&&o.push(e)}}}return t.__props=[i,o]}function Ie(t){return"$"!==t[0]}function ze(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function je(t,e){return ze(t)===ze(e)}function Ne(t,e){if(b(e)){for(let n=0,s=e.length;n<s;n++)if(je(e[n],t))return n}else if(x(e))return je(e,t)?0:-1;return-1}function Le(t,e,n=is,s=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{if(n.isUnmounted)return;Z(),os(n);const i=Jt(e,n,t,s);return os(null),Q(),i});return s?i.unshift(o):i.push(o),o}}const De=t=>(e,n=is)=>!rs&&Le(t,e,n),We=De("bm"),Ve=De("m"),Ue=De("bu"),He=De("u"),Ge=De("bum"),qe=De("um"),Ke=De("rtg"),Xe=De("rtc"),Je={};function Ye(t,e,n){return Ze(t,e,n)}function Ze(t,e,{immediate:n,deep:s,flush:i,onTrack:o,onTrigger:r}=l,c=is){let h,d,u=!1;if(Ut(t)?(h=()=>t.value,u=!!t._shallow):Lt(t)?(h=()=>t,s=!0):h=b(t)?()=>t.map((t=>Ut(t)?t.value:Lt(t)?tn(t):x(t)?Xt(t,c,2):void 0)):x(t)?e?()=>Xt(t,c,2):()=>{if(!c||!c.isUnmounted)return d&&d(),Xt(t,c,3,[p])}:a,e&&s){const t=h;h=()=>tn(t())}const p=t=>{d=_.options.onStop=()=>{Xt(t,c,4)}};let f=b(t)?[]:Je;const g=()=>{if(_.active)if(e){const t=_();(s||u||z(t,f))&&(d&&d(),Jt(e,c,3,[t,f===Je?void 0:f,p]),f=t)}else _()};let m;g.allowRecurse=!!e,m="sync"===i?g:"post"===i?()=>gn(g,c&&c.suspense):()=>{!c||c.isMounted?function(t){fe(t,se,ne,ie)}(g):g()};const _=G(h,{lazy:!0,onTrack:o,onTrigger:r,scheduler:m});return hs(_,c),e?n?g():f=_():"post"===i?gn(_,c&&c.suspense):_(),()=>{q(_),c&&v(c.effects,_)}}function Qe(t,e,n){const s=this.proxy;return Ze(k(t)?()=>s[t]:t.bind(s),e.bind(s),n,this)}function tn(t,e=new Set){if(!C(t)||e.has(t))return t;if(e.add(t),Ut(t))tn(t.value,e);else if(b(t))for(let n=0;n<t.length;n++)tn(t[n],e);else if("[object Set]"===S(t)||y(t))t.forEach((t=>{tn(t,e)}));else for(const n in t)tn(t[n],e);return t}const en=t=>t.type.__isKeepAlive;function nn(t,e,n=is){const s=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(Le(e,s,n),n){let t=n.parent;for(;t&&t.parent;)en(t.parent.vnode)&&sn(s,e,n,t),t=t.parent}}function sn(t,e,n,s){const i=Le(e,t,s,!0);qe((()=>{v(s[e],i)}),n)}const on=t=>"_"===t[0]||"$stable"===t,rn=t=>b(t)?t.map(Nn):[Nn(t)],cn=(t,e,n)=>function(t,e=ke){if(!e)return t;const n=(...n)=>{Pe||Fn(!0);const s=ke;we(e);const i=t(...n);return we(s),Pe||Tn(),i};return n._c=!0,n}((t=>rn(e(t))),n),ln=(t,e)=>{const n=t._ctx;for(const s in t){if(on(s))continue;const i=t[s];if(x(i))e[s]=cn(0,i,n);else if(null!=i){const t=rn(i);e[s]=()=>t}}},hn=(t,e)=>{const n=rn(e);t.slots.default=()=>n};function an(t,e,n,s){const i=t.dirs,o=e&&e.dirs;for(let r=0;r<i.length;r++){const c=i[r];o&&(c.oldValue=o[r].value);const l=c.dir[s];l&&Jt(l,n,8,[t.el,c,t,e])}}function dn(){return{app:null,config:{isNativeTag:d,performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:d,errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let un=0;function pn(t,e){return function(n,s=null){null==s||C(s)||(s=null);const i=dn(),o=new Set;let r=!1;const c=i.app={_uid:un++,_component:n,_props:s,_container:null,_context:i,version:ds,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&x(t.install)?(o.add(t),t.install(c,...e)):x(t)&&(o.add(t),t(c,...e))),c),mixin:t=>(i.mixins.includes(t)||(i.mixins.push(t),(t.props||t.emits)&&(i.deopt=!0)),c),component:(t,e)=>e?(i.components[t]=e,c):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,c):i.directives[t],mount(o,l){if(!r){const h=In(n,s);return h.appContext=i,l&&e?e(h,o):t(h,o),r=!0,c._container=o,o.__vue_app__=c,h.component.proxy}},unmount(){r&&t(null,c._container)},provide:(t,e)=>(i.provides[t]=e,c)};return c}}const fn={scheduler:ue,allowRecurse:!0},gn=function(t,e){e&&e.pendingBranch?b(t)?e.effects.push(...t):e.effects.push(t):fe(t,re,oe,ce)},vn=(t,e,n,s)=>{if(b(t))return void t.forEach(((t,i)=>vn(t,e&&(b(e)?e[i]:e),n,s)));let i;i=!s||s.type.__asyncLoader?null:4&s.shapeFlag?s.component.exposed||s.component.proxy:s.el;const{i:o,r:r}=t,c=e&&e.r,h=o.refs===l?o.refs={}:o.refs,a=o.setupState;if(null!=c&&c!==r&&(k(c)?(h[c]=null,_(a,c)&&(a[c]=null)):Ut(c)&&(c.value=null)),k(r)){const t=()=>{h[r]=i,_(a,r)&&(a[r]=i)};i?(t.id=-1,gn(t,n)):t()}else if(Ut(r)){const t=()=>{r.value=i};i?(t.id=-1,gn(t,n)):t()}else x(r)&&Xt(r,o,12,[i,h])};function mn(t){return function(t,e){const{insert:n,remove:s,patchProp:i,forcePatchProp:o,createElement:r,createText:c,createComment:d,setText:u,setElementText:p,parentNode:f,nextSibling:v,setScopeId:m=a,cloneNode:b,insertStaticContent:y}=t,x=(t,e,n,s=null,i=null,o=null,r=!1,c=!1)=>{t&&!An(t,e)&&(s=rt(t),tt(t,i,o,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:l,ref:h,shapeFlag:a}=e;switch(l){case wn:k(t,e,n,s);break;case Cn:w(t,e,n,s);break;case Bn:null==t&&C(e,n,s,r);break;case kn:L(t,e,n,s,i,o,r,c);break;default:1&a?F(t,e,n,s,i,o,r,c):6&a?D(t,e,n,s,i,o,r,c):(64&a||128&a)&&l.process(t,e,n,s,i,o,r,c,lt)}null!=h&&i&&vn(h,t&&t.ref,o,e)},k=(t,e,s,i)=>{if(null==t)n(e.el=c(e.children),s,i);else{const n=e.el=t.el;e.children!==t.children&&u(n,e.children)}},w=(t,e,s,i)=>{null==t?n(e.el=d(e.children||""),s,i):e.el=t.el},C=(t,e,n,s)=>{[t.el,t.anchor]=y(t.children,e,n,s)},$=({el:t,anchor:e},s,i)=>{let o;for(;t&&t!==e;)o=v(t),n(t,s,i),t=o;n(e,s,i)},S=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=v(t),s(t),t=n;s(e)},F=(t,e,n,s,i,o,r,c)=>{r=r||"svg"===e.type,null==t?P(e,n,s,i,o,r,c):M(t,e,i,o,r,c)},P=(t,e,s,o,c,l,h)=>{let a,d;const{type:u,props:f,shapeFlag:g,transition:v,scopeId:m,patchFlag:_,dirs:y}=t;if(t.el&&void 0!==b&&-1===_)a=t.el=b(t.el);else{if(a=t.el=r(t.type,l,f&&f.is),8&g?p(a,t.children):16&g&&O(t.children,a,null,o,c,l&&"foreignObject"!==u,h||!!t.dynamicChildren),y&&an(t,null,o,"created"),f){for(const e in f)T(e)||i(a,e,null,f[e],l,t.children,o,c,ot);(d=f.onVnodeBeforeMount)&&_n(d,o,t)}R(a,m,t,o)}y&&an(t,null,o,"beforeMount");const x=(!c||c&&!c.pendingBranch)&&v&&!v.persisted;x&&v.beforeEnter(a),n(a,e,s),((d=f&&f.onVnodeMounted)||x||y)&&gn((()=>{d&&_n(d,o,t),x&&v.enter(a),y&&an(t,null,o,"mounted")}),c)},R=(t,e,n,s)=>{if(e&&m(t,e),s){const i=s.type.__scopeId;i&&i!==e&&m(t,i+"-s"),n===s.subTree&&R(t,s.vnode.scopeId,s.vnode,s.parent)}},O=(t,e,n,s,i,o,r,c=0)=>{for(let l=c;l<t.length;l++){const c=t[l]=r?Ln(t[l]):Nn(t[l]);x(null,c,e,n,s,i,o,r)}},M=(t,e,n,s,r,c)=>{const h=e.el=t.el;let{patchFlag:a,dynamicChildren:d,dirs:u}=e;a|=16&t.patchFlag;const f=t.props||l,g=e.props||l;let v;if((v=g.onVnodeBeforeUpdate)&&_n(v,n,e,t),u&&an(e,t,n,"beforeUpdate"),a>0){if(16&a)z(h,e,f,g,n,s,r);else if(2&a&&f.class!==g.class&&i(h,"class",null,g.class,r),4&a&&i(h,"style",f.style,g.style,r),8&a){const c=e.dynamicProps;for(let e=0;e<c.length;e++){const l=c[e],a=f[l],d=g[l];(d!==a||o&&o(h,l))&&i(h,l,a,d,r,t.children,n,s,ot)}}1&a&&t.children!==e.children&&p(h,e.children)}else c||null!=d||z(h,e,f,g,n,s,r);const m=r&&"foreignObject"!==e.type;d?I(t.dynamicChildren,d,h,n,s,m):c||K(t,e,h,null,n,s,m),((v=g.onVnodeUpdated)||u)&&gn((()=>{v&&_n(v,n,e,t),u&&an(e,t,n,"updated")}),s)},I=(t,e,n,s,i,o)=>{for(let r=0;r<e.length;r++){const c=t[r],l=e[r],h=c.type===kn||!An(c,l)||6&c.shapeFlag||64&c.shapeFlag?f(c.el):n;x(c,l,h,null,s,i,o,!0)}},z=(t,e,n,s,r,c,h)=>{if(n!==s){for(const l in s){if(T(l))continue;const a=s[l],d=n[l];(a!==d||o&&o(t,l))&&i(t,l,d,a,h,e.children,r,c,ot)}if(n!==l)for(const o in n)T(o)||o in s||i(t,o,n[o],null,h,e.children,r,c,ot)}},L=(t,e,s,i,o,r,l,h)=>{const a=e.el=t?t.el:c(""),d=e.anchor=t?t.anchor:c("");let{patchFlag:u,dynamicChildren:p}=e;u>0&&(h=!0),null==t?(n(a,s,i),n(d,s,i),O(e.children,s,d,o,r,l,h)):u>0&&64&u&&p?(I(t.dynamicChildren,p,s,o,r,l),(null!=e.key||o&&e===o.subTree)&&bn(t,e,!0)):K(t,e,s,d,o,r,l,h)},D=(t,e,n,s,i,o,r,c)=>{null==t?512&e.shapeFlag?i.ctx.activate(e,n,s,r,c):W(e,n,s,i,o,r,c):V(t,e,c)},W=(t,e,n,s,i,o,r)=>{const c=t.component=function(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||ns,o={uid:ss++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Me(s,i),emitsOptions:ye(s,i),emit:null,emitted:null,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=be.bind(null,o),o}(t,s,i);if(en(t)&&(c.ctx.renderer=lt),function(t,e=!1){rs=e;const{props:n,children:s,shapeFlag:i}=t.vnode,o=4&i;Ae(t,n,o,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=e,N(e,"_",n)):ln(e,t.slots={})}else t.slots={},e&&hn(t,e);N(t.slots,On,1)})(t,s);const r=o?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ts);const{setup:s}=n;if(s){const n=t.setupContext=s.length>1?function(t){const e=e=>{t.exposed=Gt(e)};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;is=t,Z();const i=Xt(s,t,0,[t.props,n]);if(Q(),is=null,B(i)){if(e)return i.then((e=>{cs(t,e)}));t.asyncDep=i}else cs(t,i)}else ls(t)}(t,e):void 0;rs=!1}(c),c.asyncDep){if(i&&i.registerDep(c,U),!t.el){const t=c.subTree=In(Cn);w(null,t,e,n)}}else U(c,t,e,n,i,o,r)},V=(t,e,n)=>{const s=e.component=t.component;if(function(t,e,n){const{props:s,children:i,component:o}=t,{props:r,children:c,patchFlag:l}=e,h=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!i&&!c||c&&c.$stable)||s!==r&&(s?!r||Fe(s,r,h):!!r);if(1024&l)return!0;if(16&l)return s?Fe(s,r,h):!!r;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(r[n]!==s[n]&&!xe(h,n))return!0}}return!1}(t,e,n)){if(s.asyncDep&&!s.asyncResolved)return void H(s,e,n);s.next=e,function(t){const e=te.indexOf(t);e>-1&&te.splice(e,1)}(s.update),s.update()}else e.component=t.component,e.el=t.el,s.vnode=e},U=(t,e,n,s,i,o,r)=>{t.update=G((function(){if(t.isMounted){let e,{next:n,bu:s,u:c,parent:l,vnode:h}=t,a=n;n?(n.el=h.el,H(t,n,r)):n=h,s&&j(s),(e=n.props&&n.props.onVnodeBeforeUpdate)&&_n(e,l,n,h);const d=Ce(t),u=t.subTree;t.subTree=d,x(u,d,f(u.el),rt(u),t,i,o),n.el=d.el,null===a&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,d.el),c&&gn(c,i),(e=n.props&&n.props.onVnodeUpdated)&&gn((()=>{_n(e,l,n,h)}),i)}else{let r;const{el:c,props:l}=e,{bm:h,m:a,parent:d}=t;h&&j(h),(r=l&&l.onVnodeBeforeMount)&&_n(r,d,e);const u=t.subTree=Ce(t);c&&at?at(e.el,u,t,i):(x(null,u,n,s,t,i,o),e.el=u.el),a&&gn(a,i),(r=l&&l.onVnodeMounted)&&gn((()=>{_n(r,d,e)}),i);const{a:p}=t;p&&256&e.shapeFlag&&gn(p,i),t.isMounted=!0}}),fn)},H=(t,e,n)=>{e.component=t;const s=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,s){const{props:i,attrs:o,vnode:{patchFlag:r}}=t,c=Vt(i),[h]=t.propsOptions;if(!(s||r>0)||16&r){let s;Oe(t,e,i,o);for(const o in c)e&&(_(e,o)||(s=E(o))!==o&&_(e,s))||(h?!n||void 0===n[o]&&void 0===n[s]||(i[o]=Ee(h,e||l,o,void 0,t)):delete i[o]);if(o!==c)for(const t in o)e&&_(e,t)||delete o[t]}else if(8&r){const n=t.vnode.dynamicProps;for(let s=0;s<n.length;s++){const r=n[s],l=e[r];if(h)if(_(o,r))o[r]=l;else{const e=A(r);i[e]=Ee(h,c,e,l,t)}else o[r]=l}}et(t,"set","$attrs")}(t,e.props,s,n),((t,e)=>{const{vnode:n,slots:s}=t;let i=!0,o=l;if(32&n.shapeFlag){const t=e._;t?1===t?i=!1:g(s,e):(i=!e.$stable,ln(e,s)),o=e}else e&&(hn(t,e),o={default:1});if(i)for(const t in s)on(t)||t in o||delete s[t]})(t,e.children),ge(void 0,t.update)},K=(t,e,n,s,i,o,r,c=!1)=>{const l=t&&t.children,h=t?t.shapeFlag:0,a=e.children,{patchFlag:d,shapeFlag:u}=e;if(d>0){if(128&d)return void J(l,a,n,s,i,o,r,c);if(256&d)return void X(l,a,n,s,i,o,r,c)}8&u?(16&h&&ot(l,i,o),a!==l&&p(n,a)):16&h?16&u?J(l,a,n,s,i,o,r,c):ot(l,i,o,!0):(8&h&&p(n,""),16&u&&O(a,n,s,i,o,r,c))},X=(t,e,n,s,i,o,r,c)=>{e=e||h;const l=(t=t||h).length,a=e.length,d=Math.min(l,a);let u;for(u=0;u<d;u++){const s=e[u]=c?Ln(e[u]):Nn(e[u]);x(t[u],s,n,null,i,o,r,c)}l>a?ot(t,i,o,!0,!1,d):O(e,n,s,i,o,r,c,d)},J=(t,e,n,s,i,o,r,c)=>{let l=0;const a=e.length;let d=t.length-1,u=a-1;for(;l<=d&&l<=u;){const s=t[l],h=e[l]=c?Ln(e[l]):Nn(e[l]);if(!An(s,h))break;x(s,h,n,null,i,o,r,c),l++}for(;l<=d&&l<=u;){const s=t[d],l=e[u]=c?Ln(e[u]):Nn(e[u]);if(!An(s,l))break;x(s,l,n,null,i,o,r,c),d--,u--}if(l>d){if(l<=u){const t=u+1,h=t<a?e[t].el:s;for(;l<=u;)x(null,e[l]=c?Ln(e[l]):Nn(e[l]),n,h,i,o,r),l++}}else if(l>u)for(;l<=d;)tt(t[l],i,o,!0),l++;else{const p=l,f=l,g=new Map;for(l=f;l<=u;l++){const t=e[l]=c?Ln(e[l]):Nn(e[l]);null!=t.key&&g.set(t.key,l)}let v,m=0;const _=u-f+1;let b=!1,y=0;const k=new Array(_);for(l=0;l<_;l++)k[l]=0;for(l=p;l<=d;l++){const s=t[l];if(m>=_){tt(s,i,o,!0);continue}let h;if(null!=s.key)h=g.get(s.key);else for(v=f;v<=u;v++)if(0===k[v-f]&&An(s,e[v])){h=v;break}void 0===h?tt(s,i,o,!0):(k[h-f]=l+1,h>=y?y=h:b=!0,x(s,e[h],n,null,i,o,r,c),m++)}const w=b?function(t){const e=t.slice(),n=[0];let s,i,o,r,c;const l=t.length;for(s=0;s<l;s++){const l=t[s];if(0!==l){if(i=n[n.length-1],t[i]<l){e[s]=i,n.push(s);continue}for(o=0,r=n.length-1;o<r;)c=(o+r)/2|0,t[n[c]]<l?o=c+1:r=c;l<t[n[o]]&&(o>0&&(e[s]=n[o-1]),n[o]=s)}}o=n.length,r=n[o-1];for(;o-- >0;)n[o]=r,r=e[r];return n}(k):h;for(v=w.length-1,l=_-1;l>=0;l--){const t=f+l,c=e[t],h=t+1<a?e[t+1].el:s;0===k[l]?x(null,c,n,h,i,o,r):b&&(v<0||l!==w[v]?Y(c,n,h,2):v--)}}},Y=(t,e,s,i,o=null)=>{const{el:r,type:c,transition:l,children:h,shapeFlag:a}=t;if(6&a)return void Y(t.component.subTree,e,s,i);if(128&a)return void t.suspense.move(e,s,i);if(64&a)return void c.move(t,e,s,lt);if(c===kn){n(r,e,s);for(let t=0;t<h.length;t++)Y(h[t],e,s,i);return void n(t.anchor,e,s)}if(c===Bn)return void $(t,e,s);if(2!==i&&1&a&&l)if(0===i)l.beforeEnter(r),n(r,e,s),gn((()=>l.enter(r)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=l,c=()=>n(r,e,s),h=()=>{t(r,(()=>{c(),o&&o()}))};i?i(r,c,h):h()}else n(r,e,s)},tt=(t,e,n,s=!1,i=!1)=>{const{type:o,props:r,ref:c,children:l,dynamicChildren:h,shapeFlag:a,patchFlag:d,dirs:u}=t;if(null!=c&&vn(c,null,n,null),256&a)return void e.ctx.deactivate(t);const p=1&a&&u;let f;if((f=r&&r.onVnodeBeforeUnmount)&&_n(f,e,t),6&a)it(t.component,n,s);else{if(128&a)return void t.suspense.unmount(n,s);p&&an(t,null,e,"beforeUnmount"),h&&(o!==kn||d>0&&64&d)?ot(h,e,n,!1,!0):(o===kn&&(128&d||256&d)||!i&&16&a)&&ot(l,e,n),64&a&&(s||!yn(t.props))&&t.type.remove(t,lt),s&&nt(t)}((f=r&&r.onVnodeUnmounted)||p)&&gn((()=>{f&&_n(f,e,t),p&&an(t,null,e,"unmounted")}),n)},nt=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===kn)return void st(n,i);if(e===Bn)return void S(t);const r=()=>{s(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:s}=o,i=()=>e(n,r);s?s(t.el,r,i):i()}else r()},st=(t,e)=>{let n;for(;t!==e;)n=v(t),s(t),t=n;s(e)},it=(t,e,n)=>{const{bum:s,effects:i,update:o,subTree:r,um:c}=t;if(s&&j(s),i)for(let t=0;t<i.length;t++)q(i[t]);o&&(q(o),tt(r,t,e,n)),c&&gn(c,e),gn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},ot=(t,e,n,s=!1,i=!1,o=0)=>{for(let r=o;r<t.length;r++)tt(t[r],e,n,s,i)},rt=t=>6&t.shapeFlag?rt(t.component.subTree):128&t.shapeFlag?t.suspense.next():v(t.anchor||t.el),ct=(t,e)=>{null==t?e._vnode&&tt(e._vnode,null,null,!0):x(e._vnode||null,t,e),ve(),e._vnode=t},lt={p:x,um:tt,m:Y,r:nt,mt:W,mc:O,pc:K,pbc:I,n:rt,o:t};let ht,at;e&&([ht,at]=e(lt));return{render:ct,hydrate:ht,createApp:pn(ct,ht)}}(t)}function _n(t,e,n,s=null){Jt(t,e,7,[n,s])}function bn(t,e,n=!1){const s=t.children,i=e.children;if(b(s)&&b(i))for(let t=0;t<s.length;t++){const e=s[t];let o=i[t];1&o.shapeFlag&&!o.dynamicChildren&&((o.patchFlag<=0||32===o.patchFlag)&&(o=i[t]=Ln(i[t]),o.el=e.el),n||bn(e,o))}}const yn=t=>t&&(t.disabled||""===t.disabled),xn=Symbol(),kn=Symbol(void 0),wn=Symbol(void 0),Cn=Symbol(void 0),Bn=Symbol(void 0),$n=[];let Sn=null;function Fn(t=!1){$n.push(Sn=t?null:[])}function Tn(){$n.pop(),Sn=$n[$n.length-1]||null}function Pn(t,e,n,s,i){const o=In(t,e,n,s,i,!0);return o.dynamicChildren=Sn||h,Tn(),Sn&&Sn.push(o),o}function Rn(t){return!!t&&!0===t.__v_isVNode}function An(t,e){return t.type===e.type&&t.key===e.key}const On="__vInternal",En=({key:t})=>null!=t?t:null,Mn=({ref:t})=>null!=t?k(t)||Ut(t)||x(t)?{i:ke,r:t}:t:null,In=function(t,e=null,n=null,i=0,o=null,r=!1){t&&t!==xn||(t=Cn);if(Rn(t)){const s=zn(t,e,!0);return n&&Dn(s,n),s}l=t,x(l)&&"__vccOpts"in l&&(t=t.__vccOpts);var l;if(e){(Wt(e)||On in e)&&(e=g({},e));let{class:t,style:n}=e;t&&!k(t)&&(e.class=c(t)),C(n)&&(Wt(n)&&!b(n)&&(n=g({},n)),e.style=s(n))}const h=k(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:C(t)?4:x(t)?2:0,a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&En(e),ref:e&&Mn(e),scopeId:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:h,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};if(Dn(a,n),128&h){const{content:t,fallback:e}=function(t){const{shapeFlag:e,children:n}=t;let s,i;return 32&e?(s=Te(n.default),i=Te(n.fallback)):(s=Te(n),i=Nn(null)),{content:s,fallback:i}}(a);a.ssContent=t,a.ssFallback=e}!r&&Sn&&(i>0||6&h)&&32!==i&&Sn.push(a);return a};function zn(t,e,n=!1){const{props:i,ref:o,patchFlag:r}=t,l=e?function(...t){const e=g({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=c([e.class,i.class]));else if("style"===t)e.style=s([e.style,i.style]);else if(p(t)){const n=e[t],s=i[t];n!==s&&(e[t]=n?[].concat(n,i[t]):s)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&En(l),ref:e&&e.ref?n&&o?b(o)?o.concat(Mn(e)):[o,Mn(e)]:Mn(e):o,scopeId:t.scopeId,children:t.children,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==kn?-1===r?16:16|r:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&zn(t.ssContent),ssFallback:t.ssFallback&&zn(t.ssFallback),el:t.el,anchor:t.anchor}}function jn(t=" ",e=0){return In(wn,null,t,e)}function Nn(t){return null==t||"boolean"==typeof t?In(Cn):b(t)?In(kn,null,t):"object"==typeof t?null===t.el?t:zn(t):In(wn,null,String(t))}function Ln(t){return null===t.el?t:zn(t)}function Dn(t,e){let n=0;const{shapeFlag:s}=t;if(null==e)e=null;else if(b(e))n=16;else if("object"==typeof e){if(1&s||64&s){const n=e.default;return void(n&&(n._c&&Re(1),Dn(t,n()),n._c&&Re(-1)))}{n=32;const s=e._;s||On in e?3===s&&ke&&(1024&ke.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=ke}}else x(e)?(e={default:e,_ctx:ke},n=32):(e=String(e),64&s?(n=16,e=[jn(e)]):n=8);t.children=e,t.shapeFlag|=n}function Wn(t,e,n=!1){const s=is||ke;if(s){const i=null==s.parent?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&x(e)?e():e}}let Vn=!1;function Un(t,e,n=[],s=[],i=[],o=!1){const{mixins:r,extends:c,data:h,computed:d,methods:u,watch:p,provide:f,inject:v,components:m,directives:_,beforeMount:y,mounted:k,beforeUpdate:w,updated:B,activated:$,deactivated:S,beforeDestroy:F,beforeUnmount:T,destroyed:P,unmounted:R,render:A,renderTracked:O,renderTriggered:E,errorCaptured:M,expose:I}=e,z=t.proxy,j=t.ctx,N=t.appContext.mixins;if(o&&A&&t.render===a&&(t.render=A),o||(Vn=!0,Hn("beforeCreate","bc",e,t,N),Vn=!1,Kn(t,N,n,s,i)),c&&Un(t,c,n,s,i,!0),r&&Kn(t,r,n,s,i),v)if(b(v))for(let t=0;t<v.length;t++){const e=v[t];j[e]=Wn(e)}else for(const t in v){const e=v[t];C(e)?j[t]=Wn(e.from||t,e.default,!0):j[t]=Wn(e)}if(u)for(const t in u){const e=u[t];x(e)&&(j[t]=e.bind(z))}if(o?h&&n.push(h):(n.length&&n.forEach((e=>Xn(t,e,z))),h&&Xn(t,h,z)),d)for(const t in d){const e=d[t],n=as({get:x(e)?e.bind(z,z):x(e.get)?e.get.bind(z,z):a,set:!x(e)&&x(e.set)?e.set.bind(z):a});Object.defineProperty(j,t,{enumerable:!0,configurable:!0,get:()=>n.value,set:t=>n.value=t})}var L;if(p&&s.push(p),!o&&s.length&&s.forEach((t=>{for(const e in t)Jn(t[e],j,z,e)})),f&&i.push(f),!o&&i.length&&i.forEach((t=>{const e=x(t)?t.call(z):t;Reflect.ownKeys(e).forEach((t=>{!function(t,e){if(is){let n=is.provides;const s=is.parent&&is.parent.provides;s===n&&(n=is.provides=Object.create(s)),n[t]=e}}(t,e[t])}))})),o&&(m&&g(t.components||(t.components=g({},t.type.components)),m),_&&g(t.directives||(t.directives=g({},t.type.directives)),_)),o||Hn("created","c",e,t,N),y&&We(y.bind(z)),k&&Ve(k.bind(z)),w&&Ue(w.bind(z)),B&&He(B.bind(z)),$&&nn($.bind(z),"a",L),S&&function(t,e){nn(t,"da",e)}(S.bind(z)),M&&((t,e=is)=>{Le("ec",t,e)})(M.bind(z)),O&&Xe(O.bind(z)),E&&Ke(E.bind(z)),T&&Ge(T.bind(z)),R&&qe(R.bind(z)),b(I)&&!o)if(I.length){const e=t.exposed||(t.exposed=Gt({}));I.forEach((t=>{e[t]=function(t,e){return Ut(t[e])?t[e]:new qt(t,e)}(z,t)}))}else t.exposed||(t.exposed=l)}function Hn(t,e,n,s,i){qn(t,e,i,s);const{extends:o,mixins:r}=n;o&&Gn(t,e,o,s),r&&qn(t,e,r,s);const c=n[t];c&&Jt(c.bind(s.proxy),s,e)}function Gn(t,e,n,s){n.extends&&Gn(t,e,n.extends,s);const i=n[t];i&&Jt(i.bind(s.proxy),s,e)}function qn(t,e,n,s){for(let i=0;i<n.length;i++){const o=n[i].mixins;o&&qn(t,e,o,s);const r=n[i][t];r&&Jt(r.bind(s.proxy),s,e)}}function Kn(t,e,n,s,i){for(let o=0;o<e.length;o++)Un(t,e[o],n,s,i,!0)}function Xn(t,e,n){const s=e.call(n,n);C(s)&&(t.data===l?t.data=zt(s):g(t.data,s))}function Jn(t,e,n,s){const i=s.includes(".")?function(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}(n,s):()=>n[s];if(k(t)){const n=e[t];x(n)&&Ye(i,n)}else if(x(t))Ye(i,t.bind(n));else if(C(t))if(b(t))t.forEach((t=>Jn(t,e,n,s)));else{const s=x(t.handler)?t.handler.bind(n):e[t.handler];x(s)&&Ye(i,s,t)}}function Yn(t,e,n){const s=n.appContext.config.optionMergeStrategies,{mixins:i,extends:o}=e;o&&Yn(t,o,n),i&&i.forEach((e=>Yn(t,e,n)));for(const i in e)s&&_(s,i)?t[i]=s[i](t[i],e[i],n.proxy,i):t[i]=e[i]}const Zn=t=>t&&(t.proxy?t.proxy:Zn(t.parent)),Qn=g(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zn(t.parent),$root:t=>t.root&&t.root.proxy,$emit:t=>t.emit,$options:t=>function(t){const e=t.type,{__merged:n,mixins:s,extends:i}=e;if(n)return n;const o=t.appContext.mixins;if(!o.length&&!s&&!i)return e;const r={};return o.forEach((e=>Yn(r,e,t))),Yn(r,e,t),e.__merged=r}(t),$forceUpdate:t=>()=>ue(t.update),$nextTick:t=>de.bind(t.proxy),$watch:t=>Qe.bind(t)}),ts={get({_:t},e){const{ctx:n,setupState:s,data:i,props:o,accessCache:r,type:c,appContext:h}=t;if("__v_skip"===e)return!0;let a;if("$"!==e[0]){const c=r[e];if(void 0!==c)switch(c){case 0:return s[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(s!==l&&_(s,e))return r[e]=0,s[e];if(i!==l&&_(i,e))return r[e]=1,i[e];if((a=t.propsOptions[0])&&_(a,e))return r[e]=2,o[e];if(n!==l&&_(n,e))return r[e]=3,n[e];Vn||(r[e]=4)}}const d=Qn[e];let u,p;return d?("$attrs"===e&&tt(t,0,e),d(t)):(u=c.__cssModules)&&(u=u[e])?u:n!==l&&_(n,e)?(r[e]=3,n[e]):(p=h.config.globalProperties,_(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:s,setupState:i,ctx:o}=t;if(i!==l&&_(i,e))i[e]=n;else if(s!==l&&_(s,e))s[e]=n;else if(e in t.props)return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:o}},r){let c;return void 0!==n[r]||t!==l&&_(t,r)||e!==l&&_(e,r)||(c=o[0])&&_(c,r)||_(s,r)||_(Qn,r)||_(i.config.globalProperties,r)}},es=g({},ts,{get(t,e){if(e!==Symbol.unscopables)return ts.get(t,e,t)},has:(t,n)=>"_"!==n[0]&&!e(n)}),ns=dn();let ss=0;let is=null;const os=t=>{is=t};let rs=!1;function cs(t,e,n){x(e)?t.render=e:C(e)&&(t.setupState=Gt(e)),ls(t)}function ls(t,e){const n=t.type;t.render||(t.render=n.render||a,t.render._rc&&(t.withProxy=new Proxy(t.ctx,es))),is=t,Z(),Un(t,n),Q(),is=null}function hs(t,e=is){e&&(e.effects||(e.effects=[])).push(t)}function as(t){const e=function(t){let e,n;return x(t)?(e=t,n=a):(e=t.get,n=t.set),new Kt(e,n,x(t)||!t.set)}(t);return hs(e.effect),e}const ds="3.0.4",us="http://www.w3.org/2000/svg",ps="undefined"!=typeof document?document:null;let fs,gs;const vs={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n)=>e?ps.createElementNS(us,t):ps.createElement(t,n?{is:n}:void 0),createText:t=>ps.createTextNode(t),createComment:t=>ps.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ps.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode:t=>t.cloneNode(!0),insertStaticContent(t,e,n,s){const i=s?gs||(gs=ps.createElementNS(us,"svg")):fs||(fs=ps.createElement("div"));i.innerHTML=t;const o=i.firstChild;let r=o,c=r;for(;r;)c=r,vs.insert(r,e,n),r=i.firstChild;return[o,c]}};const ms=/\s*!important$/;function _s(t,e,n){if(b(n))n.forEach((n=>_s(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const s=function(t,e){const n=ys[e];if(n)return n;let s=A(e);if("filter"!==s&&s in t)return ys[e]=s;s=M(s);for(let n=0;n<bs.length;n++){const i=bs[n]+s;if(i in t)return ys[e]=i}return e}(t,e);ms.test(n)?t.setProperty(E(s),n.replace(ms,""),"important"):t[s]=n}}const bs=["Webkit","Moz","ms"],ys={};const xs="http://www.w3.org/1999/xlink";let ks=Date.now;"undefined"!=typeof document&&ks()>document.createEvent("Event").timeStamp&&(ks=()=>performance.now());let ws=0;const Cs=Promise.resolve(),Bs=()=>{ws=0};function $s(t,e,n,s,i=null){const o=t._vei||(t._vei={}),r=o[e];if(s&&r)r.value=s;else{const[n,c]=function(t){let e;if(Ss.test(t)){let n;for(e={};n=t.match(Ss);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t.slice(2).toLowerCase(),e]}(e);if(s){!function(t,e,n,s){t.addEventListener(e,n,s)}(t,n,o[e]=function(t,e){const n=t=>{(t.timeStamp||ks())>=n.attached-1&&Jt(function(t,e){if(b(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>ws||(Cs.then(Bs),ws=ks()))(),n}(s,i),c)}else r&&(!function(t,e,n,s){t.removeEventListener(e,n,s)}(t,n,r,c),o[e]=void 0)}}const Ss=/(?:Once|Passive|Capture)$/;const Fs=/^on[a-z]/;const Ts=g({patchProp:(t,e,s,i,o=!1,r,c,l,h)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,i,o);break;case"style":!function(t,e,n){const s=t.style;if(n)if(k(n))e!==n&&(s.cssText=n);else{for(const t in n)_s(s,t,n[t]);if(e&&!k(e))for(const t in e)null==n[t]&&_s(s,t,"")}else t.removeAttribute("style")}(t,s,i);break;default:p(e)?f(e)||$s(t,e,0,i,c):function(t,e,n,s){if(s)return"innerHTML"===e||!!(e in t&&Fs.test(e)&&x(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e&&"string"==typeof n)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if(Fs.test(e)&&k(n))return!1;return e in t}(t,e,i,o)?function(t,e,n,s,i,o,r){if("innerHTML"===e||"textContent"===e)return s&&r(s,i,o),void(t[e]=null==n?"":n);if("value"!==e||"PROGRESS"===t.tagName){if(""===n||null==n){const s=typeof t[e];if(""===n&&"boolean"===s)return void(t[e]=!0);if(null==n&&"string"===s)return t[e]="",void t.removeAttribute(e);if("number"===s)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch(t){}}else{t._value=n;const e=null==n?"":n;t.value!==e&&(t.value=e)}}(t,e,i,r,c,l,h):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),function(t,e,s,i){if(i&&e.startsWith("xlink:"))null==s?t.removeAttributeNS(xs,e.slice(6,e.length)):t.setAttributeNS(xs,e,s);else{const i=n(e);null==s||i&&!1===s?t.removeAttribute(e):t.setAttribute(e,i?"":s)}}(t,e,i,o))}},forcePatchProp:(t,e)=>"value"===e},vs);let Ps;class Rs{constructor(){this._events={}}events(t){return this._events[t]||(this._events[t]=new Set),this._events[t]}on(t,e){this.events(t).add(e)}off(t,e){this.events(t).delete(e)}emit(t,...e){const n=this.events(t);for(const t of n)t(...e)}clear(t){if(void 0!==t){const e=this.events(t);e&&e.clear()}else this._events={}}}function As(){let t="";for(let e=0;e<32;e+=1)switch(e){case 8:case 20:case 12:t+="-",t+=(16*Math.random()|0).toString(16);break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t}function Os(t){return"string"==typeof t?t:t.id}class Es extends Array{remove(t){const e=this.findIndex(t);return e>=0?this.splice(e,1)[0]:null}removeItem(t){const e=this.indexOf(t);return e>=0?this.splice(e,1)[0]:null}pushDistinct(t){const e=this.indexOf(t)>=0;return!e&&this.push(t),e}}function Ms(t,...e){console.warn(`[${t}]`,...e),console.trace()}class Is{constructor(){this.ctors=new Map}get(t){return this.ctors.get(t)||null}set(t,e){this.ctors.get(t)&&Ms(Is.name,`Type ${t} has exist.`),e&&this.ctors.set(t,e)}}class zs{get value(){return this._value}constructor(t){this._value=t,this._subs=new Set}sub(t){this._subs.has(t)||this._subs.add(t)}unSub(t){this._subs.delete(t)}update(t,e=!1){if(this._value===t)return;const n=this._value;if(this._value=t,!e)for(const e of this._subs)e(t,n)}}class js{constructor(t={},e=As()){this.nextUpdate=(t,e)=>{e?.previous.update(null),t?.previous.update(this)},this.previousUpdate=(t,e)=>{e?.next.update(null),t?.next.update(this)},this.parentUpdate=(t,e)=>{e?.block.update(null),t?.block.update(this)},this.id=e,this.options={name:"",output:[],next:!0,previous:!0,...t},this.fields=new Es,this.next=new zs(null),this.next.sub(this.nextUpdate),this.previous=new zs(null),this.previous.sub(this.previousUpdate),this.parent=new zs(null),this.parent.sub(this.parentUpdate)}get workspace(){return this.$w}get isRoot(){return!this.previous.value&&!this.parent.value}get hasOutput(){const t=this.options.output;return!!t&&t.length>0}getField(t){return this.fields.find((e=>e.id===t||e.name===t))||null}setWorkspace(t){this.$w=t}getFieldsByRow(t=0){const e=this.fields.filter((e=>e.rowIdx===t));return e.sort(((t,e)=>t.colIdx-e.colIdx)),e}pushField(t,e){this.getField(t.name)&&Ms(js.name,`The same name [${t.name}] field on block ${this}`);const n=this.getFieldsByRow(e).length;void 0!==e&&(t.rowIdx=e),t.colIdx=n,t.$b=this,this.fields.pushDistinct(t)}connectToField(t){t?t.checkConnection(this)&&this.parent.update(t):this.parent.update(null)}clone(){const t=new js(this.options);for(const e of this.fields)t.pushField(e.clone(),e.rowIdx);return t}destroy(){this.previous.update(null),this.next.update(null),this.parent.update(null)}toString(){return`${this.id}[${this.options.name}]`}}class Ns{get blocks(){return this._blocksMap}constructor(){this._blocksMap=new Map}add(t){const e=t.options.name=t.id;this._blocksMap.set(e,t)}remove(t){const e="string"==typeof t?t:t.options.name,n=this._blocksMap.get(e);return n&&this._blocksMap.delete(e),n||null}get(t){return this._blocksMap.get(t)||null}clear(){this.destroy(),this._blocksMap.clear()}destroy(){for(const[,t]of this._blocksMap)t.destroy()}}class Ls{constructor(t=As()){this.id=t,this.definedBlocks=new Ns,this.blockDB=new Map,this.blockRoots=new Map}isRootBlock(t){const e=Os(t);return this.blockRoots.get(e)||!1}addRootBlock(t){this.isRootBlock(t)||this.blockRoots.set(t.id,t)}hasBlock(t){const e=Os(t);return this.blockDB.get(e)||!1}addBlock(t){this.hasBlock(t)||(this.blockDB.set(t.id,t),t.setWorkspace(this)),t.isRoot&&this.addRootBlock(t),t.next.value&&this.addBlock(t.next.value)}removeBlock(t){const e=this.hasBlock(t);return e?(e.isRoot&&this.blockRoots.delete(e.id),this.blockDB.delete(e.id),e.setWorkspace(null),e.next.value&&this.removeBlock(e.next.value),e.destroy(),e):null}connectBlock(t,e){t.isRoot&&this.blockRoots.delete(t.id),t.previous.update(e)}}class Ds{constructor(t,e,n="no-type",s={}){this.blockUpdate=(t,e)=>{e?.parent.update(null),t?.parent.update(this)},this.name=t,this.type=n,this.hollow=s.hollow||!1,this.id=s.id||As(),this.$b=null,this.acceptInput=s.acceptInput||[],this._value=e,this.colIdx=s.colIdx||0,this.rowIdx=s.rowIdx||0,this.block=new zs(null),this.block.sub(this.blockUpdate)}get hasInput(){return this.acceptInput.length>0}get isBlock(){return!!this.block.value}getOptions(){return{acceptInput:this.acceptInput,colIdx:this.colIdx,rowIdx:this.rowIdx}}checkConnection(t){return this.hasInput&&function(t,e){for(const n of t)if(e.indexOf(n)>=0)return!0;return!1}(this.acceptInput,t.options.output)}value(t){return void 0===t||(this._value=t),this._value}clone(){return new Ds(this.name,this.value(),this.type,this.getOptions())}}var Ws,Vs;(Vs=Ws||(Ws={})).text="TEXT",Vs.blockSlot="BLOCK_SLOT",Vs.input="INPUT",Vs.dropdown="DROPDOWN";class Us extends Ds{get selected(){let t=this.options.find((t=>t.key===this._value));return t=t||this.options[0]||{key:"",value:""},t}constructor(t,e="",n={}){super(t,e,Ws.dropdown,n),this._parseOptions(n.options||[])}_parseOptions(t){this.options=[];let e="",n="";for(const s of t)Array.isArray(s)?(e=s[0]||"",n=s[1]??e):(e=s.key,n=s.value??s.key),this.options.push({key:e,value:n})}getOptions(){const t=super.getOptions();return{options:this.options,...t}}clone(){const t=new Us(this.name,this.value(),this.getOptions());if(this.block.value){this.block.value.clone().connectToField(t)}return t}}class Hs extends Ds{constructor(t,e="",n={}){super(t,e,Ws.input,n),this.inputType=n.inputType||"string",this.value(e)}getOptions(){const t=super.getOptions();return{inputType:this.inputType,...t}}value(t){if(void 0===t)return this._value;let e=t;if("number"===this.inputType){const t=parseFloat(e);e=Number.isNaN(t)?"":t.toString()}return this._value=e,this._value}clone(){const t=new Hs(this.name,this.value(),this.getOptions());if(this.block.value){this.block.value.clone().connectToField(t)}return t}}class Gs extends Ds{constructor(t,e=null,n={}){super(t,e,Ws.blockSlot,n),this.blockChanged=(t,e)=>{this._value=t},e?.connectToField(this),this.block.sub(this.blockChanged)}checkConnection(t){return!t.hasOutput}value(){return this._value}clone(){const t=new Gs(this.name,null,this.getOptions());return this.value()?.clone()?.connectToField(t),t}}class qs extends Ds{constructor(t,e="",n={}){super(t,e,Ws.text,n)}clone(){return new qs(this.name,this.value()||"",this.getOptions())}}const Ks=new Is;Ks.set(Ws.text,qs),Ks.set(Ws.blockSlot,Gs),Ks.set(Ws.dropdown,Us),Ks.set(Ws.input,Hs);class Xs{get rendered(){return document.body.contains(this.dom)}get parent(){return this._parent}constructor(t){this.dom=t,this.children=new Es}getAttr(t){const e=this.dom.getAttribute(t);if(!e)return e;const n=+e;return Number.isNaN(n)?e:n}setAttr(t,e){null===e?this.dom.removeAttribute(t):this.dom.setAttribute(t,String(e))}on(t,e,n){this.dom.addEventListener(t,e,n)}off(t,e,n){this.dom.removeEventListener(t,e,n)}attr(t,e){if("string"==typeof t){if(void 0===e)return this.getAttr(t);this.setAttr(t,e)}else Object.entries(t).forEach((([t,e])=>{this.setAttr(t,e)}))}append(...t){for(const e of t)this.dom.appendChild(e.dom),this.children.pushDistinct(e),e._parent=this}remove(...t){for(const e of t){this.children.removeItem(e)&&(this.dom.removeChild(e.dom),e._parent=null)}}addClasses(...t){this.dom.classList.add(...t)}removeClasses(...t){this.dom.classList.remove(...t)}destroy(){this.dom.remove(),this.children.forEach((t=>{this.remove(t),t.destroy()})),this._parent=null}}class Js extends Xs{get bbox(){return this.dom.getBBox()}constructor(t){super(t),this.x=0,this.y=0}visible(t){if(void 0===t)return"hidden"!==this.dom.style.visibility;this.dom.style.visibility=t?"":"hidden"}on(t,e,n){this.dom.addEventListener(t,e,n)}off(t,e,n){this.dom.removeEventListener(t,e,n)}move(t,e){this.x=t,this.y=e}dx(t){this.move(this.x+t,this.y)}dy(t){this.move(this.x,this.y+t)}dmove(t,e){this.move(this.x+t,this.y+e)}}function Ys(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Zs(t,e){if("string"==typeof e)t.setAttribute("style",e);else{Object.entries(e).forEach((([e,n])=>{t.style.setProperty(e,n)}))}}const Qs=new Rs;window.addEventListener("pointerup",(t=>Qs.emit("pointerup",t))),window.addEventListener("pointermove",(t=>Qs.emit("pointermove",t)));class ti{constructor(t){this.setTransform=t,this.modifies=[{type:"scale",params:[]},{type:"translate",params:[]},{type:"rotate",params:[]}]}applyTransform(){const t=this.modifies.filter((t=>t.params.length>0)).map((t=>`${t.type}(${t.params.join(", ")})`)).join(" ");this.setTransform(t)}changeModify(t,e){this.modifies.find((e=>e.type===t)).params=e,this.applyTransform()}move(t,e){this.changeModify("translate",[t,e])}scale(t,e){e?this.changeModify("scale",[t,e]):this.changeModify("scale",[t])}rotate(t){this.changeModify("rotate",[`${t}deg`])}}class ei extends zs{get width(){return this.value.width}get height(){return this.value.height}constructor(t=0,e=0){super({width:t,height:e})}}class ni extends Rs{get isDragging(){return this._isDragging}constructor(...t){super(),this.doms=t,this._isDragging=!1,this._pointerdown=this._pointerdown.bind(this),this._pointerup=this._pointerup.bind(this),this._pointermove=this._pointermove.bind(this);for(const t of this.doms)t.addEventListener("pointerdown",this._pointerdown),t.classList.add("s_dragger");Qs.on("pointermove",this._pointermove),Qs.on("pointerup",this._pointerup)}_pointerdown(t){this._isDragging=!0,this.emit("dragstart",t),document.documentElement.classList.add("s_dragger_dragging");for(const t of this.doms)t.classList.add("s_dragger_dragging")}_pointermove(t){this.isDragging&&this.emit("dragging",t.movementX,t.movementY,t)}_pointerup(t){this._isDragging=!1,this.emit("dragend",t),document.documentElement.classList.remove("s_dragger_dragging");for(const t of this.doms)t.classList.remove("s_dragger_dragging")}destroy(){for(const t of this.doms)t.removeEventListener("pointerdown",this._pointerdown);Qs.off("pointerup",this._pointerup),Qs.off("pointermove",this._pointermove)}}const si=document.createElement("div");class ii{constructor(){this.dom=si,this.actived=!1,this._initRootDom()}_initRootDom(){this.dom.classList.add("s_float_weight"),document.body.append(this.dom)}show(){this.actived=!0,this.dom.classList.remove("s_float_weight_hide"),this.dom.classList.add("s_float_weight_show")}hide(){this.actived=!1,this.dom.classList.remove("s_float_weight_show"),this.dom.classList.add("s_float_weight_hide")}toggle(){this.actived?this.hide():this.show()}move(t,e){this.x=t,this.y=e,Zs(this.dom,{left:`${t}px`,top:`${e}px`})}clear(){this.dom.innerHTML=""}replace(...t){this.clear(),this.dom.append(...t)}append(...t){this.dom.append(...t)}destroy(){this.dom.remove()}}class oi extends Js{constructor(){super(Ys("defs"))}}class ri extends Js{constructor(t=600,e=400){super(Ys("svg")),this.size=new ei(t,e),this.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:t,height:e}),this.defs=new oi,this.append(this.defs)}mount(t){t.appendChild(this.dom)}}class ci{constructor(t){this.el=t,this.clear()}pushCoords(t){for(let e=0;e<t.length&&!(e+2>t.length);e+=2)this.path.push(`${t[e]},${t[e+1]}`)}d(t,e,n=1){this.path.push(t);for(let t=0;t<e.length&&!(t+n>e.length);t+=n){const s=e.slice(t,t+n);n%2==0?this.pushCoords(s):this.path.push(...s)}return this}clear(){this.path=[]}done(){const t=this.path.join(" ");this.el.updatePath(t)}H(...t){return this.d("H",t)}h(...t){return this.d("h",t)}V(...t){return this.d("V",t)}v(...t){return this.d("v",t)}M(...t){return this.d("M",t,2)}m(...t){return this.d("m",t,2)}L(...t){return this.d("L",t,2)}l(...t){return this.d("l",t,2)}T(...t){return this.d("T",t,2)}t(...t){return this.d("t",t,2)}S(...t){return this.d("S",t,4)}s(...t){return this.d("s",t,4)}Q(...t){return this.d("Q",t,4)}q(...t){return this.d("q",t,4)}C(...t){return this.d("C",t,6)}c(...t){return this.d("c",t,6)}A(t,e,n,s,i,o,r){return this.path.push("A",t,e,n,s,i,`${o},${r}`),this}a(t,e,n,s,i,o,r){return this.path.push("a",t,e,n,s,i,`${o},${r}`),this}Z(){this.d("Z",[]),this.done()}z(){this.d("z",[]),this.done()}}class li extends Js{constructor(){super(Ys("path")),this.d=new ci(this),this.addClasses("s_path")}updatePath(t){this.attr("d",t)}}class hi extends Js{constructor(){super(Ys("g")),this.trans=new ti((t=>{this.attr("transform",t)}))}move(t,e){super.move(t,e),this.trans.move(t,e)}}class ai extends Js{constructor(t=""){super(Ys("text")),this.text(t),this.addClasses("s_text")}move(t,e){super.move(t,e),e+=this.bbox.height,e-=3,this.attr({x:t,y:e})}text(t){if(void 0===t)return this.dom.textContent||"";this.dom.textContent=t}}class di extends Js{get width(){return this._size.width}get height(){return this._size.height}constructor(t,e,n=0,s){super(Ys("rect")),this._size={width:t,height:e},s=s||n,this.attr({width:t,height:e,rx:n,ry:s})}setSize(t,e){this._size.width=t,this._size.height=e,this.attr({width:t,height:e})}move(t,e){super.move(t,e),this.attr({x:t,y:e})}}class ui extends hi{constructor(t,e=100,n=!1,s=2){super(),this._disabledChanged=t=>{this.attr("disabled",!!t||null)},this.ratio=t,this._view={thickness:s,length:e},this.isVertical=n,this.disabled=new zs(!1),this.currentPercentage=0,this.events=new Rs,this._initSVG(),this.addClasses("s_scroll"),this.disabled.sub(this._disabledChanged),this.dragger=new ni(this.scrollBar.dom),this._initDragger()}get scrollLength(){return this.length*(1-this.ratio)}get length(){return this._view.length}get thickness(){return this._view.thickness}_initDragger(){this.dragger.on("dragging",((t,e)=>{const n=(this.isVertical?e:t)/this.scrollLength;this.scrollTo(this.currentPercentage+n),this.events.emit("scroll",this.currentPercentage)}))}_initSVG(){this.isVertical?(this.background=new di(this.thickness,this.length,this.thickness/2),this.scrollBar=new di(this.thickness,this.length*this.ratio,this.thickness/2)):(this.background=new di(this.length,this.thickness,this.thickness/2),this.scrollBar=new di(this.length*this.ratio,this.thickness,this.thickness/2)),this.background.addClasses("s_scroll_background"),this.scrollBar.addClasses("s_scroll_bar"),this.append(this.background),this.append(this.scrollBar),this.scrollTo(this.currentPercentage)}_updateCurrent(){const t=this.scrollLength*this.currentPercentage;this.isVertical?this.scrollBar.move(0,t):this.scrollBar.move(t,0)}resize(){this.isVertical?(this.background.attr({width:this.thickness,height:this.length}),this.scrollBar.attr({width:this.thickness,height:this.length*this.ratio})):(this.background.attr({width:this.length,height:this.thickness}),this.scrollBar.attr({width:this.length*this.ratio,height:this.thickness}))}setRatio(t){this.ratio=t,this.resize()}setViewport(t,e){this._view.length=t,this._view.thickness=e??this.thickness,this.resize()}scrollTo(t){this.disabled.value||(this.currentPercentage=t<0?0:t>=1?1:t,this._updateCurrent())}destroy(){super.destroy(),this.dragger.destroy()}}class pi extends hi{constructor(t,e,n,s,i=2){super(),this._positionChanged=function(t,e,n={}){let s=!1,i=0;const o=Object.assign({leading:!0,trailing:!1},n);let r;return function(...n){const c=(new Date).getTime();if(s||(s=!0,i=c,!o.leading)){if(clearTimeout(r),c-i>=e)return i=c,void t.apply(this,n);o.trailing&&(r=window.setTimeout((()=>t.apply(this,n)),e))}else t.apply(this,n)}}(this._positionChanged,1e3/60,{trailing:!0}),this.events=new Rs,this.thickness=i,this.size=new ei(n,s),this.currentPercentage={x:0,y:0},this._initSVG(e,s,t,n),this.setRatio(t,e),this.setSize(n,s),this.addClasses("s_scrolls")}_initSVG(t,e,n,s){this.vertical=new ui(t,e-this.thickness,!0,this.thickness),this.vertical.addClasses("s_scrolls_vertical"),this.vertical.events.on("scroll",(t=>this._positionChanged("y",t))),this.horizontal=new ui(n,s-this.thickness,!1,this.thickness),this.horizontal.addClasses("s_scrolls_horizontal"),this.horizontal.events.on("scroll",(t=>this._positionChanged("x",t))),this.setVisible()}_positionChanged(t,e){this.currentPercentage[t]=e,this.events.emit("scroll",this.currentPercentage)}scrollTo(t,e){this.horizontal.scrollTo(t),this.vertical.scrollTo(e),this.currentPercentage.x=t,this.currentPercentage.y=e}setVisible(t=!0,e=!0){const n=(t,e=!0)=>{e?t.parent!==this&&this.append(t):this.remove(t),t.disabled.update(!e)};n(this.horizontal,t),n(this.vertical,e)}setDisabled(t=!1,e=!1){this.horizontal.disabled.update(t),this.vertical.disabled.update(e)}setSize(t,e){this.size.update({width:t,height:e}),this.horizontal.setViewport(t-this.thickness),this.horizontal.move(0,e-this.thickness),this.vertical.setViewport(e-this.thickness),this.vertical.move(t-this.thickness,0)}setRatio(t,e){this.horizontal.setRatio(t),this.vertical.setRatio(e)}destroy(){super.destroy()}}class fi extends hi{get bbox(){const t=this.dom.getBBox();if(this.width>t.width+this.width/2){const e=this.width-t.width;t.x-=e/2-t.width/2,t.width=e}if(this.height>t.height+this.height/2){const e=this.height-t.height;t.y-=e/2-t.height/2,t.height=e}return t}get totalWidth(){return this.bbox.width+this.width}get totalHeight(){return this.bbox.height+this.height}get moveRange(){const t=this.bbox,e=t.x-this.width/2,n=t.y-this.height/2;return{width:t.width,height:t.height,left:-(e+t.width),top:-(n+t.height),right:-e,bottom:-n}}get currentPercentage(){const t=this.moveRange;let e=(this.x-t.left)/t.width,n=(this.y-t.top)/t.height;return e<0&&(e=0),e>1&&(e=1),n<0&&(n=0),n>1&&(n=1),{x:+(1-e).toFixed(8),y:+(1-n).toFixed(8)}}constructor(t,e){super(),this.events=new Rs,this.setSize(t,e)}setSize(t,e){this.width=t,this.height=e;const{x:n,y:s}=this.currentPercentage;this.moveTo(n,s)}moveTo(t,e){const n=this.moveRange,s=n.left+(1-t)*n.width,i=n.top+(1-e)*n.height;this.move(s,i)}move(t,e){const n=this.moveRange;t<n.left&&(t=n.left),t>n.right&&(t=n.right),e<n.top&&(e=n.top),e>n.bottom&&(e=n.bottom),super.move(t,e)}}class gi extends hi{constructor(t,e){super(),this.resize=function(t,e,n={}){let s,i=!1,o=0;const r=Object.assign({leading:!1,trailing:!0,maxWait:e},n);return function(...n){const c=(new Date).getTime();if(i||(o=c,i=!0,!r.leading)){if(clearTimeout(s),c-o>=e)return t.apply(this,n),void(o=c);o=c,r.trailing&&(s=window.setTimeout((()=>t.apply(this,n)),r.maxWait))}else t.apply(this,n)}}(this.resize,100),this.addClasses("s_area"),this.size=new ei(t,e),this.events=new Rs,this._initSVG(t,e),this._initDragger(),this.resize()}_initSVG(t,e){this.background=new di(t,e),this.background.addClasses("s_area_background"),this.content=new fi(t,e),this.content.addClasses("s_area_content"),this.scrolls=new pi(1,1,t,e,5),this.scrolls.events.on("scroll",this._scrollCurrentChanged.bind(this)),this.append(this.background),this.append(this.content),this.append(this.scrolls)}_scrollCurrentChanged(t){const e=this.content.moveRange,n=this.content.currentPercentage,s=(t.x-n.x)*e.width,i=(t.y-n.y)*e.height;this.content.moveTo(t.x,t.y),this.events.emit("move",s,i)}_initDragger(){this.dragger=new ni(this.background.dom),this.dragger.on("dragging",((t,e)=>{const n=this.content.currentPercentage.x,s=this.content.currentPercentage.y;this.content.dmove(t,e);const{x:i,y:o}=this.content.currentPercentage;this.scrolls.scrollTo(i,o);const r=this.content.moveRange,c=(i-n)*r.width,l=(o-s)*r.height;this.events.emit("move",c,l)}))}displayAtTop(t){this.content.append(t)}scrollTo(t,e){this.content.moveTo(t,e),this.scrolls.scrollTo(t,e)}resize(){const{width:t,height:e}=this.size;this.background.setSize(t,e),this.content.setSize(t,e),this.scrolls.setSize(t,e),this.scrolls.setRatio(t/this.content.totalWidth,e/this.content.totalHeight),this.scrolls.scrollTo(this.content.currentPercentage.x,this.content.currentPercentage.y)}setSize(t,e){this.size.update({width:t,height:e}),this.resize()}appendContent(...t){for(const e of t)e.dmove(-this.content.x,-this.content.y),this.content.append(e);this.resize()}removeContent(...t){this.content.remove(...t),this.resize()}destroy(){super.destroy(),this.dragger.destroy()}}class vi extends Xs{constructor(t,e,n=As()){super(Ys("pattern")),this.id=n,this.x=0,this.y=0,this.addClasses("s_pattern"),this.attr({id:n,width:t,height:e,patternUnits:"userSpaceOnUse"}),this.rect=new di(t,e),this.rect.addClasses("s_pattern_grid"),this.append(this.rect),this.trans=new ti((t=>{this.attr("patternTransform",t)}))}scale(t){this.trans.scale(t)}move(t,e){this.x=t,this.y=e,this.attr({x:t,y:e})}dmove(t,e){this.move(this.x+t,this.y+e)}}class mi extends Xs{constructor(t=As()){super(Ys("filter")),this.id=t,this.attr("id",this.id),this.dom.innerHTML='\n  <feGaussianBlur in="SourceAlpha" stdDeviation="3"/> \n  <feOffset dx="2" dy="2" result="offsetblur"/> \n  <feComponentTransfer>\n    <feFuncA type="linear" slope="0.5"/> \n  </feComponentTransfer>\n  <feMerge> \n    <feMergeNode/> \n    <feMergeNode in="SourceGraphic"/> \n  </feMerge>\n    '}}class _i extends Js{constructor(t=""){super(Ys("image")),this.attr("href",t),this.addClasses("s_image")}move(t,e){super.move(t,e),this.attr({x:t,y:e})}href(t){return this.attr("href",t||null)}}class bi{constructor(t,e,n){this.$f=e,this.svg=n,this.$b=t,this.svg.addClasses("s_field")}initShape(){}release(){this.svg.removeClasses("s_field_focus"),this.$b.$r.currentActiveField=void 0}focus(){this.svg.addClasses("s_field_focus"),this.$b.$r.currentActiveField=this}}class yi extends bi{constructor(t,e){super(t,e,new hi),this.focus=()=>{super.focus();const t=this.$b.$r.floatWeight,e=this._buildSelector();t.replace(e),e.onclick=e=>{const n=e.target.getAttribute("key");this.$f.value(n),this.text.text(this.$f.selected.value),t.hide(),super.release(),this.updateShape()},t.toggle()},this.iconConfig={padding:5,size:26},this.svg.addClasses("s_field_dropdown"),this._initBackground(),this._initBackgroundText(),this._initBackgroundDropdownIcon()}_initBackgroundDropdownIcon(){this.icon=new _i(this.$b.$r.assets.get("./icons/caret-down.svg")),this.icon.addClasses("s_field_dropdown_icon");const t=this.iconConfig.size;this.icon.attr({width:t,height:t}),this.svg.append(this.icon),this.icon.on("click",this.focus)}_initBackgroundText(){this.text=new ai(this.$f.selected.value),this.text.addClasses("s_field_dropdown_text"),this.svg.append(this.text),this.text.on("click",this.focus)}_initBackground(){this.background=new li,this.background.addClasses("s_field_dropdown_background"),this.svg.append(this.background),this.background.on("click",this.focus)}_updateBackgroundShape(){this.background.d.clear();const t=this.text.bbox;t.width+=this.iconConfig.padding+this.iconConfig.size,this.background.d.M(0,0).h(t.width+10).v(t.height+10).h(-(t.width+10)).v(-(t.height+10)).z(),this.text.move(5,5)}_buildSelector(){const t=this.svg.dom.getBoundingClientRect(),e=document.createElement("div");e.classList.add("s_field_dropdown_select");for(const t of this.$f.options){const n=document.createElement("div");n.classList.add("s_field_dropdown_select_option"),n.setAttribute("key",t.key),n.setAttribute("value",t.value),n.innerText=t.value,e.append(n)}const n=this.svg.bbox.height;return Zs(e,{position:"fixed",left:`${t.left}px`,top:`${t.top+n}px`,width:`${t.width}px`}),e}initShape(){this._updateBackgroundShape();const t=this.text.x+this.text.bbox.width;this.icon.move(t+this.iconConfig.padding,0)}updateShape(){this._updateBackgroundShape(),this.$b.updateShape()}}class xi extends bi{constructor(t,e){super(t,e,new hi),this.focus=()=>{super.focus();const t=this.$b.$r.floatWeight,e=this._buildInput();e.addEventListener("keydown",(e=>{"Enter"===e.key&&t.hide()})),t.replace(e),t.toggle(),e.focus()},this.svg.addClasses("s_field_input"),this._initBackground(),this._initBackgroundText()}_initBackgroundText(){this.text=new ai(this.$f.value()),this.text.addClasses("s_field_input_text"),this.svg.append(this.text),this.text.on("click",this.focus)}_initBackground(){this.background=new li,this.background.addClasses("s_field_input_background"),this.svg.append(this.background),this.background.on("click",this.focus)}_buildInput(){const t=document.createElement("input"),e=this.svg.dom.getBoundingClientRect();return Zs(t,{position:"fixed",outline:"none",border:"none",left:`${e.left}px`,top:`${e.top}px`,width:`${e.width}px`,height:`${e.height}px`}),t.addEventListener("input",(e=>{const n=t.value;this.text.text(n),this.$f.value(n),this.updateShape();const s=this.svg.dom.getBoundingClientRect();Zs(t,{left:`${s.left}px`,top:`${s.top}px`,width:`${s.width}px`,height:`${s.height}px`})})),t.value=this.$f.value(),t}_updateBackgroundShape(){this.background.d.clear();const t=this.text.bbox;this.background.d.M(0,0).h(t.width+10).v(t.height+10).h(-(t.width+10)).v(-(t.height+10)).z(),this.text.move(5,5)}initShape(){this._updateBackgroundShape()}updateShape(){this._updateBackgroundShape(),this.$b.updateShape()}}var ki,wi;(wi=ki||(ki={})).blockPrevious="block-previous",wi.blockNext="block-next",wi.blockOutput="block-output",wi.slotField="field";class Ci{get isConnected(){return!!this.targetConnection}constructor(t,e){this.acceptTypes=[],this.isActive=!1,this.targetConnection=null,this.oldTargetConnection=null,this.connectAction=e.connectAction,this.dx=e.dx||0,this.dy=e.dy||0,this.sourceBlock=t,this.type=e.type,this.acceptTypes=e.acceptTypes||[]}setActive(t){this.isActive=t,this.isActive?this.sourceBlock.addClasses("s_conn_active"):this.sourceBlock.removeClasses("s_conn_active")}checkDestConn(t){const e=!!this.acceptTypes.find((e=>e===t.type)),n=t.isConnected;return e&&!n}connectTo(t,e=!1){this.targetConnection!==t&&(this.oldTargetConnection=this.targetConnection,this.targetConnection=t,this.connectAction(e,this.targetConnection,this.oldTargetConnection),t?this.targetConnection?.connectTo(this,!0):this.oldTargetConnection?.connectTo(null))}}class Bi extends bi{constructor(t,e){super(t,e,new hi),this._connAction=(t,e)=>{if(this.$f.block.update(e?.targetConnection?.sourceBlock.$b||null),this.$b.updateShape(),!e||t)return;const n=e.sourceBlock.getWorldPosition(),s=this.$b.getWorldPosition();s.x+=this.connection.dx,s.y+=this.connection.dy;const i={x:n.x-s.x,y:n.y-s.y};this.$b.getTopBlock().dmove(i.x,i.y),this.$b.append(e.sourceBlock),e.sourceBlock.move(this.connection.dx,this.connection.dy)},this.svg.addClasses("s_field_slot"),this.connection=this.$b.$r.connectionManager.createConnection(this.$b,{dx:0,dy:0,type:ki.slotField,acceptTypes:[ki.blockPrevious],connectAction:this._connAction})}_updateConnectedBlockPosition(){const t=this.connection.targetConnection?.sourceBlock;t&&!t.isRootBlock()&&t.move(this.connection.dx,this.connection.dy)}updateConnPosition(t,e){this.svg.move(t,e),this.connection.dx=t,this.connection.dy=e,this._updateConnectedBlockPosition()}}class $i extends bi{constructor(t,e){super(t,e,new ai),this.svg.addClasses("s_field_text"),this.svg.text(this.$f.value()||"")}}class Si extends hi{constructor(t,e,n={}){super(),this._outputConnAction=(t,e)=>{},this._nextConnAction=(t,e)=>{if(this.$b.next.update(e?.sourceBlock.$b||null),t||!e)return;const n=e.sourceBlock.getWorldPosition(),s=this.getWorldPosition();s.x+=this.nextConnection.dx,s.y+=this.nextConnection.dy;const i={x:n.x-s.x,y:n.y-s.y};this.getTopBlock().dmove(i.x,i.y),this.append(e.sourceBlock),e.sourceBlock.move(this.nextConnection.dx,this.nextConnection.dy),this.inSlotField()?.updateShape()},this._previousConnAction=(t,e)=>{this.$b.previous.update(e?.sourceBlock.$b||null),!t&&e?(e.sourceBlock.append(this),this.move(e.dx,e.dy),this.inSlotField()?.updateShape()):this.inSlotFieldBefore()?.updateShape()},this.events=new Rs,this.addClasses("s_block"),this._isFirstTimeToRender=!0,this.options={x:0,y:0,draggable:!0,type:"",...n},this.$r=e,this.$b=t,this.fields=[],this.move(this.options.x,this.options.y),this._initBackground(),this._initFieldSVG(),this._initDragger(),this._initConnections(),this.updateShape()}get nextBlock(){return this.nextConnection?.targetConnection?.sourceBlock}get previousBlock(){return this.previousConnection?.targetConnection?.sourceBlock}_initConnections(){this.$b.options.previous&&(this.previousConnection=this.$r.connectionManager.createConnection(this,{type:ki.blockPrevious,acceptTypes:[ki.blockNext,ki.slotField],connectAction:this._previousConnAction})),this.$b.options.next&&(this.nextConnection=this.$r.connectionManager.createConnection(this,{type:ki.blockNext,acceptTypes:[ki.blockPrevious],connectAction:this._nextConnAction})),this.$b.options.output.length&&(this.outputConnection=this.$r.connectionManager.createConnection(this,{type:ki.blockOutput,acceptTypes:[],connectAction:this._outputConnAction}))}_initBackground(){this.background=new li,this.background.addClasses("s_block_background"),this.append(this.background)}_initDragger(){if(!this.options.draggable)return;const t=this.fields.flat().filter((t=>t.$f.type===Ws.text)).map((t=>t.svg.dom));this.dragger=new ni(this.background.dom,...t),this.dragger.on("dragging",((t,e)=>{this.dmove(t,e)})),this.dragger.on("dragstart",(()=>{const t=this.$r.effects.dragging.id;Zs(this.dom,{filter:`url(#${t})`}),this.addClasses("s_block_dragging")})),this.dragger.on("dragend",(()=>{Zs(this.dom,{filter:""}),this.removeClasses("s_block_dragging")}))}_initFieldSVG(){for(const t of this.$b.fields){const e=this.$r.fieldFactory.get(t.type);if(e){const n=new e(this,t);this._addField(n,t.rowIdx),this.append(n.svg)}}}_addField(t,e=0){this.fields[e]=this.fields[e]||new Es,this.fields[e].pushDistinct(t)}_updateFieldsInline(t,e){const n=this.$r.rendererOptions.block;let s=0;const i=t.reduce(((t,e)=>t+e.svg.bbox.width),0)+n.fieldGap*(t.length-1),o=Math.max(...t.map((t=>t.svg.bbox.height)));for(let i=0;i<t.length;i++){const r=t[i],c=t[i-1];s=0===i?n.horizontalPadding:n.fieldGap;const l=e+(o-r.svg.bbox.height)/2;c&&(s+=c.svg.x+c.svg.bbox.width),r.svg.move(s,l)}return{width:i,height:o}}_updateSlotField(t,e){const n=this.$r.rendererOptions.block,s=t.connection.targetConnection?.sourceBlock;t.svg.move(n.slotWidth,e),t.updateConnPosition(n.slotWidth,e);const i={width:0,height:n.emptyHeight};return s?(i.height=s.getContentHeightWithAllNextBlocks(),i):i}_updateJoinStartShape(){const t=this.$r.rendererOptions.block;this.background.d.h(t.joinStartWidth),this.$b.options.previous?this.background.d.v(-t.joinHeight).h(t.joinWidth).v(t.joinHeight):this.background.d.h(t.joinWidth)}_updateMultiRowFields(t,e,n=!1){const s=this.$r.rendererOptions.block;let i={width:0,height:0};if(n)i=this._updateSlotField(t[0][0],e);else{const n={width:0,height:0};let o=e+s.verticalPadding;for(const e of t){const t=this._updateFieldsInline(e,o);n.width=Math.max(n.width,t.width),n.height+=t.height,o+=t.height}i.width=n.width,i.height=n.height+2*s.verticalPadding}return i}_firstTimeToUpdateShape(){if(this._isFirstTimeToRender){this._isFirstTimeToRender=!0;for(const t of this.fields)for(const e of t)e.initShape()}}getWorldPosition(){let t=this,e={x:t.x,y:t.y};for(;t?.previousBlock;)t=t.previousBlock||null,t&&(e.x+=t.x,e.y+=t.y);return e}inSlotFieldBefore(){let t=this.previousConnection?.oldTargetConnection;for(;t;){if(t.type===ki.slotField){const e=t.sourceBlock;return e===this?null:e}t=t.sourceBlock.previousConnection?.targetConnection}return null}inSlotField(){let t=this;for(;t.previousConnection?.targetConnection;){if(t.previousConnection.targetConnection.type===ki.slotField){const e=t.previousConnection.targetConnection.sourceBlock;return e===this?null:e}t=t.previousConnection.targetConnection.sourceBlock}return null}getContentHeightWithAllNextBlocks(){const t=this.$r.rendererOptions.block.joinHeight;return this.bbox.height-(this.$b.options.previous?t:0)}getFieldRowCount(){return this.fields.length}getFieldsByRow(t=0){const e=this.fields[t]||[];return e.sort(((t,e)=>t.$f.colIdx-e.$f.colIdx)),e}isRootBlock(){return!this.previousConnection?.targetConnection?.sourceBlock}getTopBlock(){let t=this;for(;t.previousBlock;)t=t.previousBlock;return t}getTrialBlock(){let t=this;for(;t.nextBlock;)t=t.nextBlock;return t}updateOutputShape(){this.background.d.clear(),this.background.d.M(0,0).done()}updateShape(){if(!this.rendered)return;if(this._firstTimeToUpdateShape(),this.$b.hasOutput)return void this.updateOutputShape();this.background.d.clear(),this.background.d.M(0,0),this._updateJoinStartShape();const t=t=>!!t.length&&t[0].$f.type===Ws.blockSlot,e=(e,n)=>{const s=[e],i=t(e);let o=this.fields[n+1];for(;o;){const e=i&&t(o),r=!i&&!t(o);if(!e&&!r)break;s.push(o),n+=1,o=this.fields[n+1]}return s},n=this.$r.rendererOptions.block,s=n.joinHeight,i=n.joinWidth,o=n.joinStartWidth,r=n.slotWidth,c=n.horizontalPadding,l=n.emptyHeight,h=this.getFieldRowCount(),a=[],d=[];let u=0;for(let n=0;n<h;n++){const l=this.fields[n],h=0===n,p=t(l),f=e(l,n);n+=f.length-1;const g=this._updateMultiRowFields(f,u,p);if(u+=g.height,a.push(g),d.push(p),p){const t=a[a.length-2].width+2*c;this.background.d.h(-(t-r-o-i)).v(-s).h(-i).v(s).h(-o).v(g.height)}else{const t=g.width+2*c-(h?o+i:r),e=g.height;this.background.d.h(t).v(e)}}if(!0===d[d.length-1]){const t=40;this.background.d.h(t).v(l).h(-(t+r-i-o))}else{const t=a[a.length-1].width+2*c;this.background.d.h(-(t-o-i))}this.$b.options.next?this.background.d.v(-s).h(-i).v(s):this.background.d.h(-i),this.background.d.h(-o).z(),this.updateConnectionPosition(),this.inSlotField()?.updateShape()}updateConnectionPosition(){const t=this.$r.rendererOptions.block;if(this.previousConnection&&(this.previousConnection.dx=0,this.previousConnection.dy=0),this.nextConnection){this.nextConnection.dx=0;const e=this.background.bbox.height-(this.$b.options.previous?t.joinHeight:0);e!==this.nextConnection.dy&&(this.nextConnection.dy=e,this.nextConnection.targetConnection?.sourceBlock._previousConnAction(!1,this.nextConnection,null))}this.outputConnection&&(this.outputConnection.dx=0,this.outputConnection.dy=0)}destroy(){this.events.emit("beforeDestroy"),this.dragger.destroy(),super.destroy()}}class Fi extends gi{constructor(t,e,n,s){super(n,s),this.currentSelectedBlock=null,this.$r=e,this.$w=t,this.blocks=new Es,this._initGrid()}_initGrid(){const t=this.$r.effects.grid;Zs(this.background.dom,{fill:`url(#${t.id})`}),this.events.on("move",((e,n)=>{t.dmove(-e,-n)}))}addBlock(t,e=0,n=0){const s=this.$w.definedBlocks.get(t);if(!s)return void Ms(Fi.name,"Not found block definition: ",t);const i=s.clone(),o=new Si(i,this.$r,{x:e,y:n,type:t});return this.$w.addBlock(i),this.blocks.pushDistinct(o),this.appendContent(o),o.updateShape(),o.dragger.on("dragstart",(()=>{this.currentSelectedBlock?.removeClasses("s_block_selected"),this.currentSelectedBlock=o,this.currentSelectedBlock?.addClasses("s_block_selected"),this.displayAtTop(o),this.events.emit("select-block",o)})),o.dragger.on("dragging",(()=>{this.events.emit("block-move",o)})),o.dragger.on("dragend",(()=>{this.resize()})),o}removeBlock(t){const e="string"==typeof t?this.blocks.remove((e=>e.$b.id===t)):this.blocks.removeItem(t);e&&(this.removeContent(e),e.destroy())}displayAtTop(t){const e=t.getWorldPosition();t.move(e.x,e.y),super.displayAtTop(t)}}class Ti{constructor(t,e=10){this.$r=t,this.connections=new Set,this.maxRange=e}createConnection(t,e){let n=new Ci(t,e);return this.connections.add(n),t.events.on("beforeDestroy",(()=>{this.connections.delete(n)})),n}getNearestConn(t){if(t.isConnected)return null;let e=null,n=1/0;for(const o of this.connections){if(t.sourceBlock===o.sourceBlock||!t.checkDestConn(o))continue;const r=o.sourceBlock.getWorldPosition(),c=t.sourceBlock.getWorldPosition(),l=(s={x:o.dx+r.x,y:o.dy+r.y},i={x:t.dx+c.x,y:t.dy+c.y},Math.sqrt((s.x-i.x)**2+(s.y-i.y)**2));l<this.maxRange&&l<n&&(n=l,e=o)}var s,i;return e}getNearestConnPair(...t){let e=null;for(const n of t){if(!n)continue;const t=this.getNearestConn(n);t&&(e={from:n,to:t})}return e}}class Pi{constructor(t="."){this.root=t}get(t){return this.root+"/"+t}}class Ri{constructor(t,e=600,n=400,s){this._blockMoving=t=>{this.currentActiveField?.release(),this.floatWeight.actived&&this.floatWeight.hide(),t.previousConnection&&t.previousConnection.connectTo(null),this.currentActiveConnPair?.to?.setActive(!1);const e=t=>{const n=[];if(n.push(...(t=>{const n=[],s=t.fields.flat().filter((t=>t.$f.type===Ws.blockSlot));for(const t of s)if(t.connection.targetConnection){const s=t.connection.targetConnection.sourceBlock;n.push(...e(s))}else n.push(t.connection);return n})(t)),t.nextConnection)if(t.nextBlock){const s=e(t.nextBlock);n.push(...s)}else n.push(t.nextConnection);return n};this.currentActiveConnPair=this.connectionManager.getNearestConnPair(t.previousConnection,t.outputConnection,t.getTrialBlock().nextConnection,...e(t)),this.currentActiveConnPair?.to.setActive(!0)},this.effects={},this.fieldFactory=new Is,this.currentActiveConnPair=null,this.connectionManager=new Ti(this),this.floatWeight=new ii,this._initRendererOptions(s),this.assets=new Pi(this.rendererOptions.assetsRoot),this._registerAllFields(),this._initWorkspaceSVG(t,e,n)}_initRendererOptions(t){this.rendererOptions=Object.assign({},{block:{joinHeight:4,joinWidth:10,joinStartWidth:10,slotWidth:5,emptyHeight:20,fieldGap:5,horizontalPadding:8,verticalPadding:6},assetsRoot:"."},t)}_initWorkspaceSVG(t,e,n){this.svg=new ri(e,n),this._initEffects(),this.$w=new Fi(t,this,e,n),this.svg.append(this.$w),this.$w.events.on("select-block",this._blockMoving),this.$w.events.on("block-move",this._blockMoving),this.$w.dragger.on("dragstart",(()=>{this.currentActiveField?.release(),this.floatWeight.hide()})),this.$w.dragger.on("dragend",(()=>{this.currentActiveConnPair?.from.connectTo(this.currentActiveConnPair.to),this.currentActiveConnPair?.to.setActive(!1)}))}_initEffects(){const t=new mi;this.svg.defs.append(t);const e=new vi(40,40);this.svg.defs.append(e),this.registerEffect("dragging",t),this.registerEffect("grid",e)}_registerAllFields(){this.fieldFactory.set(Ws.text,$i),this.fieldFactory.set(Ws.blockSlot,Bi),this.fieldFactory.set(Ws.input,xi),this.fieldFactory.set(Ws.dropdown,yi)}mount(t){this.dom=t,this.svg.mount(t)}registerEffect(t,e){this.effects[t]=e,this.svg.defs.dom.append(e.dom)}}var Ai={data:()=>({id:As()}),mounted(){const t=new ri(600,400);t.mount(document.getElementById(this.id));const e=new gi(600,400);t.append(e);const n=new di(20,20);n.move(10,10),e.appendContent(n);const s=new vi(40,40);t.defs.append(s),e.background.dom.style.fill=`url(#${s.id})`,e.events.on("move",((t,e)=>{s.dmove(-t,-e)}));for(let t=0;t<100;t++){const t=new di(20,20);t.move(4e3*Math.random()-2e3,4e3*Math.random()-2e3),e.appendContent(t)}t.on("dblclick",(t=>{const n=new di(20,20);n.move(t.offsetX,t.offsetY),e.appendContent(n)}))}};Ai.render=function(t,e,n,s,i,o){return Fn(),Pn("div",{id:i.id},null,8,["id"])};var Oi={data:()=>({id:As()}),mounted(){const t=new Ls,e=new js(null,"p-n"),n=new qs("arg","hello");e.pushField(n),t.definedBlocks.add(i({},"p-n")),t.definedBlocks.add(i({previous:!1},"n")),t.definedBlocks.add(i({next:!1},"p")),t.definedBlocks.add(i({next:!1,previous:!1},"none"));const s=new Ri(t,600,400);function i(t={},e){const n=new js(t,e),s=new qs("arg","hello"),i=new qs("arg","world"),o=new qs("arg",e);return n.pushField(s),n.pushField(i),n.pushField(o),n}s.mount(document.getElementById(this.id)),s.$w.addBlock("n",100,50),s.$w.addBlock("p-n",100,100),s.$w.addBlock("p",100,150),s.$w.addBlock("none",100,200)}};Oi.render=function(t,e,n,s,i,o){return Fn(),Pn("div",{id:i.id},null,8,["id"])};var Ei={data:()=>({id:As()}),mounted(){const t=new Ls,e=new js(null,"p-n"),n=new qs("arg","hello");e.pushField(n),t.definedBlocks.add(i({},"p-n")),t.definedBlocks.add(i({previous:!1},"n")),t.definedBlocks.add(i({next:!1},"p")),t.definedBlocks.add(i({next:!1,previous:!1},"none")),t.definedBlocks.add(o({next:!0,previous:!0},"slot-p-n")),t.definedBlocks.add(o({next:!0,previous:!0},"slot-p-n1")),t.definedBlocks.add(o({next:!0,previous:!0},"slot-p-n2"));const s=new Ri(t,600,400);function i(t={},e){const n=new js(t,e),s=new qs("arg","hello"),i=new qs("arg","world"),o=new qs("arg",e);return n.pushField(s),n.pushField(i),n.pushField(o),n}function o(t={},e){const n=new js(t,e),s=new Gs("arg1"),i=new qs("arg",e);return n.pushField(i),n.pushField(s,1),n}s.mount(document.getElementById(this.id)),s.$w.addBlock("p-n",100,50),s.$w.addBlock("p-n",100,100),s.$w.addBlock("p-n",100,150),s.$w.addBlock("slot-p-n",300,50),s.$w.addBlock("slot-p-n1",300,150),s.$w.addBlock("slot-p-n2",300,250)}};Ei.render=function(t,e,n,s,i,o){return Fn(),Pn("div",{id:i.id},null,8,["id"])};var Mi={data:()=>({id:As()}),mounted(){const t=new Ls,e=new Ri(t,600,400);e.mount(document.getElementById(this.id)),t.definedBlocks.add(function(t={},e){const n=new js(t,e),s=new qs("text1","hello"),i=new Us("text2","dropdown",{options:[["1"],["2","21"]]});return n.pushField(s),n.pushField(i),n}({},"dropdown")),e.$w.addBlock("dropdown",100,50)}};Mi.render=function(t,e,n,s,i,o){return Fn(),Pn("div",{id:i.id},null,8,["id"])};var Ii={data:()=>({id:As()}),mounted(){const t=new Ls,e=new Ri(t,600,400);e.mount(document.getElementById(this.id)),t.definedBlocks.add(function(t={},e){const n=new js(t,e),s=new qs("text1","hello"),i=new Hs("text2","input");return n.pushField(s),n.pushField(i),n}({},"input")),e.$w.addBlock("input",100,50)}};Ii.render=function(t,e,n,s,i,o){return Fn(),Pn("div",{id:i.id},null,8,["id"])};var zi={data:()=>({id:As()}),mounted(){const t=new Ls;t.definedBlocks.add(n({},"p-n")),t.definedBlocks.add(n({previous:!1},"n")),t.definedBlocks.add(n({next:!1},"p")),t.definedBlocks.add(n({next:!1,previous:!1},"none")),t.definedBlocks.add(s({next:!0,previous:!0},"slot-p-n")),t.definedBlocks.add(s({next:!0,previous:!0},"slot-p-n1")),t.definedBlocks.add(s({next:!0,previous:!0},"slot-p-n2"));const e=new Ri(t,600,400);function n(t={},e){const n=new js(t,e),s=new qs("text1","hello"),i=new qs("text2","world"),o=new qs("arg",e);return n.pushField(s),n.pushField(i),n.pushField(o,1),n}function s(t={},e){const n=new js(t,e),s=new Gs("arg1"),i=new qs("arg",e);return n.pushField(i),n.pushField(s,1),n.pushField(i.clone(),2),n.pushField(s.clone(),3),n}e.mount(document.getElementById(this.id)),e.$w.addBlock("p-n",100,50),e.$w.addBlock("n",100,150),e.$w.addBlock("p",100,250),e.$w.addBlock("slot-p-n",300,50)}};zi.render=function(t,e,n,s,i,o){return Fn(),Pn("div",{id:i.id},null,8,["id"])};var ji={data:()=>({id:As()}),mounted(){const t=new Ls,e=new js(null,"testid"),n=new qs("arg","hello");e.pushField(n),t.definedBlocks.add(e);const s=new Ri(t,600,400);s.$w.on("dblclick",(t=>{console.log(t),s.$w.addBlock("testid",t.offsetX,t.offsetY)})),s.mount(document.getElementById(this.id))}};ji.render=function(t,e,n,s,i,o){return Fn(),Pn("div",{id:i.id},null,8,["id"])};const Ni=Array.prototype.slice;function Li(t,e=null,n=null){return(arguments.length>3||Rn(n))&&(n=Ni.call(arguments,2)),In(t,e,n)}var Di;((...t)=>{const e=(Ps||(Ps=mn(Ts))).createApp(...t),{mount:n}=e;return e.mount=t=>{const s=function(t){if(k(t)){return document.querySelector(t)}return t}(t);if(!s)return;const i=e._component;x(i)||i.render||i.template||(i.template=s.innerHTML),s.innerHTML="";const o=n(s);return s.removeAttribute("v-cloak"),s.setAttribute("data-v-app",""),o},e})(x(Di=()=>{const t=zt({type:"area"}),e={area:Li(Ai,null),block:Li(Oi,null),blockConnection:Li(Ei,null),blockDropdown:Li(Mi,null),blockInput:Li(Ii,null),blockMulti:Li(zi,null),workspace:Li(ji,null)};return()=>Li("div",{class:"playground"},Li("div",{class:"toolbar"},Object.keys(e).map((e=>Li("button",{onClick:()=>{return n=e,void(t.type=n);var n}},e)))),Li("div",{class:"test"},e[t.type]))})?{setup:Di,name:Di.name}:Di).mount("#app");
